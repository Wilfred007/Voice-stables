(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{7938:function(e,t,n){var s={"./connect-modal.entry.js":[8,8]};function l(e){if(!n.o(s,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=s[e],l=t[0];return n.e(t[1]).then(function(){return n(l)})}l.keys=function(){return Object.keys(s)},l.id=7938,e.exports=l},5856:function(){},9159:function(){},8859:function(){},8971:function(){},2606:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s=n(7437),l=n(2265),r=n(5737),i=n(8030);let a=(0,i.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),o=(0,i.Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),c=(0,i.Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),u=(0,i.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var d=n(760),x=n(1989),m=n(9969),f=n(8836),g=n(851),p=n(1932);let h="ST3HZSQ3EVYVFAX6KR3077S69FNZHB0XWMQ2WWTNJ.mock-usdc-v2";function b(){let[e,t]=(0,l.useState)(null),[n,i]=(0,l.useState)(""),[b,y]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[N,w]=(0,l.useState)("idle"),[k,S]=(0,l.useState)(null),[C,U]=(0,l.useState)(null);(0,l.useEffect)(()=>{t((0,d.JQ)())},[]);let z=async t=>{if(t.preventDefault(),S(null),U(null),!e){(0,d.YR)();return}let s=parseFloat(n);if(isNaN(s)||s<=0){w("error"),S("Enter a valid amount");return}if(!b||!b.includes("ST")){w("error"),S("Enter a valid Stacks principal for recipient");return}try{w("signing");let t=v?(0,m.PK)((0,f.B)(new TextEncoder().encode(v).slice(0,34))):(0,m.hr)();await (0,x.UQ)({contractAddress:h.split(".")[0],contractName:h.split(".")[1],functionName:"transfer",functionArgs:[(0,g.R)(Math.floor(1e6*s)),(0,p.L0)(e),(0,p.L0)(b.trim()),t],network:d.L5,onFinish:e=>{w("success"),U(e.txId),i(""),y(""),j("")},onCancel:()=>{w("idle")}}),w("submitting")}catch(e){var l;w("error"),S(null!==(l=null==e?void 0:e.message)&&void 0!==l?l:"Transfer failed")}};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-3xl shadow-xl border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Send USDC"}),e?(0,s.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[e.slice(0,6),"...",e.slice(-4)]}):(0,s.jsxs)("button",{onClick:d.YR,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-full hover:bg-blue-700 transition-all shadow",children:[(0,s.jsx)(r.Z,{size:18})," Connect"]})]}),(0,s.jsxs)("form",{onSubmit:z,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Amount (USDC)"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"0",value:n,onChange:e=>i(e.target.value),placeholder:"e.g. 25",className:"w-full px-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Recipient (Stacks address)"}),(0,s.jsx)("input",{type:"text",value:b,onChange:e=>y(e.target.value),placeholder:"ST...",className:"w-full px-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Memo (optional)"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:"Up to 34 bytes",className:"w-full px-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 flex items-center gap-3",children:[(0,s.jsxs)("button",{type:"submit",disabled:"signing"===N||"submitting"===N,className:"bg-blue-600 text-white px-5 py-2 rounded-xl font-bold shadow hover:bg-blue-700 transition-colors flex items-center gap-2",children:["signing"===N||"submitting"===N?(0,s.jsx)(a,{className:"animate-spin",size:16}):(0,s.jsx)(o,{size:16}),"signing"===N?"Waiting for signature":"submitting"===N?"Submitting":"Send"]}),"success"===N&&(0,s.jsxs)("span",{className:"text-green-600 flex items-center gap-2 text-sm",children:[(0,s.jsx)(c,{size:16})," Sent! ",C&&(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",className:"underline",href:"https://explorer.hiro.so/txid/".concat(C,"?chain=testnet"),children:"View tx"})]}),"error"===N&&(0,s.jsxs)("span",{className:"text-red-600 flex items-center gap-2 text-sm",children:[(0,s.jsx)(u,{size:16})," ",k]})]})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-4",children:["Using contract: ",(0,s.jsx)("span",{className:"font-mono",children:h})]})]})}},760:function(e,t,n){"use strict";n.d(t,{JQ:function(){return m},L5:function(){return c},YR:function(){return d},zP:function(){return x}});var s=n(3419),l=n(2477),r=n(1989),i=n(303);let a=new s.X(["store_write","publish_data"]),o=new l.V({appConfig:a}),c=new i.an,u={name:"Voice Stables",icon:window.location.origin+"/logo.png"};function d(){(0,r.YR)({appDetails:u,userSession:o,onFinish:()=>window.location.reload()})}function x(){o.signUserOut(),window.location.reload()}function m(){var e,t,n,s,l,r;if(!o.isUserSignedIn())return null;let i=o.loadUserData();return null!==(r=null!==(l=null==i?void 0:null===(t=i.profile)||void 0===t?void 0:null===(e=t.stxAddress)||void 0===e?void 0:e.testnet)&&void 0!==l?l:null==i?void 0:null===(s=i.profile)||void 0===s?void 0:null===(n=s.stxAddress)||void 0===n?void 0:n.mainnet)&&void 0!==r?r:null}}}]);