"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_app-pages-browser_src_components_Vault_tsx",{

/***/ "(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/builders.js":
/*!****************************************************************!*\
  !*** ./node_modules/@stacks/transactions/dist/esm/builders.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   broadcastRawTransaction: function() { return /* binding */ broadcastRawTransaction; },\n/* harmony export */   broadcastTransaction: function() { return /* binding */ broadcastTransaction; },\n/* harmony export */   callReadOnlyFunction: function() { return /* binding */ callReadOnlyFunction; },\n/* harmony export */   estimateContractDeploy: function() { return /* binding */ estimateContractDeploy; },\n/* harmony export */   estimateContractFunctionCall: function() { return /* binding */ estimateContractFunctionCall; },\n/* harmony export */   estimateTransaction: function() { return /* binding */ estimateTransaction; },\n/* harmony export */   estimateTransactionByteLength: function() { return /* binding */ estimateTransactionByteLength; },\n/* harmony export */   estimateTransactionFeeWithFallback: function() { return /* binding */ estimateTransactionFeeWithFallback; },\n/* harmony export */   estimateTransfer: function() { return /* binding */ estimateTransfer; },\n/* harmony export */   estimateTransferUnsafe: function() { return /* binding */ estimateTransferUnsafe; },\n/* harmony export */   getAbi: function() { return /* binding */ getAbi; },\n/* harmony export */   getContractMapEntry: function() { return /* binding */ getContractMapEntry; },\n/* harmony export */   getNonce: function() { return /* binding */ getNonce; },\n/* harmony export */   makeContractCall: function() { return /* binding */ makeContractCall; },\n/* harmony export */   makeContractDeploy: function() { return /* binding */ makeContractDeploy; },\n/* harmony export */   makeContractFungiblePostCondition: function() { return /* binding */ makeContractFungiblePostCondition; },\n/* harmony export */   makeContractNonFungiblePostCondition: function() { return /* binding */ makeContractNonFungiblePostCondition; },\n/* harmony export */   makeContractSTXPostCondition: function() { return /* binding */ makeContractSTXPostCondition; },\n/* harmony export */   makeSTXTokenTransfer: function() { return /* binding */ makeSTXTokenTransfer; },\n/* harmony export */   makeStandardFungiblePostCondition: function() { return /* binding */ makeStandardFungiblePostCondition; },\n/* harmony export */   makeStandardNonFungiblePostCondition: function() { return /* binding */ makeStandardNonFungiblePostCondition; },\n/* harmony export */   makeStandardSTXPostCondition: function() { return /* binding */ makeStandardSTXPostCondition; },\n/* harmony export */   makeUnsignedContractCall: function() { return /* binding */ makeUnsignedContractCall; },\n/* harmony export */   makeUnsignedContractDeploy: function() { return /* binding */ makeUnsignedContractDeploy; },\n/* harmony export */   makeUnsignedSTXTokenTransfer: function() { return /* binding */ makeUnsignedSTXTokenTransfer; },\n/* harmony export */   sponsorTransaction: function() { return /* binding */ sponsorTransaction; }\n/* harmony export */ });\n/* harmony import */ var _stacks_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stacks/common */ \"(app-pages-browser)/./node_modules/@stacks/common/dist/esm/utils.js\");\n/* harmony import */ var _stacks_network__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stacks/network */ \"(app-pages-browser)/./node_modules/@stacks/network/dist/esm/network.js\");\n/* harmony import */ var _stacks_network__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @stacks/network */ \"(app-pages-browser)/./node_modules/@stacks/network/dist/esm/fetch.js\");\n/* harmony import */ var c32check__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! c32check */ \"(app-pages-browser)/./node_modules/c32check/lib/index.js\");\n/* harmony import */ var _authorization__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./authorization */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/authorization.js\");\n/* harmony import */ var _clarity__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./clarity */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/serialize.js\");\n/* harmony import */ var _clarity__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./clarity */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/deserialize.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/constants.js\");\n/* harmony import */ var _contract_abi__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./contract-abi */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/contract-abi.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./errors */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/errors.js\");\n/* harmony import */ var _keys__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./keys */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/keys.js\");\n/* harmony import */ var _payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./payload */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/payload.js\");\n/* harmony import */ var _postcondition__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./postcondition */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/postcondition.js\");\n/* harmony import */ var _postcondition_types__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./postcondition-types */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/postcondition-types.js\");\n/* harmony import */ var _signer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./signer */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/signer.js\");\n/* harmony import */ var _transaction__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./transaction */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/transaction.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./types */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/types.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/utils.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nasync function getNonce(address, network) {\n    const derivedNetwork = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(network ?? new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksMainnet());\n    const url = derivedNetwork.getAccountApiUrl(address);\n    const response = await derivedNetwork.fetchFn(url);\n    if (!response.ok) {\n        let msg = '';\n        try {\n            msg = await response.text();\n        }\n        catch (error) { }\n        throw new Error(`Error fetching nonce. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const responseText = await response.text();\n    const result = JSON.parse(responseText);\n    return BigInt(result.nonce);\n}\nasync function estimateTransfer(transaction, network) {\n    if (transaction.payload.payloadType !== _constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.TokenTransfer) {\n        throw new Error(`Transaction fee estimation only possible with ${_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType[_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.TokenTransfer]} transactions. Invoked with: ${_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType[transaction.payload.payloadType]}`);\n    }\n    return estimateTransferUnsafe(transaction, network);\n}\nasync function estimateTransferUnsafe(transaction, network) {\n    const requestHeaders = {\n        Accept: 'application/text',\n    };\n    const fetchOptions = {\n        method: 'GET',\n        headers: requestHeaders,\n    };\n    const derivedNetwork = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n    const url = derivedNetwork.getTransferFeeEstimateApiUrl();\n    const response = await derivedNetwork.fetchFn(url, fetchOptions);\n    if (!response.ok) {\n        let msg = '';\n        try {\n            msg = await response.text();\n        }\n        catch (error) { }\n        throw new Error(`Error estimating transaction fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const feeRateResult = await response.text();\n    const txBytes = BigInt(transaction.serialize().byteLength);\n    const feeRate = BigInt(feeRateResult);\n    return feeRate * txBytes;\n}\nasync function estimateTransaction(transactionPayload, estimatedLen, network) {\n    const options = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n            transaction_payload: (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.bytesToHex)((0,_payload__WEBPACK_IMPORTED_MODULE_4__.serializePayload)(transactionPayload)),\n            ...(estimatedLen ? { estimated_len: estimatedLen } : {}),\n        }),\n    };\n    const derivedNetwork = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(network ?? new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksMainnet());\n    const url = derivedNetwork.getTransactionFeeEstimateApiUrl();\n    const response = await derivedNetwork.fetchFn(url, options);\n    if (!response.ok) {\n        const body = await response.text().then(str => {\n            try {\n                return JSON.parse(str);\n            }\n            catch (error) {\n                return str;\n            }\n        });\n        if (body?.reason === 'NoEstimateAvailable' ||\n            (typeof body === 'string' && body.includes('NoEstimateAvailable'))) {\n            throw new _errors__WEBPACK_IMPORTED_MODULE_5__.NoEstimateAvailableError(body?.reason_data?.message ?? '');\n        }\n        throw new Error(`Error estimating transaction fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${body}\"`);\n    }\n    const data = await response.json();\n    return data.estimations;\n}\nasync function broadcastTransaction(transaction, network, attachment) {\n    const rawTx = transaction.serialize();\n    const derivedNetwork = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n    const url = derivedNetwork.getBroadcastApiUrl();\n    return broadcastRawTransaction(rawTx, url, attachment, derivedNetwork.fetchFn);\n}\nasync function broadcastRawTransaction(rawTx, url, attachment, fetchFn = (0,_stacks_network__WEBPACK_IMPORTED_MODULE_6__.createFetchFn)()) {\n    const options = {\n        method: 'POST',\n        headers: { 'Content-Type': attachment ? 'application/json' : 'application/octet-stream' },\n        body: attachment\n            ? JSON.stringify({\n                tx: (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.bytesToHex)(rawTx),\n                attachment: (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.bytesToHex)(attachment),\n            })\n            : rawTx,\n    };\n    const response = await fetchFn(url, options);\n    if (!response.ok) {\n        try {\n            return (await response.json());\n        }\n        catch (e) {\n            throw Error(`Failed to broadcast transaction: ${e.message}`);\n        }\n    }\n    const text = await response.text();\n    const txid = text.replace(/[\"]+/g, '');\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_7__.validateTxId)(txid))\n        throw new Error(text);\n    return { txid };\n}\nasync function getAbi(address, contractName, network) {\n    const options = {\n        method: 'GET',\n    };\n    const derivedNetwork = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(network);\n    const url = derivedNetwork.getAbiApiUrl(address, contractName);\n    const response = await derivedNetwork.fetchFn(url, options);\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error fetching contract ABI for contract \"${contractName}\" at address ${address}. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    return JSON.parse(await response.text());\n}\nfunction deriveNetwork(transaction) {\n    switch (transaction.version) {\n        case _constants__WEBPACK_IMPORTED_MODULE_2__.TransactionVersion.Mainnet:\n            return new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksMainnet();\n        case _constants__WEBPACK_IMPORTED_MODULE_2__.TransactionVersion.Testnet:\n            return new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksTestnet();\n    }\n}\nasync function makeUnsignedSTXTokenTransfer(txOptions) {\n    const defaultOptions = {\n        fee: BigInt(0),\n        nonce: BigInt(0),\n        network: new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksMainnet(),\n        memo: '',\n        sponsored: false,\n    };\n    const options = Object.assign(defaultOptions, txOptions);\n    const payload = (0,_payload__WEBPACK_IMPORTED_MODULE_4__.createTokenTransferPayload)(options.recipient, options.amount, options.memo);\n    let authorization = null;\n    let spendingCondition = null;\n    if ('publicKey' in options) {\n        spendingCondition = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createSingleSigSpendingCondition)(_constants__WEBPACK_IMPORTED_MODULE_2__.AddressHashMode.SerializeP2PKH, options.publicKey, options.nonce, options.fee);\n    }\n    else {\n        spendingCondition = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createMultiSigSpendingCondition)(_constants__WEBPACK_IMPORTED_MODULE_2__.AddressHashMode.SerializeP2SH, options.numSignatures, options.publicKeys, options.nonce, options.fee);\n    }\n    if (options.sponsored) {\n        authorization = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createSponsoredAuth)(spendingCondition);\n    }\n    else {\n        authorization = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createStandardAuth)(spendingCondition);\n    }\n    const network = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(options.network);\n    const transaction = new _transaction__WEBPACK_IMPORTED_MODULE_9__.StacksTransaction(network.version, authorization, payload, undefined, undefined, options.anchorMode, network.chainId);\n    if (txOptions.fee === undefined || txOptions.fee === null) {\n        const fee = await estimateTransactionFeeWithFallback(transaction, network);\n        transaction.setFee(fee);\n    }\n    if (txOptions.nonce === undefined || txOptions.nonce === null) {\n        const addressVersion = options.network.version === _constants__WEBPACK_IMPORTED_MODULE_2__.TransactionVersion.Mainnet\n            ? _constants__WEBPACK_IMPORTED_MODULE_2__.AddressVersion.MainnetSingleSig\n            : _constants__WEBPACK_IMPORTED_MODULE_2__.AddressVersion.TestnetSingleSig;\n        const senderAddress = (0,c32check__WEBPACK_IMPORTED_MODULE_0__.c32address)(addressVersion, transaction.auth.spendingCondition.signer);\n        const txNonce = await getNonce(senderAddress, options.network);\n        transaction.setNonce(txNonce);\n    }\n    return transaction;\n}\nasync function makeSTXTokenTransfer(txOptions) {\n    if ('senderKey' in txOptions) {\n        const publicKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.publicKeyToString)((0,_keys__WEBPACK_IMPORTED_MODULE_10__.getPublicKey)((0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(txOptions.senderKey)));\n        const options = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.omit)(txOptions, 'senderKey');\n        const transaction = await makeUnsignedSTXTokenTransfer({ publicKey, ...options });\n        const privKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(txOptions.senderKey);\n        const signer = new _signer__WEBPACK_IMPORTED_MODULE_11__.TransactionSigner(transaction);\n        signer.signOrigin(privKey);\n        return transaction;\n    }\n    else {\n        const options = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.omit)(txOptions, 'signerKeys');\n        const transaction = await makeUnsignedSTXTokenTransfer(options);\n        const signer = new _signer__WEBPACK_IMPORTED_MODULE_11__.TransactionSigner(transaction);\n        let pubKeys = txOptions.publicKeys;\n        for (const key of txOptions.signerKeys) {\n            const pubKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.pubKeyfromPrivKey)(key);\n            pubKeys = pubKeys.filter(pk => pk !== (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.bytesToHex)(pubKey.data));\n            signer.signOrigin((0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(key));\n        }\n        for (const key of pubKeys) {\n            signer.appendOrigin((0,_keys__WEBPACK_IMPORTED_MODULE_10__.publicKeyFromBytes)((0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)(key)));\n        }\n        return transaction;\n    }\n}\nasync function estimateContractDeploy(transaction, network) {\n    if (transaction.payload.payloadType !== _constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.SmartContract &&\n        transaction.payload.payloadType !== _constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.VersionedSmartContract) {\n        throw new Error(`Contract deploy fee estimation only possible with ${_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType[_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.SmartContract]} transactions. Invoked with: ${_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType[transaction.payload.payloadType]}`);\n    }\n    const requestHeaders = {\n        Accept: 'application/text',\n    };\n    const fetchOptions = {\n        method: 'GET',\n        headers: requestHeaders,\n    };\n    const derivedNetwork = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n    const url = derivedNetwork.getTransferFeeEstimateApiUrl();\n    const response = await derivedNetwork.fetchFn(url, fetchOptions);\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error estimating contract deploy fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const feeRateResult = await response.text();\n    const txBytes = (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.intToBigInt)(transaction.serialize().byteLength, false);\n    const feeRate = (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.intToBigInt)(feeRateResult, false);\n    return feeRate * txBytes;\n}\nasync function makeContractDeploy(txOptions) {\n    if ('senderKey' in txOptions) {\n        const publicKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.publicKeyToString)((0,_keys__WEBPACK_IMPORTED_MODULE_10__.getPublicKey)((0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(txOptions.senderKey)));\n        const options = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.omit)(txOptions, 'senderKey');\n        const transaction = await makeUnsignedContractDeploy({ publicKey, ...options });\n        const privKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(txOptions.senderKey);\n        const signer = new _signer__WEBPACK_IMPORTED_MODULE_11__.TransactionSigner(transaction);\n        signer.signOrigin(privKey);\n        return transaction;\n    }\n    else {\n        const options = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.omit)(txOptions, 'signerKeys');\n        const transaction = await makeUnsignedContractDeploy(options);\n        const signer = new _signer__WEBPACK_IMPORTED_MODULE_11__.TransactionSigner(transaction);\n        let pubKeys = txOptions.publicKeys;\n        for (const key of txOptions.signerKeys) {\n            const pubKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.pubKeyfromPrivKey)(key);\n            pubKeys = pubKeys.filter(pk => pk !== (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.bytesToHex)(pubKey.data));\n            signer.signOrigin((0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(key));\n        }\n        for (const key of pubKeys) {\n            signer.appendOrigin((0,_keys__WEBPACK_IMPORTED_MODULE_10__.publicKeyFromBytes)((0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)(key)));\n        }\n        return transaction;\n    }\n}\nasync function makeUnsignedContractDeploy(txOptions) {\n    const defaultOptions = {\n        fee: BigInt(0),\n        nonce: BigInt(0),\n        network: new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksMainnet(),\n        postConditionMode: _constants__WEBPACK_IMPORTED_MODULE_2__.PostConditionMode.Deny,\n        sponsored: false,\n        clarityVersion: _constants__WEBPACK_IMPORTED_MODULE_2__.ClarityVersion.Clarity2,\n    };\n    const options = Object.assign(defaultOptions, txOptions);\n    const payload = (0,_payload__WEBPACK_IMPORTED_MODULE_4__.createSmartContractPayload)(options.contractName, options.codeBody, options.clarityVersion);\n    let authorization = null;\n    let spendingCondition = null;\n    if ('publicKey' in options) {\n        spendingCondition = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createSingleSigSpendingCondition)(_constants__WEBPACK_IMPORTED_MODULE_2__.AddressHashMode.SerializeP2PKH, options.publicKey, options.nonce, options.fee);\n    }\n    else {\n        spendingCondition = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createMultiSigSpendingCondition)(_constants__WEBPACK_IMPORTED_MODULE_2__.AddressHashMode.SerializeP2SH, options.numSignatures, options.publicKeys, options.nonce, options.fee);\n    }\n    if (options.sponsored) {\n        authorization = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createSponsoredAuth)(spendingCondition);\n    }\n    else {\n        authorization = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createStandardAuth)(spendingCondition);\n    }\n    const network = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(options.network);\n    const postConditions = [];\n    if (options.postConditions && options.postConditions.length > 0) {\n        options.postConditions.forEach(postCondition => {\n            postConditions.push(postCondition);\n        });\n    }\n    const lpPostConditions = (0,_types__WEBPACK_IMPORTED_MODULE_12__.createLPList)(postConditions);\n    const transaction = new _transaction__WEBPACK_IMPORTED_MODULE_9__.StacksTransaction(network.version, authorization, payload, lpPostConditions, options.postConditionMode, options.anchorMode, network.chainId);\n    if (txOptions.fee === undefined || txOptions.fee === null) {\n        const fee = await estimateTransactionFeeWithFallback(transaction, network);\n        transaction.setFee(fee);\n    }\n    if (txOptions.nonce === undefined || txOptions.nonce === null) {\n        const addressVersion = options.network.version === _constants__WEBPACK_IMPORTED_MODULE_2__.TransactionVersion.Mainnet\n            ? _constants__WEBPACK_IMPORTED_MODULE_2__.AddressVersion.MainnetSingleSig\n            : _constants__WEBPACK_IMPORTED_MODULE_2__.AddressVersion.TestnetSingleSig;\n        const senderAddress = (0,c32check__WEBPACK_IMPORTED_MODULE_0__.c32address)(addressVersion, transaction.auth.spendingCondition.signer);\n        const txNonce = await getNonce(senderAddress, options.network);\n        transaction.setNonce(txNonce);\n    }\n    return transaction;\n}\nasync function estimateContractFunctionCall(transaction, network) {\n    if (transaction.payload.payloadType !== _constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.ContractCall) {\n        throw new Error(`Contract call fee estimation only possible with ${_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType[_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.ContractCall]} transactions. Invoked with: ${_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType[transaction.payload.payloadType]}`);\n    }\n    const requestHeaders = {\n        Accept: 'application/text',\n    };\n    const fetchOptions = {\n        method: 'GET',\n        headers: requestHeaders,\n    };\n    const derivedNetwork = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(network ?? deriveNetwork(transaction));\n    const url = derivedNetwork.getTransferFeeEstimateApiUrl();\n    const response = await derivedNetwork.fetchFn(url, fetchOptions);\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error estimating contract call fee. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const feeRateResult = await response.text();\n    const txBytes = (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.intToBigInt)(transaction.serialize().byteLength, false);\n    const feeRate = (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.intToBigInt)(feeRateResult, false);\n    return feeRate * txBytes;\n}\nasync function makeUnsignedContractCall(txOptions) {\n    const defaultOptions = {\n        fee: BigInt(0),\n        nonce: BigInt(0),\n        network: new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksMainnet(),\n        postConditionMode: _constants__WEBPACK_IMPORTED_MODULE_2__.PostConditionMode.Deny,\n        sponsored: false,\n    };\n    const options = Object.assign(defaultOptions, txOptions);\n    const payload = (0,_payload__WEBPACK_IMPORTED_MODULE_4__.createContractCallPayload)(options.contractAddress, options.contractName, options.functionName, options.functionArgs);\n    if (options?.validateWithAbi) {\n        let abi;\n        if (typeof options.validateWithAbi === 'boolean') {\n            if (options?.network) {\n                abi = await getAbi(options.contractAddress, options.contractName, options.network);\n            }\n            else {\n                throw new Error('Network option must be provided in order to validate with ABI');\n            }\n        }\n        else {\n            abi = options.validateWithAbi;\n        }\n        (0,_contract_abi__WEBPACK_IMPORTED_MODULE_13__.validateContractCall)(payload, abi);\n    }\n    let spendingCondition = null;\n    let authorization = null;\n    if ('publicKey' in options) {\n        spendingCondition = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createSingleSigSpendingCondition)(_constants__WEBPACK_IMPORTED_MODULE_2__.AddressHashMode.SerializeP2PKH, options.publicKey, options.nonce, options.fee);\n    }\n    else {\n        spendingCondition = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createMultiSigSpendingCondition)(_constants__WEBPACK_IMPORTED_MODULE_2__.AddressHashMode.SerializeP2SH, options.numSignatures, options.publicKeys, options.nonce, options.fee);\n    }\n    if (options.sponsored) {\n        authorization = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createSponsoredAuth)(spendingCondition);\n    }\n    else {\n        authorization = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createStandardAuth)(spendingCondition);\n    }\n    const network = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(options.network);\n    const postConditions = [];\n    if (options.postConditions && options.postConditions.length > 0) {\n        options.postConditions.forEach(postCondition => {\n            postConditions.push(postCondition);\n        });\n    }\n    const lpPostConditions = (0,_types__WEBPACK_IMPORTED_MODULE_12__.createLPList)(postConditions);\n    const transaction = new _transaction__WEBPACK_IMPORTED_MODULE_9__.StacksTransaction(network.version, authorization, payload, lpPostConditions, options.postConditionMode, options.anchorMode, network.chainId);\n    if (txOptions.fee === undefined || txOptions.fee === null) {\n        const fee = await estimateTransactionFeeWithFallback(transaction, network);\n        transaction.setFee(fee);\n    }\n    if (txOptions.nonce === undefined || txOptions.nonce === null) {\n        const addressVersion = network.version === _constants__WEBPACK_IMPORTED_MODULE_2__.TransactionVersion.Mainnet\n            ? _constants__WEBPACK_IMPORTED_MODULE_2__.AddressVersion.MainnetSingleSig\n            : _constants__WEBPACK_IMPORTED_MODULE_2__.AddressVersion.TestnetSingleSig;\n        const senderAddress = (0,c32check__WEBPACK_IMPORTED_MODULE_0__.c32address)(addressVersion, transaction.auth.spendingCondition.signer);\n        const txNonce = await getNonce(senderAddress, network);\n        transaction.setNonce(txNonce);\n    }\n    return transaction;\n}\nasync function makeContractCall(txOptions) {\n    if ('senderKey' in txOptions) {\n        const publicKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.publicKeyToString)((0,_keys__WEBPACK_IMPORTED_MODULE_10__.getPublicKey)((0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(txOptions.senderKey)));\n        const options = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.omit)(txOptions, 'senderKey');\n        const transaction = await makeUnsignedContractCall({ publicKey, ...options });\n        const privKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(txOptions.senderKey);\n        const signer = new _signer__WEBPACK_IMPORTED_MODULE_11__.TransactionSigner(transaction);\n        signer.signOrigin(privKey);\n        return transaction;\n    }\n    else {\n        const options = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.omit)(txOptions, 'signerKeys');\n        const transaction = await makeUnsignedContractCall(options);\n        const signer = new _signer__WEBPACK_IMPORTED_MODULE_11__.TransactionSigner(transaction);\n        let pubKeys = txOptions.publicKeys;\n        for (const key of txOptions.signerKeys) {\n            const pubKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.pubKeyfromPrivKey)(key);\n            pubKeys = pubKeys.filter(pk => pk !== (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.bytesToHex)(pubKey.data));\n            signer.signOrigin((0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(key));\n        }\n        for (const key of pubKeys) {\n            signer.appendOrigin((0,_keys__WEBPACK_IMPORTED_MODULE_10__.publicKeyFromBytes)((0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)(key)));\n        }\n        return transaction;\n    }\n}\nfunction makeStandardSTXPostCondition(address, conditionCode, amount) {\n    return (0,_postcondition__WEBPACK_IMPORTED_MODULE_14__.createSTXPostCondition)((0,_postcondition_types__WEBPACK_IMPORTED_MODULE_15__.createStandardPrincipal)(address), conditionCode, amount);\n}\nfunction makeContractSTXPostCondition(address, contractName, conditionCode, amount) {\n    return (0,_postcondition__WEBPACK_IMPORTED_MODULE_14__.createSTXPostCondition)((0,_postcondition_types__WEBPACK_IMPORTED_MODULE_15__.createContractPrincipal)(address, contractName), conditionCode, amount);\n}\nfunction makeStandardFungiblePostCondition(address, conditionCode, amount, assetInfo) {\n    return (0,_postcondition__WEBPACK_IMPORTED_MODULE_14__.createFungiblePostCondition)((0,_postcondition_types__WEBPACK_IMPORTED_MODULE_15__.createStandardPrincipal)(address), conditionCode, amount, assetInfo);\n}\nfunction makeContractFungiblePostCondition(address, contractName, conditionCode, amount, assetInfo) {\n    return (0,_postcondition__WEBPACK_IMPORTED_MODULE_14__.createFungiblePostCondition)((0,_postcondition_types__WEBPACK_IMPORTED_MODULE_15__.createContractPrincipal)(address, contractName), conditionCode, amount, assetInfo);\n}\nfunction makeStandardNonFungiblePostCondition(address, conditionCode, assetInfo, assetId) {\n    return (0,_postcondition__WEBPACK_IMPORTED_MODULE_14__.createNonFungiblePostCondition)((0,_postcondition_types__WEBPACK_IMPORTED_MODULE_15__.createStandardPrincipal)(address), conditionCode, assetInfo, assetId);\n}\nfunction makeContractNonFungiblePostCondition(address, contractName, conditionCode, assetInfo, assetId) {\n    return (0,_postcondition__WEBPACK_IMPORTED_MODULE_14__.createNonFungiblePostCondition)((0,_postcondition_types__WEBPACK_IMPORTED_MODULE_15__.createContractPrincipal)(address, contractName), conditionCode, assetInfo, assetId);\n}\nasync function callReadOnlyFunction(readOnlyFunctionOptions) {\n    const defaultOptions = {\n        network: new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksMainnet(),\n    };\n    const options = Object.assign(defaultOptions, readOnlyFunctionOptions);\n    const { contractName, contractAddress, functionName, functionArgs, senderAddress } = options;\n    const network = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(options.network);\n    const url = network.getReadOnlyFunctionCallApiUrl(contractAddress, contractName, functionName);\n    const args = functionArgs.map(arg => (0,_utils__WEBPACK_IMPORTED_MODULE_7__.cvToHex)(arg));\n    const body = JSON.stringify({\n        sender: senderAddress,\n        arguments: args,\n    });\n    const response = await network.fetchFn(url, {\n        method: 'POST',\n        body,\n        headers: {\n            'Content-Type': 'application/json',\n        },\n    });\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error calling read-only function. Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    return response.json().then(responseJson => (0,_utils__WEBPACK_IMPORTED_MODULE_7__.parseReadOnlyResponse)(responseJson));\n}\nasync function getContractMapEntry(getContractMapEntryOptions) {\n    const defaultOptions = {\n        network: new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksMainnet(),\n    };\n    const { contractAddress, contractName, mapName, mapKey, network } = Object.assign(defaultOptions, getContractMapEntryOptions);\n    const derivedNetwork = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(network);\n    const url = derivedNetwork.getMapEntryUrl(contractAddress, contractName, mapName);\n    const serializedKeyBytes = (0,_clarity__WEBPACK_IMPORTED_MODULE_16__.serializeCV)(mapKey);\n    const serializedKeyHex = '0x' + (0,_stacks_common__WEBPACK_IMPORTED_MODULE_3__.bytesToHex)(serializedKeyBytes);\n    const fetchOptions = {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n        },\n        body: JSON.stringify(serializedKeyHex),\n    };\n    const response = await derivedNetwork.fetchFn(url, fetchOptions);\n    if (!response.ok) {\n        const msg = await response.text().catch(() => '');\n        throw new Error(`Error fetching map entry for map \"${mapName}\" in contract \"${contractName}\" at address ${contractAddress}, using map key \"${serializedKeyHex}\". Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the message: \"${msg}\"`);\n    }\n    const responseBody = await response.text();\n    const responseJson = JSON.parse(responseBody);\n    if (!responseJson.data) {\n        throw new Error(`Error fetching map entry for map \"${mapName}\" in contract \"${contractName}\" at address ${contractAddress}, using map key \"${serializedKeyHex}\". Response ${response.status}: ${response.statusText}. Attempted to fetch ${url} and failed with the response: \"${responseBody}\"`);\n    }\n    let deserializedCv;\n    try {\n        deserializedCv = (0,_clarity__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(responseJson.data);\n    }\n    catch (error) {\n        throw new Error(`Error deserializing Clarity value \"${responseJson.data}\": ${error}`);\n    }\n    return deserializedCv;\n}\nasync function sponsorTransaction(sponsorOptions) {\n    const defaultOptions = {\n        fee: 0,\n        sponsorNonce: 0,\n        sponsorAddressHashmode: _constants__WEBPACK_IMPORTED_MODULE_2__.AddressHashMode.SerializeP2PKH,\n        network: sponsorOptions.transaction.version === _constants__WEBPACK_IMPORTED_MODULE_2__.TransactionVersion.Mainnet\n            ? new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksMainnet()\n            : new _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksTestnet(),\n    };\n    const options = Object.assign(defaultOptions, sponsorOptions);\n    const network = _stacks_network__WEBPACK_IMPORTED_MODULE_1__.StacksNetwork.fromNameOrNetwork(options.network);\n    const sponsorPubKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.pubKeyfromPrivKey)(options.sponsorPrivateKey);\n    if (sponsorOptions.fee === undefined || sponsorOptions.fee === null) {\n        let txFee = 0;\n        switch (options.transaction.payload.payloadType) {\n            case _constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.TokenTransfer:\n            case _constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.SmartContract:\n            case _constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.VersionedSmartContract:\n            case _constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType.ContractCall:\n                const estimatedLen = estimateTransactionByteLength(options.transaction);\n                try {\n                    txFee = (await estimateTransaction(options.transaction.payload, estimatedLen, network))[1]\n                        .fee;\n                }\n                catch (e) {\n                    throw e;\n                }\n                break;\n            default:\n                throw new Error(`Sponsored transactions not supported for transaction type ${_constants__WEBPACK_IMPORTED_MODULE_2__.PayloadType[options.transaction.payload.payloadType]}`);\n        }\n        options.transaction.setFee(txFee);\n        options.fee = txFee;\n    }\n    if (sponsorOptions.sponsorNonce === undefined || sponsorOptions.sponsorNonce === null) {\n        const addressVersion = network.version === _constants__WEBPACK_IMPORTED_MODULE_2__.TransactionVersion.Mainnet\n            ? _constants__WEBPACK_IMPORTED_MODULE_2__.AddressVersion.MainnetSingleSig\n            : _constants__WEBPACK_IMPORTED_MODULE_2__.AddressVersion.TestnetSingleSig;\n        const senderAddress = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.publicKeyToAddress)(addressVersion, sponsorPubKey);\n        const sponsorNonce = await getNonce(senderAddress, network);\n        options.sponsorNonce = sponsorNonce;\n    }\n    const sponsorSpendingCondition = (0,_authorization__WEBPACK_IMPORTED_MODULE_8__.createSingleSigSpendingCondition)(options.sponsorAddressHashmode, (0,_keys__WEBPACK_IMPORTED_MODULE_10__.publicKeyToString)(sponsorPubKey), options.sponsorNonce, options.fee);\n    options.transaction.setSponsor(sponsorSpendingCondition);\n    const privKey = (0,_keys__WEBPACK_IMPORTED_MODULE_10__.createStacksPrivateKey)(options.sponsorPrivateKey);\n    const signer = _signer__WEBPACK_IMPORTED_MODULE_11__.TransactionSigner.createSponsorSigner(options.transaction, sponsorSpendingCondition);\n    signer.signSponsor(privKey);\n    return signer.transaction;\n}\nfunction estimateTransactionByteLength(transaction) {\n    const hashMode = transaction.auth.spendingCondition.hashMode;\n    const multiSigHashModes = [_constants__WEBPACK_IMPORTED_MODULE_2__.AddressHashMode.SerializeP2SH, _constants__WEBPACK_IMPORTED_MODULE_2__.AddressHashMode.SerializeP2WSH];\n    if (multiSigHashModes.includes(hashMode)) {\n        const multiSigSpendingCondition = transaction.auth\n            .spendingCondition;\n        const existingSignatures = multiSigSpendingCondition.fields.filter(field => field.contents.type === _constants__WEBPACK_IMPORTED_MODULE_2__.StacksMessageType.MessageSignature).length;\n        const totalSignatureLength = (multiSigSpendingCondition.signaturesRequired - existingSignatures) *\n            (_constants__WEBPACK_IMPORTED_MODULE_2__.RECOVERABLE_ECDSA_SIG_LENGTH_BYTES + 1);\n        return transaction.serialize().byteLength + totalSignatureLength;\n    }\n    else {\n        return transaction.serialize().byteLength;\n    }\n}\nasync function estimateTransactionFeeWithFallback(transaction, network) {\n    try {\n        const estimatedLen = estimateTransactionByteLength(transaction);\n        return (await estimateTransaction(transaction.payload, estimatedLen, network))[1].fee;\n    }\n    catch (error) {\n        if (error instanceof _errors__WEBPACK_IMPORTED_MODULE_5__.NoEstimateAvailableError) {\n            return await estimateTransferUnsafe(transaction, network);\n        }\n        throw error;\n    }\n}\n//# sourceMappingURL=builders.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tzL3RyYW5zYWN0aW9ucy9kaXN0L2VzbS9idWlsZGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxRTtBQUN5QjtBQUN4RDtBQUN3RztBQUN2RjtBQUNtSTtBQUNwSTtBQUNGO0FBQ3lGO0FBQ1o7QUFDVjtBQUM3QjtBQUM3QztBQUNLO0FBQ1g7QUFDc0M7QUFDdEU7QUFDUCwyQkFBMkIsMERBQWEsa0NBQWtDLDBEQUFhO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsZ0JBQWdCLElBQUksb0JBQW9CLHVCQUF1QixLQUFLLGdDQUFnQyxJQUFJO0FBQ2xLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDRDQUE0QyxtREFBVztBQUN2RCx5RUFBeUUsbURBQVcsQ0FBQyxtREFBVyxpQkFBaUIsOEJBQThCLG1EQUFXLGtDQUFrQztBQUM1TDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDBEQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsZ0JBQWdCLElBQUksb0JBQW9CLHVCQUF1QixLQUFLLGdDQUFnQyxJQUFJO0FBQzlLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLG1CQUFtQixvQ0FBb0M7QUFDdkQ7QUFDQSxpQ0FBaUMsMERBQVUsQ0FBQywwREFBZ0I7QUFDNUQsaUNBQWlDLDhCQUE4QixJQUFJO0FBQ25FLFNBQVM7QUFDVDtBQUNBLDJCQUEyQiwwREFBYSxrQ0FBa0MsMERBQWE7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFD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QUFDQTtBQUNBLHlCQUF5QixxREFBYTtBQUN0QztBQUNBO0FBQ0EsOERBQThELGtCQUFrQixLQUFLLE1BQU07QUFDM0Y7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsdURBQWU7QUFDL0Msd0RBQXdELDBEQUFrQjtBQUMxRSxrQkFBa0IsMERBQWE7QUFDL0Isa0JBQWtCLDBEQUFhO0FBQy9CO0FBQ0E7QUFDQSxvQkFBb0IsMERBQWE7QUFDakMsMEJBQTBCLHlEQUFpQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbURBQVc7QUFDNUIsaUJBQWlCLG1EQUFXO0FBQzVCLGlCQUFpQixtREFBVztBQUM1QixpQkFBaUIsbURBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RkFBNkYsbURBQVcsMENBQTBDO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsMERBQWtCO0FBQ3JFLGNBQWMsc0RBQWM7QUFDNUIsY0FBYyxzREFBYztBQUM1Qiw4QkFBOEIsMERBQWtCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxnRkFBZ0MsaUNBQWlDLHlEQUFpQjtBQUN2SDtBQUNBLG9CQUFvQiw4REFBc0I7QUFDMUMsbUJBQW1CLHVEQUFpQjtBQUNwQztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsK0JBQStCLHVEQUFlLGdCQUFnQix1REFBZTtBQUM3RTtBQUNBO0FBQ0E7QUFDQSw0R0FBNEcseURBQWlCO0FBQzdIO0FBQ0EsYUFBYSwwRUFBa0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZEQUF3QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BzdGFja3MvdHJhbnNhY3Rpb25zL2Rpc3QvZXNtL2J1aWxkZXJzLmpzPzM5NjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnl0ZXNUb0hleCwgaGV4VG9CeXRlcywgaW50VG9CaWdJbnQgfSBmcm9tICdAc3RhY2tzL2NvbW1vbic7XG5pbXBvcnQgeyBTdGFja3NOZXR3b3JrLCBTdGFja3NNYWlubmV0LCBTdGFja3NUZXN0bmV0LCBjcmVhdGVGZXRjaEZuLCB9IGZyb20gJ0BzdGFja3MvbmV0d29yayc7XG5pbXBvcnQgeyBjMzJhZGRyZXNzIH0gZnJvbSAnYzMyY2hlY2snO1xuaW1wb3J0IHsgY3JlYXRlTXVsdGlTaWdTcGVuZGluZ0NvbmRpdGlvbiwgY3JlYXRlU2luZ2xlU2lnU3BlbmRpbmdDb25kaXRpb24sIGNyZWF0ZVNwb25zb3JlZEF1dGgsIGNyZWF0ZVN0YW5kYXJkQXV0aCwgfSBmcm9tICcuL2F1dGhvcml6YXRpb24nO1xuaW1wb3J0IHsgZGVzZXJpYWxpemVDViwgc2VyaWFsaXplQ1YgfSBmcm9tICcuL2NsYXJpdHknO1xuaW1wb3J0IHsgQWRkcmVzc0hhc2hNb2RlLCBBZGRyZXNzVmVyc2lvbiwgUGF5bG9hZFR5cGUsIFBvc3RDb25kaXRpb25Nb2RlLCBUcmFuc2FjdGlvblZlcnNpb24sIFJFQ09WRVJBQkxFX0VDRFNBX1NJR19MRU5HVEhfQllURVMsIFN0YWNrc01lc3NhZ2VUeXBlLCBDbGFyaXR5VmVyc2lvbiwgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyB2YWxpZGF0ZUNvbnRyYWN0Q2FsbCB9IGZyb20gJy4vY29udHJhY3QtYWJpJztcbmltcG9ydCB7IE5vRXN0aW1hdGVBdmFpbGFibGVFcnJvciB9IGZyb20gJy4vZXJyb3JzJztcbmltcG9ydCB7IGNyZWF0ZVN0YWNrc1ByaXZhdGVLZXksIGdldFB1YmxpY0tleSwgcHViS2V5ZnJvbVByaXZLZXksIHB1YmxpY0tleUZyb21CeXRlcywgcHVibGljS2V5VG9BZGRyZXNzLCBwdWJsaWNLZXlUb1N0cmluZywgfSBmcm9tICcuL2tleXMnO1xuaW1wb3J0IHsgY3JlYXRlQ29udHJhY3RDYWxsUGF5bG9hZCwgY3JlYXRlU21hcnRDb250cmFjdFBheWxvYWQsIGNyZWF0ZVRva2VuVHJhbnNmZXJQYXlsb2FkLCBzZXJpYWxpemVQYXlsb2FkLCB9IGZyb20gJy4vcGF5bG9hZCc7XG5pbXBvcnQgeyBjcmVhdGVGdW5naWJsZVBvc3RDb25kaXRpb24sIGNyZWF0ZU5vbkZ1bmdpYmxlUG9zdENvbmRpdGlvbiwgY3JlYXRlU1RYUG9zdENvbmRpdGlvbiwgfSBmcm9tICcuL3Bvc3Rjb25kaXRpb24nO1xuaW1wb3J0IHsgY3JlYXRlQ29udHJhY3RQcmluY2lwYWwsIGNyZWF0ZVN0YW5kYXJkUHJpbmNpcGFsLCB9IGZyb20gJy4vcG9zdGNvbmRpdGlvbi10eXBlcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvblNpZ25lciB9IGZyb20gJy4vc2lnbmVyJztcbmltcG9ydCB7IFN0YWNrc1RyYW5zYWN0aW9uIH0gZnJvbSAnLi90cmFuc2FjdGlvbic7XG5pbXBvcnQgeyBjcmVhdGVMUExpc3QgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGN2VG9IZXgsIG9taXQsIHBhcnNlUmVhZE9ubHlSZXNwb25zZSwgdmFsaWRhdGVUeElkIH0gZnJvbSAnLi91dGlscyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Tm9uY2UoYWRkcmVzcywgbmV0d29yaykge1xuICAgIGNvbnN0IGRlcml2ZWROZXR3b3JrID0gU3RhY2tzTmV0d29yay5mcm9tTmFtZU9yTmV0d29yayhuZXR3b3JrID8/IG5ldyBTdGFja3NNYWlubmV0KCkpO1xuICAgIGNvbnN0IHVybCA9IGRlcml2ZWROZXR3b3JrLmdldEFjY291bnRBcGlVcmwoYWRkcmVzcyk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkZXJpdmVkTmV0d29yay5mZXRjaEZuKHVybCk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBsZXQgbXNnID0gJyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtc2cgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7IH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBmZXRjaGluZyBub25jZS4gUmVzcG9uc2UgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LiBBdHRlbXB0ZWQgdG8gZmV0Y2ggJHt1cmx9IGFuZCBmYWlsZWQgd2l0aCB0aGUgbWVzc2FnZTogXCIke21zZ31cImApO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZVRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXNwb25zZVRleHQpO1xuICAgIHJldHVybiBCaWdJbnQocmVzdWx0Lm5vbmNlKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlc3RpbWF0ZVRyYW5zZmVyKHRyYW5zYWN0aW9uLCBuZXR3b3JrKSB7XG4gICAgaWYgKHRyYW5zYWN0aW9uLnBheWxvYWQucGF5bG9hZFR5cGUgIT09IFBheWxvYWRUeXBlLlRva2VuVHJhbnNmZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcmFuc2FjdGlvbiBmZWUgZXN0aW1hdGlvbiBvbmx5IHBvc3NpYmxlIHdpdGggJHtQYXlsb2FkVHlwZVtQYXlsb2FkVHlwZS5Ub2tlblRyYW5zZmVyXX0gdHJhbnNhY3Rpb25zLiBJbnZva2VkIHdpdGg6ICR7UGF5bG9hZFR5cGVbdHJhbnNhY3Rpb24ucGF5bG9hZC5wYXlsb2FkVHlwZV19YCk7XG4gICAgfVxuICAgIHJldHVybiBlc3RpbWF0ZVRyYW5zZmVyVW5zYWZlKHRyYW5zYWN0aW9uLCBuZXR3b3JrKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlc3RpbWF0ZVRyYW5zZmVyVW5zYWZlKHRyYW5zYWN0aW9uLCBuZXR3b3JrKSB7XG4gICAgY29uc3QgcmVxdWVzdEhlYWRlcnMgPSB7XG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL3RleHQnLFxuICAgIH07XG4gICAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiByZXF1ZXN0SGVhZGVycyxcbiAgICB9O1xuICAgIGNvbnN0IGRlcml2ZWROZXR3b3JrID0gU3RhY2tzTmV0d29yay5mcm9tTmFtZU9yTmV0d29yayhuZXR3b3JrID8/IGRlcml2ZU5ldHdvcmsodHJhbnNhY3Rpb24pKTtcbiAgICBjb25zdCB1cmwgPSBkZXJpdmVkTmV0d29yay5nZXRUcmFuc2ZlckZlZUVzdGltYXRlQXBpVXJsKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkZXJpdmVkTmV0d29yay5mZXRjaEZuKHVybCwgZmV0Y2hPcHRpb25zKTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGxldCBtc2cgPSAnJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG1zZyA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHsgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGVzdGltYXRpbmcgdHJhbnNhY3Rpb24gZmVlLiBSZXNwb25zZSAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0uIEF0dGVtcHRlZCB0byBmZXRjaCAke3VybH0gYW5kIGZhaWxlZCB3aXRoIHRoZSBtZXNzYWdlOiBcIiR7bXNnfVwiYCk7XG4gICAgfVxuICAgIGNvbnN0IGZlZVJhdGVSZXN1bHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgY29uc3QgdHhCeXRlcyA9IEJpZ0ludCh0cmFuc2FjdGlvbi5zZXJpYWxpemUoKS5ieXRlTGVuZ3RoKTtcbiAgICBjb25zdCBmZWVSYXRlID0gQmlnSW50KGZlZVJhdGVSZXN1bHQpO1xuICAgIHJldHVybiBmZWVSYXRlICogdHhCeXRlcztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlc3RpbWF0ZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uUGF5bG9hZCwgZXN0aW1hdGVkTGVuLCBuZXR3b3JrKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbl9wYXlsb2FkOiBieXRlc1RvSGV4KHNlcmlhbGl6ZVBheWxvYWQodHJhbnNhY3Rpb25QYXlsb2FkKSksXG4gICAgICAgICAgICAuLi4oZXN0aW1hdGVkTGVuID8geyBlc3RpbWF0ZWRfbGVuOiBlc3RpbWF0ZWRMZW4gfSA6IHt9KSxcbiAgICAgICAgfSksXG4gICAgfTtcbiAgICBjb25zdCBkZXJpdmVkTmV0d29yayA9IFN0YWNrc05ldHdvcmsuZnJvbU5hbWVPck5ldHdvcmsobmV0d29yayA/PyBuZXcgU3RhY2tzTWFpbm5ldCgpKTtcbiAgICBjb25zdCB1cmwgPSBkZXJpdmVkTmV0d29yay5nZXRUcmFuc2FjdGlvbkZlZUVzdGltYXRlQXBpVXJsKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkZXJpdmVkTmV0d29yay5mZXRjaEZuKHVybCwgb3B0aW9ucyk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLnRoZW4oc3RyID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYm9keT8ucmVhc29uID09PSAnTm9Fc3RpbWF0ZUF2YWlsYWJsZScgfHxcbiAgICAgICAgICAgICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycgJiYgYm9keS5pbmNsdWRlcygnTm9Fc3RpbWF0ZUF2YWlsYWJsZScpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vRXN0aW1hdGVBdmFpbGFibGVFcnJvcihib2R5Py5yZWFzb25fZGF0YT8ubWVzc2FnZSA/PyAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBlc3RpbWF0aW5nIHRyYW5zYWN0aW9uIGZlZS4gUmVzcG9uc2UgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LiBBdHRlbXB0ZWQgdG8gZmV0Y2ggJHt1cmx9IGFuZCBmYWlsZWQgd2l0aCB0aGUgbWVzc2FnZTogXCIke2JvZHl9XCJgKTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gZGF0YS5lc3RpbWF0aW9ucztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBicm9hZGNhc3RUcmFuc2FjdGlvbih0cmFuc2FjdGlvbiwgbmV0d29yaywgYXR0YWNobWVudCkge1xuICAgIGNvbnN0IHJhd1R4ID0gdHJhbnNhY3Rpb24uc2VyaWFsaXplKCk7XG4gICAgY29uc3QgZGVyaXZlZE5ldHdvcmsgPSBTdGFja3NOZXR3b3JrLmZyb21OYW1lT3JOZXR3b3JrKG5ldHdvcmsgPz8gZGVyaXZlTmV0d29yayh0cmFuc2FjdGlvbikpO1xuICAgIGNvbnN0IHVybCA9IGRlcml2ZWROZXR3b3JrLmdldEJyb2FkY2FzdEFwaVVybCgpO1xuICAgIHJldHVybiBicm9hZGNhc3RSYXdUcmFuc2FjdGlvbihyYXdUeCwgdXJsLCBhdHRhY2htZW50LCBkZXJpdmVkTmV0d29yay5mZXRjaEZuKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBicm9hZGNhc3RSYXdUcmFuc2FjdGlvbihyYXdUeCwgdXJsLCBhdHRhY2htZW50LCBmZXRjaEZuID0gY3JlYXRlRmV0Y2hGbigpKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6IGF0dGFjaG1lbnQgPyAnYXBwbGljYXRpb24vanNvbicgOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyB9LFxuICAgICAgICBib2R5OiBhdHRhY2htZW50XG4gICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB0eDogYnl0ZXNUb0hleChyYXdUeCksXG4gICAgICAgICAgICAgICAgYXR0YWNobWVudDogYnl0ZXNUb0hleChhdHRhY2htZW50KSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IHJhd1R4LFxuICAgIH07XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEZuKHVybCwgb3B0aW9ucyk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgRmFpbGVkIHRvIGJyb2FkY2FzdCB0cmFuc2FjdGlvbjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICBjb25zdCB0eGlkID0gdGV4dC5yZXBsYWNlKC9bXCJdKy9nLCAnJyk7XG4gICAgaWYgKCF2YWxpZGF0ZVR4SWQodHhpZCkpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcih0ZXh0KTtcbiAgICByZXR1cm4geyB0eGlkIH07XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWJpKGFkZHJlc3MsIGNvbnRyYWN0TmFtZSwgbmV0d29yaykge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgfTtcbiAgICBjb25zdCBkZXJpdmVkTmV0d29yayA9IFN0YWNrc05ldHdvcmsuZnJvbU5hbWVPck5ldHdvcmsobmV0d29yayk7XG4gICAgY29uc3QgdXJsID0gZGVyaXZlZE5ldHdvcmsuZ2V0QWJpQXBpVXJsKGFkZHJlc3MsIGNvbnRyYWN0TmFtZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkZXJpdmVkTmV0d29yay5mZXRjaEZuKHVybCwgb3B0aW9ucyk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBtc2cgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJycpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGZldGNoaW5nIGNvbnRyYWN0IEFCSSBmb3IgY29udHJhY3QgXCIke2NvbnRyYWN0TmFtZX1cIiBhdCBhZGRyZXNzICR7YWRkcmVzc30uIFJlc3BvbnNlICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fS4gQXR0ZW1wdGVkIHRvIGZldGNoICR7dXJsfSBhbmQgZmFpbGVkIHdpdGggdGhlIG1lc3NhZ2U6IFwiJHttc2d9XCJgKTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbn1cbmZ1bmN0aW9uIGRlcml2ZU5ldHdvcmsodHJhbnNhY3Rpb24pIHtcbiAgICBzd2l0Y2ggKHRyYW5zYWN0aW9uLnZlcnNpb24pIHtcbiAgICAgICAgY2FzZSBUcmFuc2FjdGlvblZlcnNpb24uTWFpbm5ldDpcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RhY2tzTWFpbm5ldCgpO1xuICAgICAgICBjYXNlIFRyYW5zYWN0aW9uVmVyc2lvbi5UZXN0bmV0OlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdGFja3NUZXN0bmV0KCk7XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1ha2VVbnNpZ25lZFNUWFRva2VuVHJhbnNmZXIodHhPcHRpb25zKSB7XG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgIGZlZTogQmlnSW50KDApLFxuICAgICAgICBub25jZTogQmlnSW50KDApLFxuICAgICAgICBuZXR3b3JrOiBuZXcgU3RhY2tzTWFpbm5ldCgpLFxuICAgICAgICBtZW1vOiAnJyxcbiAgICAgICAgc3BvbnNvcmVkOiBmYWxzZSxcbiAgICB9O1xuICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCB0eE9wdGlvbnMpO1xuICAgIGNvbnN0IHBheWxvYWQgPSBjcmVhdGVUb2tlblRyYW5zZmVyUGF5bG9hZChvcHRpb25zLnJlY2lwaWVudCwgb3B0aW9ucy5hbW91bnQsIG9wdGlvbnMubWVtbyk7XG4gICAgbGV0IGF1dGhvcml6YXRpb24gPSBudWxsO1xuICAgIGxldCBzcGVuZGluZ0NvbmRpdGlvbiA9IG51bGw7XG4gICAgaWYgKCdwdWJsaWNLZXknIGluIG9wdGlvbnMpIHtcbiAgICAgICAgc3BlbmRpbmdDb25kaXRpb24gPSBjcmVhdGVTaW5nbGVTaWdTcGVuZGluZ0NvbmRpdGlvbihBZGRyZXNzSGFzaE1vZGUuU2VyaWFsaXplUDJQS0gsIG9wdGlvbnMucHVibGljS2V5LCBvcHRpb25zLm5vbmNlLCBvcHRpb25zLmZlZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzcGVuZGluZ0NvbmRpdGlvbiA9IGNyZWF0ZU11bHRpU2lnU3BlbmRpbmdDb25kaXRpb24oQWRkcmVzc0hhc2hNb2RlLlNlcmlhbGl6ZVAyU0gsIG9wdGlvbnMubnVtU2lnbmF0dXJlcywgb3B0aW9ucy5wdWJsaWNLZXlzLCBvcHRpb25zLm5vbmNlLCBvcHRpb25zLmZlZSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNwb25zb3JlZCkge1xuICAgICAgICBhdXRob3JpemF0aW9uID0gY3JlYXRlU3BvbnNvcmVkQXV0aChzcGVuZGluZ0NvbmRpdGlvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhdXRob3JpemF0aW9uID0gY3JlYXRlU3RhbmRhcmRBdXRoKHNwZW5kaW5nQ29uZGl0aW9uKTtcbiAgICB9XG4gICAgY29uc3QgbmV0d29yayA9IFN0YWNrc05ldHdvcmsuZnJvbU5hbWVPck5ldHdvcmsob3B0aW9ucy5uZXR3b3JrKTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IG5ldyBTdGFja3NUcmFuc2FjdGlvbihuZXR3b3JrLnZlcnNpb24sIGF1dGhvcml6YXRpb24sIHBheWxvYWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvcHRpb25zLmFuY2hvck1vZGUsIG5ldHdvcmsuY2hhaW5JZCk7XG4gICAgaWYgKHR4T3B0aW9ucy5mZWUgPT09IHVuZGVmaW5lZCB8fCB0eE9wdGlvbnMuZmVlID09PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGZlZSA9IGF3YWl0IGVzdGltYXRlVHJhbnNhY3Rpb25GZWVXaXRoRmFsbGJhY2sodHJhbnNhY3Rpb24sIG5ldHdvcmspO1xuICAgICAgICB0cmFuc2FjdGlvbi5zZXRGZWUoZmVlKTtcbiAgICB9XG4gICAgaWYgKHR4T3B0aW9ucy5ub25jZSA9PT0gdW5kZWZpbmVkIHx8IHR4T3B0aW9ucy5ub25jZSA9PT0gbnVsbCkge1xuICAgICAgICBjb25zdCBhZGRyZXNzVmVyc2lvbiA9IG9wdGlvbnMubmV0d29yay52ZXJzaW9uID09PSBUcmFuc2FjdGlvblZlcnNpb24uTWFpbm5ldFxuICAgICAgICAgICAgPyBBZGRyZXNzVmVyc2lvbi5NYWlubmV0U2luZ2xlU2lnXG4gICAgICAgICAgICA6IEFkZHJlc3NWZXJzaW9uLlRlc3RuZXRTaW5nbGVTaWc7XG4gICAgICAgIGNvbnN0IHNlbmRlckFkZHJlc3MgPSBjMzJhZGRyZXNzKGFkZHJlc3NWZXJzaW9uLCB0cmFuc2FjdGlvbi5hdXRoLnNwZW5kaW5nQ29uZGl0aW9uLnNpZ25lcik7XG4gICAgICAgIGNvbnN0IHR4Tm9uY2UgPSBhd2FpdCBnZXROb25jZShzZW5kZXJBZGRyZXNzLCBvcHRpb25zLm5ldHdvcmspO1xuICAgICAgICB0cmFuc2FjdGlvbi5zZXROb25jZSh0eE5vbmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1ha2VTVFhUb2tlblRyYW5zZmVyKHR4T3B0aW9ucykge1xuICAgIGlmICgnc2VuZGVyS2V5JyBpbiB0eE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHVibGljS2V5ID0gcHVibGljS2V5VG9TdHJpbmcoZ2V0UHVibGljS2V5KGNyZWF0ZVN0YWNrc1ByaXZhdGVLZXkodHhPcHRpb25zLnNlbmRlcktleSkpKTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG9taXQodHhPcHRpb25zLCAnc2VuZGVyS2V5Jyk7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgbWFrZVVuc2lnbmVkU1RYVG9rZW5UcmFuc2Zlcih7IHB1YmxpY0tleSwgLi4ub3B0aW9ucyB9KTtcbiAgICAgICAgY29uc3QgcHJpdktleSA9IGNyZWF0ZVN0YWNrc1ByaXZhdGVLZXkodHhPcHRpb25zLnNlbmRlcktleSk7XG4gICAgICAgIGNvbnN0IHNpZ25lciA9IG5ldyBUcmFuc2FjdGlvblNpZ25lcih0cmFuc2FjdGlvbik7XG4gICAgICAgIHNpZ25lci5zaWduT3JpZ2luKHByaXZLZXkpO1xuICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gb21pdCh0eE9wdGlvbnMsICdzaWduZXJLZXlzJyk7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgbWFrZVVuc2lnbmVkU1RYVG9rZW5UcmFuc2ZlcihvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgc2lnbmVyID0gbmV3IFRyYW5zYWN0aW9uU2lnbmVyKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgbGV0IHB1YktleXMgPSB0eE9wdGlvbnMucHVibGljS2V5cztcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdHhPcHRpb25zLnNpZ25lcktleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHB1YktleSA9IHB1YktleWZyb21Qcml2S2V5KGtleSk7XG4gICAgICAgICAgICBwdWJLZXlzID0gcHViS2V5cy5maWx0ZXIocGsgPT4gcGsgIT09IGJ5dGVzVG9IZXgocHViS2V5LmRhdGEpKTtcbiAgICAgICAgICAgIHNpZ25lci5zaWduT3JpZ2luKGNyZWF0ZVN0YWNrc1ByaXZhdGVLZXkoa2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcHViS2V5cykge1xuICAgICAgICAgICAgc2lnbmVyLmFwcGVuZE9yaWdpbihwdWJsaWNLZXlGcm9tQnl0ZXMoaGV4VG9CeXRlcyhrZXkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlc3RpbWF0ZUNvbnRyYWN0RGVwbG95KHRyYW5zYWN0aW9uLCBuZXR3b3JrKSB7XG4gICAgaWYgKHRyYW5zYWN0aW9uLnBheWxvYWQucGF5bG9hZFR5cGUgIT09IFBheWxvYWRUeXBlLlNtYXJ0Q29udHJhY3QgJiZcbiAgICAgICAgdHJhbnNhY3Rpb24ucGF5bG9hZC5wYXlsb2FkVHlwZSAhPT0gUGF5bG9hZFR5cGUuVmVyc2lvbmVkU21hcnRDb250cmFjdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbnRyYWN0IGRlcGxveSBmZWUgZXN0aW1hdGlvbiBvbmx5IHBvc3NpYmxlIHdpdGggJHtQYXlsb2FkVHlwZVtQYXlsb2FkVHlwZS5TbWFydENvbnRyYWN0XX0gdHJhbnNhY3Rpb25zLiBJbnZva2VkIHdpdGg6ICR7UGF5bG9hZFR5cGVbdHJhbnNhY3Rpb24ucGF5bG9hZC5wYXlsb2FkVHlwZV19YCk7XG4gICAgfVxuICAgIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0ge1xuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi90ZXh0JyxcbiAgICB9O1xuICAgIGNvbnN0IGZldGNoT3B0aW9ucyA9IHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogcmVxdWVzdEhlYWRlcnMsXG4gICAgfTtcbiAgICBjb25zdCBkZXJpdmVkTmV0d29yayA9IFN0YWNrc05ldHdvcmsuZnJvbU5hbWVPck5ldHdvcmsobmV0d29yayA/PyBkZXJpdmVOZXR3b3JrKHRyYW5zYWN0aW9uKSk7XG4gICAgY29uc3QgdXJsID0gZGVyaXZlZE5ldHdvcmsuZ2V0VHJhbnNmZXJGZWVFc3RpbWF0ZUFwaVVybCgpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGVyaXZlZE5ldHdvcmsuZmV0Y2hGbih1cmwsIGZldGNoT3B0aW9ucyk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBtc2cgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJycpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGVzdGltYXRpbmcgY29udHJhY3QgZGVwbG95IGZlZS4gUmVzcG9uc2UgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LiBBdHRlbXB0ZWQgdG8gZmV0Y2ggJHt1cmx9IGFuZCBmYWlsZWQgd2l0aCB0aGUgbWVzc2FnZTogXCIke21zZ31cImApO1xuICAgIH1cbiAgICBjb25zdCBmZWVSYXRlUmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgIGNvbnN0IHR4Qnl0ZXMgPSBpbnRUb0JpZ0ludCh0cmFuc2FjdGlvbi5zZXJpYWxpemUoKS5ieXRlTGVuZ3RoLCBmYWxzZSk7XG4gICAgY29uc3QgZmVlUmF0ZSA9IGludFRvQmlnSW50KGZlZVJhdGVSZXN1bHQsIGZhbHNlKTtcbiAgICByZXR1cm4gZmVlUmF0ZSAqIHR4Qnl0ZXM7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFrZUNvbnRyYWN0RGVwbG95KHR4T3B0aW9ucykge1xuICAgIGlmICgnc2VuZGVyS2V5JyBpbiB0eE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHVibGljS2V5ID0gcHVibGljS2V5VG9TdHJpbmcoZ2V0UHVibGljS2V5KGNyZWF0ZVN0YWNrc1ByaXZhdGVLZXkodHhPcHRpb25zLnNlbmRlcktleSkpKTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG9taXQodHhPcHRpb25zLCAnc2VuZGVyS2V5Jyk7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgbWFrZVVuc2lnbmVkQ29udHJhY3REZXBsb3koeyBwdWJsaWNLZXksIC4uLm9wdGlvbnMgfSk7XG4gICAgICAgIGNvbnN0IHByaXZLZXkgPSBjcmVhdGVTdGFja3NQcml2YXRlS2V5KHR4T3B0aW9ucy5zZW5kZXJLZXkpO1xuICAgICAgICBjb25zdCBzaWduZXIgPSBuZXcgVHJhbnNhY3Rpb25TaWduZXIodHJhbnNhY3Rpb24pO1xuICAgICAgICBzaWduZXIuc2lnbk9yaWdpbihwcml2S2V5KTtcbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG9taXQodHhPcHRpb25zLCAnc2lnbmVyS2V5cycpO1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IG1ha2VVbnNpZ25lZENvbnRyYWN0RGVwbG95KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzaWduZXIgPSBuZXcgVHJhbnNhY3Rpb25TaWduZXIodHJhbnNhY3Rpb24pO1xuICAgICAgICBsZXQgcHViS2V5cyA9IHR4T3B0aW9ucy5wdWJsaWNLZXlzO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0eE9wdGlvbnMuc2lnbmVyS2V5cykge1xuICAgICAgICAgICAgY29uc3QgcHViS2V5ID0gcHViS2V5ZnJvbVByaXZLZXkoa2V5KTtcbiAgICAgICAgICAgIHB1YktleXMgPSBwdWJLZXlzLmZpbHRlcihwayA9PiBwayAhPT0gYnl0ZXNUb0hleChwdWJLZXkuZGF0YSkpO1xuICAgICAgICAgICAgc2lnbmVyLnNpZ25PcmlnaW4oY3JlYXRlU3RhY2tzUHJpdmF0ZUtleShrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwdWJLZXlzKSB7XG4gICAgICAgICAgICBzaWduZXIuYXBwZW5kT3JpZ2luKHB1YmxpY0tleUZyb21CeXRlcyhoZXhUb0J5dGVzKGtleSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1ha2VVbnNpZ25lZENvbnRyYWN0RGVwbG95KHR4T3B0aW9ucykge1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICBmZWU6IEJpZ0ludCgwKSxcbiAgICAgICAgbm9uY2U6IEJpZ0ludCgwKSxcbiAgICAgICAgbmV0d29yazogbmV3IFN0YWNrc01haW5uZXQoKSxcbiAgICAgICAgcG9zdENvbmRpdGlvbk1vZGU6IFBvc3RDb25kaXRpb25Nb2RlLkRlbnksXG4gICAgICAgIHNwb25zb3JlZDogZmFsc2UsXG4gICAgICAgIGNsYXJpdHlWZXJzaW9uOiBDbGFyaXR5VmVyc2lvbi5DbGFyaXR5MixcbiAgICB9O1xuICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCB0eE9wdGlvbnMpO1xuICAgIGNvbnN0IHBheWxvYWQgPSBjcmVhdGVTbWFydENvbnRyYWN0UGF5bG9hZChvcHRpb25zLmNvbnRyYWN0TmFtZSwgb3B0aW9ucy5jb2RlQm9keSwgb3B0aW9ucy5jbGFyaXR5VmVyc2lvbik7XG4gICAgbGV0IGF1dGhvcml6YXRpb24gPSBudWxsO1xuICAgIGxldCBzcGVuZGluZ0NvbmRpdGlvbiA9IG51bGw7XG4gICAgaWYgKCdwdWJsaWNLZXknIGluIG9wdGlvbnMpIHtcbiAgICAgICAgc3BlbmRpbmdDb25kaXRpb24gPSBjcmVhdGVTaW5nbGVTaWdTcGVuZGluZ0NvbmRpdGlvbihBZGRyZXNzSGFzaE1vZGUuU2VyaWFsaXplUDJQS0gsIG9wdGlvbnMucHVibGljS2V5LCBvcHRpb25zLm5vbmNlLCBvcHRpb25zLmZlZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzcGVuZGluZ0NvbmRpdGlvbiA9IGNyZWF0ZU11bHRpU2lnU3BlbmRpbmdDb25kaXRpb24oQWRkcmVzc0hhc2hNb2RlLlNlcmlhbGl6ZVAyU0gsIG9wdGlvbnMubnVtU2lnbmF0dXJlcywgb3B0aW9ucy5wdWJsaWNLZXlzLCBvcHRpb25zLm5vbmNlLCBvcHRpb25zLmZlZSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNwb25zb3JlZCkge1xuICAgICAgICBhdXRob3JpemF0aW9uID0gY3JlYXRlU3BvbnNvcmVkQXV0aChzcGVuZGluZ0NvbmRpdGlvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhdXRob3JpemF0aW9uID0gY3JlYXRlU3RhbmRhcmRBdXRoKHNwZW5kaW5nQ29uZGl0aW9uKTtcbiAgICB9XG4gICAgY29uc3QgbmV0d29yayA9IFN0YWNrc05ldHdvcmsuZnJvbU5hbWVPck5ldHdvcmsob3B0aW9ucy5uZXR3b3JrKTtcbiAgICBjb25zdCBwb3N0Q29uZGl0aW9ucyA9IFtdO1xuICAgIGlmIChvcHRpb25zLnBvc3RDb25kaXRpb25zICYmIG9wdGlvbnMucG9zdENvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBvcHRpb25zLnBvc3RDb25kaXRpb25zLmZvckVhY2gocG9zdENvbmRpdGlvbiA9PiB7XG4gICAgICAgICAgICBwb3N0Q29uZGl0aW9ucy5wdXNoKHBvc3RDb25kaXRpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbHBQb3N0Q29uZGl0aW9ucyA9IGNyZWF0ZUxQTGlzdChwb3N0Q29uZGl0aW9ucyk7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBuZXcgU3RhY2tzVHJhbnNhY3Rpb24obmV0d29yay52ZXJzaW9uLCBhdXRob3JpemF0aW9uLCBwYXlsb2FkLCBscFBvc3RDb25kaXRpb25zLCBvcHRpb25zLnBvc3RDb25kaXRpb25Nb2RlLCBvcHRpb25zLmFuY2hvck1vZGUsIG5ldHdvcmsuY2hhaW5JZCk7XG4gICAgaWYgKHR4T3B0aW9ucy5mZWUgPT09IHVuZGVmaW5lZCB8fCB0eE9wdGlvbnMuZmVlID09PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGZlZSA9IGF3YWl0IGVzdGltYXRlVHJhbnNhY3Rpb25GZWVXaXRoRmFsbGJhY2sodHJhbnNhY3Rpb24sIG5ldHdvcmspO1xuICAgICAgICB0cmFuc2FjdGlvbi5zZXRGZWUoZmVlKTtcbiAgICB9XG4gICAgaWYgKHR4T3B0aW9ucy5ub25jZSA9PT0gdW5kZWZpbmVkIHx8IHR4T3B0aW9ucy5ub25jZSA9PT0gbnVsbCkge1xuICAgICAgICBjb25zdCBhZGRyZXNzVmVyc2lvbiA9IG9wdGlvbnMubmV0d29yay52ZXJzaW9uID09PSBUcmFuc2FjdGlvblZlcnNpb24uTWFpbm5ldFxuICAgICAgICAgICAgPyBBZGRyZXNzVmVyc2lvbi5NYWlubmV0U2luZ2xlU2lnXG4gICAgICAgICAgICA6IEFkZHJlc3NWZXJzaW9uLlRlc3RuZXRTaW5nbGVTaWc7XG4gICAgICAgIGNvbnN0IHNlbmRlckFkZHJlc3MgPSBjMzJhZGRyZXNzKGFkZHJlc3NWZXJzaW9uLCB0cmFuc2FjdGlvbi5hdXRoLnNwZW5kaW5nQ29uZGl0aW9uLnNpZ25lcik7XG4gICAgICAgIGNvbnN0IHR4Tm9uY2UgPSBhd2FpdCBnZXROb25jZShzZW5kZXJBZGRyZXNzLCBvcHRpb25zLm5ldHdvcmspO1xuICAgICAgICB0cmFuc2FjdGlvbi5zZXROb25jZSh0eE5vbmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVzdGltYXRlQ29udHJhY3RGdW5jdGlvbkNhbGwodHJhbnNhY3Rpb24sIG5ldHdvcmspIHtcbiAgICBpZiAodHJhbnNhY3Rpb24ucGF5bG9hZC5wYXlsb2FkVHlwZSAhPT0gUGF5bG9hZFR5cGUuQ29udHJhY3RDYWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udHJhY3QgY2FsbCBmZWUgZXN0aW1hdGlvbiBvbmx5IHBvc3NpYmxlIHdpdGggJHtQYXlsb2FkVHlwZVtQYXlsb2FkVHlwZS5Db250cmFjdENhbGxdfSB0cmFuc2FjdGlvbnMuIEludm9rZWQgd2l0aDogJHtQYXlsb2FkVHlwZVt0cmFuc2FjdGlvbi5wYXlsb2FkLnBheWxvYWRUeXBlXX1gKTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdEhlYWRlcnMgPSB7XG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL3RleHQnLFxuICAgIH07XG4gICAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiByZXF1ZXN0SGVhZGVycyxcbiAgICB9O1xuICAgIGNvbnN0IGRlcml2ZWROZXR3b3JrID0gU3RhY2tzTmV0d29yay5mcm9tTmFtZU9yTmV0d29yayhuZXR3b3JrID8/IGRlcml2ZU5ldHdvcmsodHJhbnNhY3Rpb24pKTtcbiAgICBjb25zdCB1cmwgPSBkZXJpdmVkTmV0d29yay5nZXRUcmFuc2ZlckZlZUVzdGltYXRlQXBpVXJsKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkZXJpdmVkTmV0d29yay5mZXRjaEZuKHVybCwgZmV0Y2hPcHRpb25zKTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZXN0aW1hdGluZyBjb250cmFjdCBjYWxsIGZlZS4gUmVzcG9uc2UgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LiBBdHRlbXB0ZWQgdG8gZmV0Y2ggJHt1cmx9IGFuZCBmYWlsZWQgd2l0aCB0aGUgbWVzc2FnZTogXCIke21zZ31cImApO1xuICAgIH1cbiAgICBjb25zdCBmZWVSYXRlUmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgIGNvbnN0IHR4Qnl0ZXMgPSBpbnRUb0JpZ0ludCh0cmFuc2FjdGlvbi5zZXJpYWxpemUoKS5ieXRlTGVuZ3RoLCBmYWxzZSk7XG4gICAgY29uc3QgZmVlUmF0ZSA9IGludFRvQmlnSW50KGZlZVJhdGVSZXN1bHQsIGZhbHNlKTtcbiAgICByZXR1cm4gZmVlUmF0ZSAqIHR4Qnl0ZXM7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFrZVVuc2lnbmVkQ29udHJhY3RDYWxsKHR4T3B0aW9ucykge1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICBmZWU6IEJpZ0ludCgwKSxcbiAgICAgICAgbm9uY2U6IEJpZ0ludCgwKSxcbiAgICAgICAgbmV0d29yazogbmV3IFN0YWNrc01haW5uZXQoKSxcbiAgICAgICAgcG9zdENvbmRpdGlvbk1vZGU6IFBvc3RDb25kaXRpb25Nb2RlLkRlbnksXG4gICAgICAgIHNwb25zb3JlZDogZmFsc2UsXG4gICAgfTtcbiAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgdHhPcHRpb25zKTtcbiAgICBjb25zdCBwYXlsb2FkID0gY3JlYXRlQ29udHJhY3RDYWxsUGF5bG9hZChvcHRpb25zLmNvbnRyYWN0QWRkcmVzcywgb3B0aW9ucy5jb250cmFjdE5hbWUsIG9wdGlvbnMuZnVuY3Rpb25OYW1lLCBvcHRpb25zLmZ1bmN0aW9uQXJncyk7XG4gICAgaWYgKG9wdGlvbnM/LnZhbGlkYXRlV2l0aEFiaSkge1xuICAgICAgICBsZXQgYWJpO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMudmFsaWRhdGVXaXRoQWJpID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zPy5uZXR3b3JrKSB7XG4gICAgICAgICAgICAgICAgYWJpID0gYXdhaXQgZ2V0QWJpKG9wdGlvbnMuY29udHJhY3RBZGRyZXNzLCBvcHRpb25zLmNvbnRyYWN0TmFtZSwgb3B0aW9ucy5uZXR3b3JrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTmV0d29yayBvcHRpb24gbXVzdCBiZSBwcm92aWRlZCBpbiBvcmRlciB0byB2YWxpZGF0ZSB3aXRoIEFCSScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWJpID0gb3B0aW9ucy52YWxpZGF0ZVdpdGhBYmk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsaWRhdGVDb250cmFjdENhbGwocGF5bG9hZCwgYWJpKTtcbiAgICB9XG4gICAgbGV0IHNwZW5kaW5nQ29uZGl0aW9uID0gbnVsbDtcbiAgICBsZXQgYXV0aG9yaXphdGlvbiA9IG51bGw7XG4gICAgaWYgKCdwdWJsaWNLZXknIGluIG9wdGlvbnMpIHtcbiAgICAgICAgc3BlbmRpbmdDb25kaXRpb24gPSBjcmVhdGVTaW5nbGVTaWdTcGVuZGluZ0NvbmRpdGlvbihBZGRyZXNzSGFzaE1vZGUuU2VyaWFsaXplUDJQS0gsIG9wdGlvbnMucHVibGljS2V5LCBvcHRpb25zLm5vbmNlLCBvcHRpb25zLmZlZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzcGVuZGluZ0NvbmRpdGlvbiA9IGNyZWF0ZU11bHRpU2lnU3BlbmRpbmdDb25kaXRpb24oQWRkcmVzc0hhc2hNb2RlLlNlcmlhbGl6ZVAyU0gsIG9wdGlvbnMubnVtU2lnbmF0dXJlcywgb3B0aW9ucy5wdWJsaWNLZXlzLCBvcHRpb25zLm5vbmNlLCBvcHRpb25zLmZlZSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNwb25zb3JlZCkge1xuICAgICAgICBhdXRob3JpemF0aW9uID0gY3JlYXRlU3BvbnNvcmVkQXV0aChzcGVuZGluZ0NvbmRpdGlvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhdXRob3JpemF0aW9uID0gY3JlYXRlU3RhbmRhcmRBdXRoKHNwZW5kaW5nQ29uZGl0aW9uKTtcbiAgICB9XG4gICAgY29uc3QgbmV0d29yayA9IFN0YWNrc05ldHdvcmsuZnJvbU5hbWVPck5ldHdvcmsob3B0aW9ucy5uZXR3b3JrKTtcbiAgICBjb25zdCBwb3N0Q29uZGl0aW9ucyA9IFtdO1xuICAgIGlmIChvcHRpb25zLnBvc3RDb25kaXRpb25zICYmIG9wdGlvbnMucG9zdENvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBvcHRpb25zLnBvc3RDb25kaXRpb25zLmZvckVhY2gocG9zdENvbmRpdGlvbiA9PiB7XG4gICAgICAgICAgICBwb3N0Q29uZGl0aW9ucy5wdXNoKHBvc3RDb25kaXRpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbHBQb3N0Q29uZGl0aW9ucyA9IGNyZWF0ZUxQTGlzdChwb3N0Q29uZGl0aW9ucyk7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBuZXcgU3RhY2tzVHJhbnNhY3Rpb24obmV0d29yay52ZXJzaW9uLCBhdXRob3JpemF0aW9uLCBwYXlsb2FkLCBscFBvc3RDb25kaXRpb25zLCBvcHRpb25zLnBvc3RDb25kaXRpb25Nb2RlLCBvcHRpb25zLmFuY2hvck1vZGUsIG5ldHdvcmsuY2hhaW5JZCk7XG4gICAgaWYgKHR4T3B0aW9ucy5mZWUgPT09IHVuZGVmaW5lZCB8fCB0eE9wdGlvbnMuZmVlID09PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGZlZSA9IGF3YWl0IGVzdGltYXRlVHJhbnNhY3Rpb25GZWVXaXRoRmFsbGJhY2sodHJhbnNhY3Rpb24sIG5ldHdvcmspO1xuICAgICAgICB0cmFuc2FjdGlvbi5zZXRGZWUoZmVlKTtcbiAgICB9XG4gICAgaWYgKHR4T3B0aW9ucy5ub25jZSA9PT0gdW5kZWZpbmVkIHx8IHR4T3B0aW9ucy5ub25jZSA9PT0gbnVsbCkge1xuICAgICAgICBjb25zdCBhZGRyZXNzVmVyc2lvbiA9IG5ldHdvcmsudmVyc2lvbiA9PT0gVHJhbnNhY3Rpb25WZXJzaW9uLk1haW5uZXRcbiAgICAgICAgICAgID8gQWRkcmVzc1ZlcnNpb24uTWFpbm5ldFNpbmdsZVNpZ1xuICAgICAgICAgICAgOiBBZGRyZXNzVmVyc2lvbi5UZXN0bmV0U2luZ2xlU2lnO1xuICAgICAgICBjb25zdCBzZW5kZXJBZGRyZXNzID0gYzMyYWRkcmVzcyhhZGRyZXNzVmVyc2lvbiwgdHJhbnNhY3Rpb24uYXV0aC5zcGVuZGluZ0NvbmRpdGlvbi5zaWduZXIpO1xuICAgICAgICBjb25zdCB0eE5vbmNlID0gYXdhaXQgZ2V0Tm9uY2Uoc2VuZGVyQWRkcmVzcywgbmV0d29yayk7XG4gICAgICAgIHRyYW5zYWN0aW9uLnNldE5vbmNlKHR4Tm9uY2UpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNhY3Rpb247XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFrZUNvbnRyYWN0Q2FsbCh0eE9wdGlvbnMpIHtcbiAgICBpZiAoJ3NlbmRlcktleScgaW4gdHhPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHB1YmxpY0tleSA9IHB1YmxpY0tleVRvU3RyaW5nKGdldFB1YmxpY0tleShjcmVhdGVTdGFja3NQcml2YXRlS2V5KHR4T3B0aW9ucy5zZW5kZXJLZXkpKSk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBvbWl0KHR4T3B0aW9ucywgJ3NlbmRlcktleScpO1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IG1ha2VVbnNpZ25lZENvbnRyYWN0Q2FsbCh7IHB1YmxpY0tleSwgLi4ub3B0aW9ucyB9KTtcbiAgICAgICAgY29uc3QgcHJpdktleSA9IGNyZWF0ZVN0YWNrc1ByaXZhdGVLZXkodHhPcHRpb25zLnNlbmRlcktleSk7XG4gICAgICAgIGNvbnN0IHNpZ25lciA9IG5ldyBUcmFuc2FjdGlvblNpZ25lcih0cmFuc2FjdGlvbik7XG4gICAgICAgIHNpZ25lci5zaWduT3JpZ2luKHByaXZLZXkpO1xuICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gb21pdCh0eE9wdGlvbnMsICdzaWduZXJLZXlzJyk7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgbWFrZVVuc2lnbmVkQ29udHJhY3RDYWxsKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzaWduZXIgPSBuZXcgVHJhbnNhY3Rpb25TaWduZXIodHJhbnNhY3Rpb24pO1xuICAgICAgICBsZXQgcHViS2V5cyA9IHR4T3B0aW9ucy5wdWJsaWNLZXlzO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0eE9wdGlvbnMuc2lnbmVyS2V5cykge1xuICAgICAgICAgICAgY29uc3QgcHViS2V5ID0gcHViS2V5ZnJvbVByaXZLZXkoa2V5KTtcbiAgICAgICAgICAgIHB1YktleXMgPSBwdWJLZXlzLmZpbHRlcihwayA9PiBwayAhPT0gYnl0ZXNUb0hleChwdWJLZXkuZGF0YSkpO1xuICAgICAgICAgICAgc2lnbmVyLnNpZ25PcmlnaW4oY3JlYXRlU3RhY2tzUHJpdmF0ZUtleShrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwdWJLZXlzKSB7XG4gICAgICAgICAgICBzaWduZXIuYXBwZW5kT3JpZ2luKHB1YmxpY0tleUZyb21CeXRlcyhoZXhUb0J5dGVzKGtleSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTdGFuZGFyZFNUWFBvc3RDb25kaXRpb24oYWRkcmVzcywgY29uZGl0aW9uQ29kZSwgYW1vdW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVNUWFBvc3RDb25kaXRpb24oY3JlYXRlU3RhbmRhcmRQcmluY2lwYWwoYWRkcmVzcyksIGNvbmRpdGlvbkNvZGUsIGFtb3VudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZUNvbnRyYWN0U1RYUG9zdENvbmRpdGlvbihhZGRyZXNzLCBjb250cmFjdE5hbWUsIGNvbmRpdGlvbkNvZGUsIGFtb3VudCkge1xuICAgIHJldHVybiBjcmVhdGVTVFhQb3N0Q29uZGl0aW9uKGNyZWF0ZUNvbnRyYWN0UHJpbmNpcGFsKGFkZHJlc3MsIGNvbnRyYWN0TmFtZSksIGNvbmRpdGlvbkNvZGUsIGFtb3VudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVN0YW5kYXJkRnVuZ2libGVQb3N0Q29uZGl0aW9uKGFkZHJlc3MsIGNvbmRpdGlvbkNvZGUsIGFtb3VudCwgYXNzZXRJbmZvKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUZ1bmdpYmxlUG9zdENvbmRpdGlvbihjcmVhdGVTdGFuZGFyZFByaW5jaXBhbChhZGRyZXNzKSwgY29uZGl0aW9uQ29kZSwgYW1vdW50LCBhc3NldEluZm8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VDb250cmFjdEZ1bmdpYmxlUG9zdENvbmRpdGlvbihhZGRyZXNzLCBjb250cmFjdE5hbWUsIGNvbmRpdGlvbkNvZGUsIGFtb3VudCwgYXNzZXRJbmZvKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUZ1bmdpYmxlUG9zdENvbmRpdGlvbihjcmVhdGVDb250cmFjdFByaW5jaXBhbChhZGRyZXNzLCBjb250cmFjdE5hbWUpLCBjb25kaXRpb25Db2RlLCBhbW91bnQsIGFzc2V0SW5mbyk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVN0YW5kYXJkTm9uRnVuZ2libGVQb3N0Q29uZGl0aW9uKGFkZHJlc3MsIGNvbmRpdGlvbkNvZGUsIGFzc2V0SW5mbywgYXNzZXRJZCkge1xuICAgIHJldHVybiBjcmVhdGVOb25GdW5naWJsZVBvc3RDb25kaXRpb24oY3JlYXRlU3RhbmRhcmRQcmluY2lwYWwoYWRkcmVzcyksIGNvbmRpdGlvbkNvZGUsIGFzc2V0SW5mbywgYXNzZXRJZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZUNvbnRyYWN0Tm9uRnVuZ2libGVQb3N0Q29uZGl0aW9uKGFkZHJlc3MsIGNvbnRyYWN0TmFtZSwgY29uZGl0aW9uQ29kZSwgYXNzZXRJbmZvLCBhc3NldElkKSB7XG4gICAgcmV0dXJuIGNyZWF0ZU5vbkZ1bmdpYmxlUG9zdENvbmRpdGlvbihjcmVhdGVDb250cmFjdFByaW5jaXBhbChhZGRyZXNzLCBjb250cmFjdE5hbWUpLCBjb25kaXRpb25Db2RlLCBhc3NldEluZm8sIGFzc2V0SWQpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxSZWFkT25seUZ1bmN0aW9uKHJlYWRPbmx5RnVuY3Rpb25PcHRpb25zKSB7XG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgIG5ldHdvcms6IG5ldyBTdGFja3NNYWlubmV0KCksXG4gICAgfTtcbiAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgcmVhZE9ubHlGdW5jdGlvbk9wdGlvbnMpO1xuICAgIGNvbnN0IHsgY29udHJhY3ROYW1lLCBjb250cmFjdEFkZHJlc3MsIGZ1bmN0aW9uTmFtZSwgZnVuY3Rpb25BcmdzLCBzZW5kZXJBZGRyZXNzIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IG5ldHdvcmsgPSBTdGFja3NOZXR3b3JrLmZyb21OYW1lT3JOZXR3b3JrKG9wdGlvbnMubmV0d29yayk7XG4gICAgY29uc3QgdXJsID0gbmV0d29yay5nZXRSZWFkT25seUZ1bmN0aW9uQ2FsbEFwaVVybChjb250cmFjdEFkZHJlc3MsIGNvbnRyYWN0TmFtZSwgZnVuY3Rpb25OYW1lKTtcbiAgICBjb25zdCBhcmdzID0gZnVuY3Rpb25BcmdzLm1hcChhcmcgPT4gY3ZUb0hleChhcmcpKTtcbiAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzZW5kZXI6IHNlbmRlckFkZHJlc3MsXG4gICAgICAgIGFyZ3VtZW50czogYXJncyxcbiAgICB9KTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG5ldHdvcmsuZmV0Y2hGbih1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBtc2cgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJycpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGNhbGxpbmcgcmVhZC1vbmx5IGZ1bmN0aW9uLiBSZXNwb25zZSAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0uIEF0dGVtcHRlZCB0byBmZXRjaCAke3VybH0gYW5kIGZhaWxlZCB3aXRoIHRoZSBtZXNzYWdlOiBcIiR7bXNnfVwiYCk7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbihyZXNwb25zZUpzb24gPT4gcGFyc2VSZWFkT25seVJlc3BvbnNlKHJlc3BvbnNlSnNvbikpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbnRyYWN0TWFwRW50cnkoZ2V0Q29udHJhY3RNYXBFbnRyeU9wdGlvbnMpIHtcbiAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgbmV0d29yazogbmV3IFN0YWNrc01haW5uZXQoKSxcbiAgICB9O1xuICAgIGNvbnN0IHsgY29udHJhY3RBZGRyZXNzLCBjb250cmFjdE5hbWUsIG1hcE5hbWUsIG1hcEtleSwgbmV0d29yayB9ID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgZ2V0Q29udHJhY3RNYXBFbnRyeU9wdGlvbnMpO1xuICAgIGNvbnN0IGRlcml2ZWROZXR3b3JrID0gU3RhY2tzTmV0d29yay5mcm9tTmFtZU9yTmV0d29yayhuZXR3b3JrKTtcbiAgICBjb25zdCB1cmwgPSBkZXJpdmVkTmV0d29yay5nZXRNYXBFbnRyeVVybChjb250cmFjdEFkZHJlc3MsIGNvbnRyYWN0TmFtZSwgbWFwTmFtZSk7XG4gICAgY29uc3Qgc2VyaWFsaXplZEtleUJ5dGVzID0gc2VyaWFsaXplQ1YobWFwS2V5KTtcbiAgICBjb25zdCBzZXJpYWxpemVkS2V5SGV4ID0gJzB4JyArIGJ5dGVzVG9IZXgoc2VyaWFsaXplZEtleUJ5dGVzKTtcbiAgICBjb25zdCBmZXRjaE9wdGlvbnMgPSB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNlcmlhbGl6ZWRLZXlIZXgpLFxuICAgIH07XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkZXJpdmVkTmV0d29yay5mZXRjaEZuKHVybCwgZmV0Y2hPcHRpb25zKTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZmV0Y2hpbmcgbWFwIGVudHJ5IGZvciBtYXAgXCIke21hcE5hbWV9XCIgaW4gY29udHJhY3QgXCIke2NvbnRyYWN0TmFtZX1cIiBhdCBhZGRyZXNzICR7Y29udHJhY3RBZGRyZXNzfSwgdXNpbmcgbWFwIGtleSBcIiR7c2VyaWFsaXplZEtleUhleH1cIi4gUmVzcG9uc2UgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LiBBdHRlbXB0ZWQgdG8gZmV0Y2ggJHt1cmx9IGFuZCBmYWlsZWQgd2l0aCB0aGUgbWVzc2FnZTogXCIke21zZ31cImApO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZUJvZHkgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgY29uc3QgcmVzcG9uc2VKc29uID0gSlNPTi5wYXJzZShyZXNwb25zZUJvZHkpO1xuICAgIGlmICghcmVzcG9uc2VKc29uLmRhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBmZXRjaGluZyBtYXAgZW50cnkgZm9yIG1hcCBcIiR7bWFwTmFtZX1cIiBpbiBjb250cmFjdCBcIiR7Y29udHJhY3ROYW1lfVwiIGF0IGFkZHJlc3MgJHtjb250cmFjdEFkZHJlc3N9LCB1c2luZyBtYXAga2V5IFwiJHtzZXJpYWxpemVkS2V5SGV4fVwiLiBSZXNwb25zZSAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0uIEF0dGVtcHRlZCB0byBmZXRjaCAke3VybH0gYW5kIGZhaWxlZCB3aXRoIHRoZSByZXNwb25zZTogXCIke3Jlc3BvbnNlQm9keX1cImApO1xuICAgIH1cbiAgICBsZXQgZGVzZXJpYWxpemVkQ3Y7XG4gICAgdHJ5IHtcbiAgICAgICAgZGVzZXJpYWxpemVkQ3YgPSBkZXNlcmlhbGl6ZUNWKHJlc3BvbnNlSnNvbi5kYXRhKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZGVzZXJpYWxpemluZyBDbGFyaXR5IHZhbHVlIFwiJHtyZXNwb25zZUpzb24uZGF0YX1cIjogJHtlcnJvcn1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplZEN2O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNwb25zb3JUcmFuc2FjdGlvbihzcG9uc29yT3B0aW9ucykge1xuICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICBmZWU6IDAsXG4gICAgICAgIHNwb25zb3JOb25jZTogMCxcbiAgICAgICAgc3BvbnNvckFkZHJlc3NIYXNobW9kZTogQWRkcmVzc0hhc2hNb2RlLlNlcmlhbGl6ZVAyUEtILFxuICAgICAgICBuZXR3b3JrOiBzcG9uc29yT3B0aW9ucy50cmFuc2FjdGlvbi52ZXJzaW9uID09PSBUcmFuc2FjdGlvblZlcnNpb24uTWFpbm5ldFxuICAgICAgICAgICAgPyBuZXcgU3RhY2tzTWFpbm5ldCgpXG4gICAgICAgICAgICA6IG5ldyBTdGFja3NUZXN0bmV0KCksXG4gICAgfTtcbiAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgc3BvbnNvck9wdGlvbnMpO1xuICAgIGNvbnN0IG5ldHdvcmsgPSBTdGFja3NOZXR3b3JrLmZyb21OYW1lT3JOZXR3b3JrKG9wdGlvbnMubmV0d29yayk7XG4gICAgY29uc3Qgc3BvbnNvclB1YktleSA9IHB1YktleWZyb21Qcml2S2V5KG9wdGlvbnMuc3BvbnNvclByaXZhdGVLZXkpO1xuICAgIGlmIChzcG9uc29yT3B0aW9ucy5mZWUgPT09IHVuZGVmaW5lZCB8fCBzcG9uc29yT3B0aW9ucy5mZWUgPT09IG51bGwpIHtcbiAgICAgICAgbGV0IHR4RmVlID0gMDtcbiAgICAgICAgc3dpdGNoIChvcHRpb25zLnRyYW5zYWN0aW9uLnBheWxvYWQucGF5bG9hZFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgUGF5bG9hZFR5cGUuVG9rZW5UcmFuc2ZlcjpcbiAgICAgICAgICAgIGNhc2UgUGF5bG9hZFR5cGUuU21hcnRDb250cmFjdDpcbiAgICAgICAgICAgIGNhc2UgUGF5bG9hZFR5cGUuVmVyc2lvbmVkU21hcnRDb250cmFjdDpcbiAgICAgICAgICAgIGNhc2UgUGF5bG9hZFR5cGUuQ29udHJhY3RDYWxsOlxuICAgICAgICAgICAgICAgIGNvbnN0IGVzdGltYXRlZExlbiA9IGVzdGltYXRlVHJhbnNhY3Rpb25CeXRlTGVuZ3RoKG9wdGlvbnMudHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHR4RmVlID0gKGF3YWl0IGVzdGltYXRlVHJhbnNhY3Rpb24ob3B0aW9ucy50cmFuc2FjdGlvbi5wYXlsb2FkLCBlc3RpbWF0ZWRMZW4sIG5ldHdvcmspKVsxXVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZlZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU3BvbnNvcmVkIHRyYW5zYWN0aW9ucyBub3Qgc3VwcG9ydGVkIGZvciB0cmFuc2FjdGlvbiB0eXBlICR7UGF5bG9hZFR5cGVbb3B0aW9ucy50cmFuc2FjdGlvbi5wYXlsb2FkLnBheWxvYWRUeXBlXX1gKTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLnRyYW5zYWN0aW9uLnNldEZlZSh0eEZlZSk7XG4gICAgICAgIG9wdGlvbnMuZmVlID0gdHhGZWU7XG4gICAgfVxuICAgIGlmIChzcG9uc29yT3B0aW9ucy5zcG9uc29yTm9uY2UgPT09IHVuZGVmaW5lZCB8fCBzcG9uc29yT3B0aW9ucy5zcG9uc29yTm9uY2UgPT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgYWRkcmVzc1ZlcnNpb24gPSBuZXR3b3JrLnZlcnNpb24gPT09IFRyYW5zYWN0aW9uVmVyc2lvbi5NYWlubmV0XG4gICAgICAgICAgICA/IEFkZHJlc3NWZXJzaW9uLk1haW5uZXRTaW5nbGVTaWdcbiAgICAgICAgICAgIDogQWRkcmVzc1ZlcnNpb24uVGVzdG5ldFNpbmdsZVNpZztcbiAgICAgICAgY29uc3Qgc2VuZGVyQWRkcmVzcyA9IHB1YmxpY0tleVRvQWRkcmVzcyhhZGRyZXNzVmVyc2lvbiwgc3BvbnNvclB1YktleSk7XG4gICAgICAgIGNvbnN0IHNwb25zb3JOb25jZSA9IGF3YWl0IGdldE5vbmNlKHNlbmRlckFkZHJlc3MsIG5ldHdvcmspO1xuICAgICAgICBvcHRpb25zLnNwb25zb3JOb25jZSA9IHNwb25zb3JOb25jZTtcbiAgICB9XG4gICAgY29uc3Qgc3BvbnNvclNwZW5kaW5nQ29uZGl0aW9uID0gY3JlYXRlU2luZ2xlU2lnU3BlbmRpbmdDb25kaXRpb24ob3B0aW9ucy5zcG9uc29yQWRkcmVzc0hhc2htb2RlLCBwdWJsaWNLZXlUb1N0cmluZyhzcG9uc29yUHViS2V5KSwgb3B0aW9ucy5zcG9uc29yTm9uY2UsIG9wdGlvbnMuZmVlKTtcbiAgICBvcHRpb25zLnRyYW5zYWN0aW9uLnNldFNwb25zb3Ioc3BvbnNvclNwZW5kaW5nQ29uZGl0aW9uKTtcbiAgICBjb25zdCBwcml2S2V5ID0gY3JlYXRlU3RhY2tzUHJpdmF0ZUtleShvcHRpb25zLnNwb25zb3JQcml2YXRlS2V5KTtcbiAgICBjb25zdCBzaWduZXIgPSBUcmFuc2FjdGlvblNpZ25lci5jcmVhdGVTcG9uc29yU2lnbmVyKG9wdGlvbnMudHJhbnNhY3Rpb24sIHNwb25zb3JTcGVuZGluZ0NvbmRpdGlvbik7XG4gICAgc2lnbmVyLnNpZ25TcG9uc29yKHByaXZLZXkpO1xuICAgIHJldHVybiBzaWduZXIudHJhbnNhY3Rpb247XG59XG5leHBvcnQgZnVuY3Rpb24gZXN0aW1hdGVUcmFuc2FjdGlvbkJ5dGVMZW5ndGgodHJhbnNhY3Rpb24pIHtcbiAgICBjb25zdCBoYXNoTW9kZSA9IHRyYW5zYWN0aW9uLmF1dGguc3BlbmRpbmdDb25kaXRpb24uaGFzaE1vZGU7XG4gICAgY29uc3QgbXVsdGlTaWdIYXNoTW9kZXMgPSBbQWRkcmVzc0hhc2hNb2RlLlNlcmlhbGl6ZVAyU0gsIEFkZHJlc3NIYXNoTW9kZS5TZXJpYWxpemVQMldTSF07XG4gICAgaWYgKG11bHRpU2lnSGFzaE1vZGVzLmluY2x1ZGVzKGhhc2hNb2RlKSkge1xuICAgICAgICBjb25zdCBtdWx0aVNpZ1NwZW5kaW5nQ29uZGl0aW9uID0gdHJhbnNhY3Rpb24uYXV0aFxuICAgICAgICAgICAgLnNwZW5kaW5nQ29uZGl0aW9uO1xuICAgICAgICBjb25zdCBleGlzdGluZ1NpZ25hdHVyZXMgPSBtdWx0aVNpZ1NwZW5kaW5nQ29uZGl0aW9uLmZpZWxkcy5maWx0ZXIoZmllbGQgPT4gZmllbGQuY29udGVudHMudHlwZSA9PT0gU3RhY2tzTWVzc2FnZVR5cGUuTWVzc2FnZVNpZ25hdHVyZSkubGVuZ3RoO1xuICAgICAgICBjb25zdCB0b3RhbFNpZ25hdHVyZUxlbmd0aCA9IChtdWx0aVNpZ1NwZW5kaW5nQ29uZGl0aW9uLnNpZ25hdHVyZXNSZXF1aXJlZCAtIGV4aXN0aW5nU2lnbmF0dXJlcykgKlxuICAgICAgICAgICAgKFJFQ09WRVJBQkxFX0VDRFNBX1NJR19MRU5HVEhfQllURVMgKyAxKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uLnNlcmlhbGl6ZSgpLmJ5dGVMZW5ndGggKyB0b3RhbFNpZ25hdHVyZUxlbmd0aDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0cmFuc2FjdGlvbi5zZXJpYWxpemUoKS5ieXRlTGVuZ3RoO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlc3RpbWF0ZVRyYW5zYWN0aW9uRmVlV2l0aEZhbGxiYWNrKHRyYW5zYWN0aW9uLCBuZXR3b3JrKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZXN0aW1hdGVkTGVuID0gZXN0aW1hdGVUcmFuc2FjdGlvbkJ5dGVMZW5ndGgodHJhbnNhY3Rpb24pO1xuICAgICAgICByZXR1cm4gKGF3YWl0IGVzdGltYXRlVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24ucGF5bG9hZCwgZXN0aW1hdGVkTGVuLCBuZXR3b3JrKSlbMV0uZmVlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTm9Fc3RpbWF0ZUF2YWlsYWJsZUVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZXN0aW1hdGVUcmFuc2ZlclVuc2FmZSh0cmFuc2FjdGlvbiwgbmV0d29yayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVpbGRlcnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/builders.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/clarityValue.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@stacks/transactions/dist/esm/clarity/clarityValue.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cvToJSON: function() { return /* binding */ cvToJSON; },\n/* harmony export */   cvToString: function() { return /* binding */ cvToString; },\n/* harmony export */   cvToValue: function() { return /* binding */ cvToValue; },\n/* harmony export */   getCVTypeString: function() { return /* binding */ getCVTypeString; },\n/* harmony export */   isClarityType: function() { return /* binding */ isClarityType; }\n/* harmony export */ });\n/* harmony import */ var _types_principalCV__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types/principalCV */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/types/principalCV.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/constants.js\");\n/* harmony import */ var _stacks_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stacks/common */ \"(app-pages-browser)/./node_modules/@stacks/common/dist/esm/utils.js\");\n\n\n\nfunction cvToString(val, encoding = 'hex') {\n    switch (val.type) {\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.BoolTrue:\n            return 'true';\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.BoolFalse:\n            return 'false';\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.Int:\n            return val.value.toString();\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.UInt:\n            return `u${val.value.toString()}`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.Buffer:\n            if (encoding === 'tryAscii') {\n                const str = (0,_stacks_common__WEBPACK_IMPORTED_MODULE_1__.bytesToAscii)(val.buffer);\n                if (/[ -~]/.test(str)) {\n                    return JSON.stringify(str);\n                }\n            }\n            return `0x${(0,_stacks_common__WEBPACK_IMPORTED_MODULE_1__.bytesToHex)(val.buffer)}`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.OptionalNone:\n            return 'none';\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.OptionalSome:\n            return `(some ${cvToString(val.value, encoding)})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.ResponseErr:\n            return `(err ${cvToString(val.value, encoding)})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.ResponseOk:\n            return `(ok ${cvToString(val.value, encoding)})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.PrincipalStandard:\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.PrincipalContract:\n            return (0,_types_principalCV__WEBPACK_IMPORTED_MODULE_2__.principalToString)(val);\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.List:\n            return `(list ${val.list.map(v => cvToString(v, encoding)).join(' ')})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.Tuple:\n            return `(tuple ${Object.keys(val.data)\n                .map(key => `(${key} ${cvToString(val.data[key], encoding)})`)\n                .join(' ')})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.StringASCII:\n            return `\"${val.data}\"`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.StringUTF8:\n            return `u\"${val.data}\"`;\n    }\n}\nfunction cvToValue(val, strictJsonCompat = false) {\n    switch (val.type) {\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.BoolTrue:\n            return true;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.BoolFalse:\n            return false;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.Int:\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.UInt:\n            if (strictJsonCompat) {\n                return val.value.toString();\n            }\n            return val.value;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.Buffer:\n            return `0x${(0,_stacks_common__WEBPACK_IMPORTED_MODULE_1__.bytesToHex)(val.buffer)}`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.OptionalNone:\n            return null;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.OptionalSome:\n            return cvToJSON(val.value);\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.ResponseErr:\n            return cvToJSON(val.value);\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.ResponseOk:\n            return cvToJSON(val.value);\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.PrincipalStandard:\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.PrincipalContract:\n            return (0,_types_principalCV__WEBPACK_IMPORTED_MODULE_2__.principalToString)(val);\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.List:\n            return val.list.map(v => cvToJSON(v));\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.Tuple:\n            const result = {};\n            Object.keys(val.data).forEach(key => {\n                result[key] = cvToJSON(val.data[key]);\n            });\n            return result;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.StringASCII:\n            return val.data;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.StringUTF8:\n            return val.data;\n    }\n}\nfunction cvToJSON(val) {\n    switch (val.type) {\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.ResponseErr:\n            return { type: getCVTypeString(val), value: cvToValue(val, true), success: false };\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.ResponseOk:\n            return { type: getCVTypeString(val), value: cvToValue(val, true), success: true };\n        default:\n            return { type: getCVTypeString(val), value: cvToValue(val, true) };\n    }\n}\nfunction getCVTypeString(val) {\n    switch (val.type) {\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.BoolTrue:\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.BoolFalse:\n            return 'bool';\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.Int:\n            return 'int';\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.UInt:\n            return 'uint';\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.Buffer:\n            return `(buff ${val.buffer.length})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.OptionalNone:\n            return '(optional none)';\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.OptionalSome:\n            return `(optional ${getCVTypeString(val.value)})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.ResponseErr:\n            return `(response UnknownType ${getCVTypeString(val.value)})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.ResponseOk:\n            return `(response ${getCVTypeString(val.value)} UnknownType)`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.PrincipalStandard:\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.PrincipalContract:\n            return 'principal';\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.List:\n            return `(list ${val.list.length} ${val.list.length ? getCVTypeString(val.list[0]) : 'UnknownType'})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.Tuple:\n            return `(tuple ${Object.keys(val.data)\n                .map(key => `(${key} ${getCVTypeString(val.data[key])})`)\n                .join(' ')})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.StringASCII:\n            return `(string-ascii ${(0,_stacks_common__WEBPACK_IMPORTED_MODULE_1__.asciiToBytes)(val.data).length})`;\n        case _constants__WEBPACK_IMPORTED_MODULE_0__.ClarityType.StringUTF8:\n            return `(string-utf8 ${(0,_stacks_common__WEBPACK_IMPORTED_MODULE_1__.utf8ToBytes)(val.data).length})`;\n    }\n}\nfunction isClarityType(input, withType) {\n    return input.type === withType;\n}\n//# sourceMappingURL=clarityValue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tzL3RyYW5zYWN0aW9ucy9kaXN0L2VzbS9jbGFyaXR5L2NsYXJpdHlWYWx1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF3RDtBQUNkO0FBQzJDO0FBQzlFO0FBQ1A7QUFDQSxhQUFhLG1EQUFXO0FBQ3hCO0FBQ0EsYUFBYSxtREFBVztBQUN4QjtBQUNBLGFBQWEsbURBQVc7QUFDeEI7QUFDQSxhQUFhLG1EQUFXO0FBQ3hCLHVCQUF1QixxQkFBcUI7QUFDNUMsYUFBYSxtREFBVztBQUN4QjtBQUNBLDRCQUE0Qiw0REFBWTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwREFBVSxhQUFhO0FBQy9DLGFBQWEsbURBQVc7QUFDeEI7QUFDQSxhQUFhLG1EQUFXO0FBQ3hCLDRCQUE0QixnQ0FBZ0M7QUFDNUQsYUFBYSxtREFBVztBQUN4QiwyQkFBMkIsZ0NBQWdDO0FBQzNELGFBQWEsbURBQVc7QUFDeEIsMEJBQTBCLGdDQUFnQztBQUMxRCxhQUFhLG1EQUFXO0FBQ3hCLGFBQWEsbURBQVc7QUFDeEIsbUJBQW1CLHFFQUFpQjtBQUNwQyxhQUFhLG1EQUFXO0FBQ3hCLDRCQUE0QixxREFBcUQ7QUFDakYsYUFBYSxtREFBVztBQUN4Qiw2QkFBNkI7QUFDN0IsZ0NBQWdDLEtBQUssRUFBRSxvQ0FBb0M7QUFDM0UsMkJBQTJCO0FBQzNCLGFBQWEsbURBQVc7QUFDeEIsdUJBQXVCLFNBQVM7QUFDaEMsYUFBYSxtREFBVztBQUN4Qix3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ087QUFDUDtBQUNBLGFBQWEsbURBQVc7QUFDeEI7QUFDQSxhQUFhLG1EQUFXO0FBQ3hCO0FBQ0EsYUFBYSxtREFBVztBQUN4QixhQUFhLG1EQUFXO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxtREFBVztBQUN4Qix3QkFBd0IsMERBQVUsYUFBYTtBQUMvQyxhQUFhLG1EQUFXO0FBQ3hCO0FBQ0EsYUFBYSxtREFBVztBQUN4QjtBQUNBLGFBQWEsbURBQVc7QUFDeEI7QUFDQSxhQUFhLG1EQUFXO0FBQ3hCO0FBQ0EsYUFBYSxtREFBVztBQUN4QixhQUFhLG1EQUFXO0FBQ3hCLG1CQUFtQixxRUFBaUI7QUFDcEMsYUFBYSxtREFBVztBQUN4QjtBQUNBLGFBQWEsbURBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYSxtREFBVztBQUN4QjtBQUNBLGFBQWEsbURBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGFBQWEsbURBQVc7QUFDeEIscUJBQXFCO0FBQ3JCLGFBQWEsbURBQVc7QUFDeEIscUJBQXFCO0FBQ3JCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDTztBQUNQO0FBQ0EsYUFBYSxtREFBVztBQUN4QixhQUFhLG1EQUFXO0FBQ3hCO0FBQ0EsYUFBYSxtREFBVztBQUN4QjtBQUNBLGFBQWEsbURBQVc7QUFDeEI7QUFDQSxhQUFhLG1EQUFXO0FBQ3hCLDRCQUE0QixrQkFBa0I7QUFDOUMsYUFBYSxtREFBVztBQUN4QjtBQUNBLGFBQWEsbURBQVc7QUFDeEIsZ0NBQWdDLDJCQUEyQjtBQUMzRCxhQUFhLG1EQUFXO0FBQ3hCLDRDQUE0QywyQkFBMkI7QUFDdkUsYUFBYSxtREFBVztBQUN4QixnQ0FBZ0MsNEJBQTRCO0FBQzVELGFBQWEsbURBQVc7QUFDeEIsYUFBYSxtREFBVztBQUN4QjtBQUNBLGFBQWEsbURBQVc7QUFDeEIsNEJBQTRCLGlCQUFpQixFQUFFLCtEQUErRDtBQUM5RyxhQUFhLG1EQUFXO0FBQ3hCLDZCQUE2QjtBQUM3QixnQ0FBZ0MsS0FBSyxFQUFFLCtCQUErQjtBQUN0RSwyQkFBMkI7QUFDM0IsYUFBYSxtREFBVztBQUN4QixvQ0FBb0MsNERBQVksa0JBQWtCO0FBQ2xFLGFBQWEsbURBQVc7QUFDeEIsbUNBQW1DLDJEQUFXLGtCQUFrQjtBQUNoRTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BzdGFja3MvdHJhbnNhY3Rpb25zL2Rpc3QvZXNtL2NsYXJpdHkvY2xhcml0eVZhbHVlLmpzP2RlZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJpbmNpcGFsVG9TdHJpbmcgfSBmcm9tICcuL3R5cGVzL3ByaW5jaXBhbENWJztcbmltcG9ydCB7IENsYXJpdHlUeXBlIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgYXNjaWlUb0J5dGVzLCBieXRlc1RvQXNjaWksIGJ5dGVzVG9IZXgsIHV0ZjhUb0J5dGVzIH0gZnJvbSAnQHN0YWNrcy9jb21tb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGN2VG9TdHJpbmcodmFsLCBlbmNvZGluZyA9ICdoZXgnKSB7XG4gICAgc3dpdGNoICh2YWwudHlwZSkge1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLkJvb2xUcnVlOlxuICAgICAgICAgICAgcmV0dXJuICd0cnVlJztcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5Cb29sRmFsc2U6XG4gICAgICAgICAgICByZXR1cm4gJ2ZhbHNlJztcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5JbnQ6XG4gICAgICAgICAgICByZXR1cm4gdmFsLnZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuVUludDpcbiAgICAgICAgICAgIHJldHVybiBgdSR7dmFsLnZhbHVlLnRvU3RyaW5nKCl9YDtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5CdWZmZXI6XG4gICAgICAgICAgICBpZiAoZW5jb2RpbmcgPT09ICd0cnlBc2NpaScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHIgPSBieXRlc1RvQXNjaWkodmFsLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKC9bIC1+XS8udGVzdChzdHIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBgMHgke2J5dGVzVG9IZXgodmFsLmJ1ZmZlcil9YDtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5PcHRpb25hbE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gJ25vbmUnO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLk9wdGlvbmFsU29tZTpcbiAgICAgICAgICAgIHJldHVybiBgKHNvbWUgJHtjdlRvU3RyaW5nKHZhbC52YWx1ZSwgZW5jb2RpbmcpfSlgO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlJlc3BvbnNlRXJyOlxuICAgICAgICAgICAgcmV0dXJuIGAoZXJyICR7Y3ZUb1N0cmluZyh2YWwudmFsdWUsIGVuY29kaW5nKX0pYDtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5SZXNwb25zZU9rOlxuICAgICAgICAgICAgcmV0dXJuIGAob2sgJHtjdlRvU3RyaW5nKHZhbC52YWx1ZSwgZW5jb2RpbmcpfSlgO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlByaW5jaXBhbFN0YW5kYXJkOlxuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlByaW5jaXBhbENvbnRyYWN0OlxuICAgICAgICAgICAgcmV0dXJuIHByaW5jaXBhbFRvU3RyaW5nKHZhbCk7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuTGlzdDpcbiAgICAgICAgICAgIHJldHVybiBgKGxpc3QgJHt2YWwubGlzdC5tYXAodiA9PiBjdlRvU3RyaW5nKHYsIGVuY29kaW5nKSkuam9pbignICcpfSlgO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlR1cGxlOlxuICAgICAgICAgICAgcmV0dXJuIGAodHVwbGUgJHtPYmplY3Qua2V5cyh2YWwuZGF0YSlcbiAgICAgICAgICAgICAgICAubWFwKGtleSA9PiBgKCR7a2V5fSAke2N2VG9TdHJpbmcodmFsLmRhdGFba2V5XSwgZW5jb2RpbmcpfSlgKVxuICAgICAgICAgICAgICAgIC5qb2luKCcgJyl9KWA7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuU3RyaW5nQVNDSUk6XG4gICAgICAgICAgICByZXR1cm4gYFwiJHt2YWwuZGF0YX1cImA7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuU3RyaW5nVVRGODpcbiAgICAgICAgICAgIHJldHVybiBgdVwiJHt2YWwuZGF0YX1cImA7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGN2VG9WYWx1ZSh2YWwsIHN0cmljdEpzb25Db21wYXQgPSBmYWxzZSkge1xuICAgIHN3aXRjaCAodmFsLnR5cGUpIHtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5Cb29sVHJ1ZTpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLkJvb2xGYWxzZTpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5JbnQ6XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuVUludDpcbiAgICAgICAgICAgIGlmIChzdHJpY3RKc29uQ29tcGF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbC52YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbC52YWx1ZTtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5CdWZmZXI6XG4gICAgICAgICAgICByZXR1cm4gYDB4JHtieXRlc1RvSGV4KHZhbC5idWZmZXIpfWA7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuT3B0aW9uYWxOb25lOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuT3B0aW9uYWxTb21lOlxuICAgICAgICAgICAgcmV0dXJuIGN2VG9KU09OKHZhbC52YWx1ZSk7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuUmVzcG9uc2VFcnI6XG4gICAgICAgICAgICByZXR1cm4gY3ZUb0pTT04odmFsLnZhbHVlKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5SZXNwb25zZU9rOlxuICAgICAgICAgICAgcmV0dXJuIGN2VG9KU09OKHZhbC52YWx1ZSk7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuUHJpbmNpcGFsU3RhbmRhcmQ6XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuUHJpbmNpcGFsQ29udHJhY3Q6XG4gICAgICAgICAgICByZXR1cm4gcHJpbmNpcGFsVG9TdHJpbmcodmFsKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5MaXN0OlxuICAgICAgICAgICAgcmV0dXJuIHZhbC5saXN0Lm1hcCh2ID0+IGN2VG9KU09OKHYpKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5UdXBsZTpcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgICAgICAgT2JqZWN0LmtleXModmFsLmRhdGEpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGN2VG9KU09OKHZhbC5kYXRhW2tleV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlN0cmluZ0FTQ0lJOlxuICAgICAgICAgICAgcmV0dXJuIHZhbC5kYXRhO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlN0cmluZ1VURjg6XG4gICAgICAgICAgICByZXR1cm4gdmFsLmRhdGE7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGN2VG9KU09OKHZhbCkge1xuICAgIHN3aXRjaCAodmFsLnR5cGUpIHtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5SZXNwb25zZUVycjpcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IGdldENWVHlwZVN0cmluZyh2YWwpLCB2YWx1ZTogY3ZUb1ZhbHVlKHZhbCwgdHJ1ZSksIHN1Y2Nlc3M6IGZhbHNlIH07XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuUmVzcG9uc2VPazpcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IGdldENWVHlwZVN0cmluZyh2YWwpLCB2YWx1ZTogY3ZUb1ZhbHVlKHZhbCwgdHJ1ZSksIHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IGdldENWVHlwZVN0cmluZyh2YWwpLCB2YWx1ZTogY3ZUb1ZhbHVlKHZhbCwgdHJ1ZSkgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q1ZUeXBlU3RyaW5nKHZhbCkge1xuICAgIHN3aXRjaCAodmFsLnR5cGUpIHtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5Cb29sVHJ1ZTpcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5Cb29sRmFsc2U6XG4gICAgICAgICAgICByZXR1cm4gJ2Jvb2wnO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLkludDpcbiAgICAgICAgICAgIHJldHVybiAnaW50JztcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5VSW50OlxuICAgICAgICAgICAgcmV0dXJuICd1aW50JztcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5CdWZmZXI6XG4gICAgICAgICAgICByZXR1cm4gYChidWZmICR7dmFsLmJ1ZmZlci5sZW5ndGh9KWA7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuT3B0aW9uYWxOb25lOlxuICAgICAgICAgICAgcmV0dXJuICcob3B0aW9uYWwgbm9uZSknO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLk9wdGlvbmFsU29tZTpcbiAgICAgICAgICAgIHJldHVybiBgKG9wdGlvbmFsICR7Z2V0Q1ZUeXBlU3RyaW5nKHZhbC52YWx1ZSl9KWA7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuUmVzcG9uc2VFcnI6XG4gICAgICAgICAgICByZXR1cm4gYChyZXNwb25zZSBVbmtub3duVHlwZSAke2dldENWVHlwZVN0cmluZyh2YWwudmFsdWUpfSlgO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlJlc3BvbnNlT2s6XG4gICAgICAgICAgICByZXR1cm4gYChyZXNwb25zZSAke2dldENWVHlwZVN0cmluZyh2YWwudmFsdWUpfSBVbmtub3duVHlwZSlgO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlByaW5jaXBhbFN0YW5kYXJkOlxuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlByaW5jaXBhbENvbnRyYWN0OlxuICAgICAgICAgICAgcmV0dXJuICdwcmluY2lwYWwnO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLkxpc3Q6XG4gICAgICAgICAgICByZXR1cm4gYChsaXN0ICR7dmFsLmxpc3QubGVuZ3RofSAke3ZhbC5saXN0Lmxlbmd0aCA/IGdldENWVHlwZVN0cmluZyh2YWwubGlzdFswXSkgOiAnVW5rbm93blR5cGUnfSlgO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlR1cGxlOlxuICAgICAgICAgICAgcmV0dXJuIGAodHVwbGUgJHtPYmplY3Qua2V5cyh2YWwuZGF0YSlcbiAgICAgICAgICAgICAgICAubWFwKGtleSA9PiBgKCR7a2V5fSAke2dldENWVHlwZVN0cmluZyh2YWwuZGF0YVtrZXldKX0pYClcbiAgICAgICAgICAgICAgICAuam9pbignICcpfSlgO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlN0cmluZ0FTQ0lJOlxuICAgICAgICAgICAgcmV0dXJuIGAoc3RyaW5nLWFzY2lpICR7YXNjaWlUb0J5dGVzKHZhbC5kYXRhKS5sZW5ndGh9KWA7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuU3RyaW5nVVRGODpcbiAgICAgICAgICAgIHJldHVybiBgKHN0cmluZy11dGY4ICR7dXRmOFRvQnl0ZXModmFsLmRhdGEpLmxlbmd0aH0pYDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNDbGFyaXR5VHlwZShpbnB1dCwgd2l0aFR5cGUpIHtcbiAgICByZXR1cm4gaW5wdXQudHlwZSA9PT0gd2l0aFR5cGU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGFyaXR5VmFsdWUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/clarityValue.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/contract-abi.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stacks/transactions/dist/esm/contract-abi.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClarityAbiTypeId: function() { return /* binding */ ClarityAbiTypeId; },\n/* harmony export */   abiFunctionToString: function() { return /* binding */ abiFunctionToString; },\n/* harmony export */   encodeClarityValue: function() { return /* binding */ encodeClarityValue; },\n/* harmony export */   getTypeString: function() { return /* binding */ getTypeString; },\n/* harmony export */   getTypeUnion: function() { return /* binding */ getTypeUnion; },\n/* harmony export */   isClarityAbiBuffer: function() { return /* binding */ isClarityAbiBuffer; },\n/* harmony export */   isClarityAbiList: function() { return /* binding */ isClarityAbiList; },\n/* harmony export */   isClarityAbiOptional: function() { return /* binding */ isClarityAbiOptional; },\n/* harmony export */   isClarityAbiPrimitive: function() { return /* binding */ isClarityAbiPrimitive; },\n/* harmony export */   isClarityAbiResponse: function() { return /* binding */ isClarityAbiResponse; },\n/* harmony export */   isClarityAbiStringAscii: function() { return /* binding */ isClarityAbiStringAscii; },\n/* harmony export */   isClarityAbiStringUtf8: function() { return /* binding */ isClarityAbiStringUtf8; },\n/* harmony export */   isClarityAbiTuple: function() { return /* binding */ isClarityAbiTuple; },\n/* harmony export */   parseToCV: function() { return /* binding */ parseToCV; },\n/* harmony export */   validateContractCall: function() { return /* binding */ validateContractCall; }\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/utils.js\");\n/* harmony import */ var _clarity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./clarity */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/types/intCV.js\");\n/* harmony import */ var _clarity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./clarity */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/types/booleanCV.js\");\n/* harmony import */ var _clarity__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./clarity */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/types/principalCV.js\");\n/* harmony import */ var _clarity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./clarity */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/types/optionalCV.js\");\n/* harmony import */ var _clarity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./clarity */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/types/bufferCV.js\");\n/* harmony import */ var _clarity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./clarity */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/constants.js\");\n/* harmony import */ var _clarity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./clarity */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/clarityValue.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./errors */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/errors.js\");\n/* harmony import */ var _clarity_types_stringCV__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./clarity/types/stringCV */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/types/stringCV.js\");\n/* harmony import */ var _stacks_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @stacks/common */ \"(app-pages-browser)/./node_modules/@stacks/common/dist/esm/utils.js\");\n\n\n\n\n\nvar ClarityAbiTypeId;\n(function (ClarityAbiTypeId) {\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeUInt128\"] = 1] = \"ClarityAbiTypeUInt128\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeInt128\"] = 2] = \"ClarityAbiTypeInt128\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeBool\"] = 3] = \"ClarityAbiTypeBool\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypePrincipal\"] = 4] = \"ClarityAbiTypePrincipal\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeNone\"] = 5] = \"ClarityAbiTypeNone\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeBuffer\"] = 6] = \"ClarityAbiTypeBuffer\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeResponse\"] = 7] = \"ClarityAbiTypeResponse\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeOptional\"] = 8] = \"ClarityAbiTypeOptional\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeTuple\"] = 9] = \"ClarityAbiTypeTuple\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeList\"] = 10] = \"ClarityAbiTypeList\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeStringAscii\"] = 11] = \"ClarityAbiTypeStringAscii\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeStringUtf8\"] = 12] = \"ClarityAbiTypeStringUtf8\";\n    ClarityAbiTypeId[ClarityAbiTypeId[\"ClarityAbiTypeTraitReference\"] = 13] = \"ClarityAbiTypeTraitReference\";\n})(ClarityAbiTypeId || (ClarityAbiTypeId = {}));\nconst isClarityAbiPrimitive = (val) => typeof val === 'string';\nconst isClarityAbiBuffer = (val) => val.buffer !== undefined;\nconst isClarityAbiStringAscii = (val) => val['string-ascii'] !== undefined;\nconst isClarityAbiStringUtf8 = (val) => val['string-utf8'] !== undefined;\nconst isClarityAbiResponse = (val) => val.response !== undefined;\nconst isClarityAbiOptional = (val) => val.optional !== undefined;\nconst isClarityAbiTuple = (val) => val.tuple !== undefined;\nconst isClarityAbiList = (val) => val.list !== undefined;\nfunction getTypeUnion(val) {\n    if (isClarityAbiPrimitive(val)) {\n        if (val === 'uint128') {\n            return { id: ClarityAbiTypeId.ClarityAbiTypeUInt128, type: val };\n        }\n        else if (val === 'int128') {\n            return { id: ClarityAbiTypeId.ClarityAbiTypeInt128, type: val };\n        }\n        else if (val === 'bool') {\n            return { id: ClarityAbiTypeId.ClarityAbiTypeBool, type: val };\n        }\n        else if (val === 'principal') {\n            return { id: ClarityAbiTypeId.ClarityAbiTypePrincipal, type: val };\n        }\n        else if (val === 'trait_reference') {\n            return { id: ClarityAbiTypeId.ClarityAbiTypeTraitReference, type: val };\n        }\n        else if (val === 'none') {\n            return { id: ClarityAbiTypeId.ClarityAbiTypeNone, type: val };\n        }\n        else {\n            throw new Error(`Unexpected Clarity ABI type primitive: ${JSON.stringify(val)}`);\n        }\n    }\n    else if (isClarityAbiBuffer(val)) {\n        return { id: ClarityAbiTypeId.ClarityAbiTypeBuffer, type: val };\n    }\n    else if (isClarityAbiResponse(val)) {\n        return { id: ClarityAbiTypeId.ClarityAbiTypeResponse, type: val };\n    }\n    else if (isClarityAbiOptional(val)) {\n        return { id: ClarityAbiTypeId.ClarityAbiTypeOptional, type: val };\n    }\n    else if (isClarityAbiTuple(val)) {\n        return { id: ClarityAbiTypeId.ClarityAbiTypeTuple, type: val };\n    }\n    else if (isClarityAbiList(val)) {\n        return { id: ClarityAbiTypeId.ClarityAbiTypeList, type: val };\n    }\n    else if (isClarityAbiStringAscii(val)) {\n        return { id: ClarityAbiTypeId.ClarityAbiTypeStringAscii, type: val };\n    }\n    else if (isClarityAbiStringUtf8(val)) {\n        return { id: ClarityAbiTypeId.ClarityAbiTypeStringUtf8, type: val };\n    }\n    else {\n        throw new Error(`Unexpected Clarity ABI type: ${JSON.stringify(val)}`);\n    }\n}\nfunction encodeClarityValue(input, val) {\n    let union;\n    if (input.id !== undefined) {\n        union = input;\n    }\n    else {\n        union = getTypeUnion(input);\n    }\n    switch (union.id) {\n        case ClarityAbiTypeId.ClarityAbiTypeUInt128:\n            return (0,_clarity__WEBPACK_IMPORTED_MODULE_0__.uintCV)(val);\n        case ClarityAbiTypeId.ClarityAbiTypeInt128:\n            return (0,_clarity__WEBPACK_IMPORTED_MODULE_0__.intCV)(val);\n        case ClarityAbiTypeId.ClarityAbiTypeBool:\n            if (val === 'false' || val === '0')\n                return (0,_clarity__WEBPACK_IMPORTED_MODULE_1__.falseCV)();\n            else if (val === 'true' || val === '1')\n                return (0,_clarity__WEBPACK_IMPORTED_MODULE_1__.trueCV)();\n            else\n                throw new Error(`Unexpected Clarity bool value: ${JSON.stringify(val)}`);\n        case ClarityAbiTypeId.ClarityAbiTypePrincipal:\n            if (val.includes('.')) {\n                const [addr, name] = val.split('.');\n                return (0,_clarity__WEBPACK_IMPORTED_MODULE_2__.contractPrincipalCV)(addr, name);\n            }\n            else {\n                return (0,_clarity__WEBPACK_IMPORTED_MODULE_2__.standardPrincipalCV)(val);\n            }\n        case ClarityAbiTypeId.ClarityAbiTypeTraitReference:\n            const [addr, name] = val.split('.');\n            return (0,_clarity__WEBPACK_IMPORTED_MODULE_2__.contractPrincipalCV)(addr, name);\n        case ClarityAbiTypeId.ClarityAbiTypeNone:\n            return (0,_clarity__WEBPACK_IMPORTED_MODULE_3__.noneCV)();\n        case ClarityAbiTypeId.ClarityAbiTypeBuffer:\n            return (0,_clarity__WEBPACK_IMPORTED_MODULE_4__.bufferCV)((0,_stacks_common__WEBPACK_IMPORTED_MODULE_5__.utf8ToBytes)(val));\n        case ClarityAbiTypeId.ClarityAbiTypeStringAscii:\n            return (0,_clarity_types_stringCV__WEBPACK_IMPORTED_MODULE_6__.stringAsciiCV)(val);\n        case ClarityAbiTypeId.ClarityAbiTypeStringUtf8:\n            return (0,_clarity_types_stringCV__WEBPACK_IMPORTED_MODULE_6__.stringUtf8CV)(val);\n        case ClarityAbiTypeId.ClarityAbiTypeResponse:\n            throw new _errors__WEBPACK_IMPORTED_MODULE_7__.NotImplementedError(`Unsupported encoding for Clarity type: ${union.id}`);\n        case ClarityAbiTypeId.ClarityAbiTypeOptional:\n            throw new _errors__WEBPACK_IMPORTED_MODULE_7__.NotImplementedError(`Unsupported encoding for Clarity type: ${union.id}`);\n        case ClarityAbiTypeId.ClarityAbiTypeTuple:\n            throw new _errors__WEBPACK_IMPORTED_MODULE_7__.NotImplementedError(`Unsupported encoding for Clarity type: ${union.id}`);\n        case ClarityAbiTypeId.ClarityAbiTypeList:\n            throw new _errors__WEBPACK_IMPORTED_MODULE_7__.NotImplementedError(`Unsupported encoding for Clarity type: ${union.id}`);\n        default:\n            throw new Error(`Unexpected Clarity type ID: ${JSON.stringify(union)}`);\n    }\n}\n\nfunction getTypeString(val) {\n    if (isClarityAbiPrimitive(val)) {\n        if (val === 'int128') {\n            return 'int';\n        }\n        else if (val === 'uint128') {\n            return 'uint';\n        }\n        return val;\n    }\n    else if (isClarityAbiBuffer(val)) {\n        return `(buff ${val.buffer.length})`;\n    }\n    else if (isClarityAbiStringAscii(val)) {\n        return `(string-ascii ${val['string-ascii'].length})`;\n    }\n    else if (isClarityAbiStringUtf8(val)) {\n        return `(string-utf8 ${val['string-utf8'].length})`;\n    }\n    else if (isClarityAbiResponse(val)) {\n        return `(response ${getTypeString(val.response.ok)} ${getTypeString(val.response.error)})`;\n    }\n    else if (isClarityAbiOptional(val)) {\n        return `(optional ${getTypeString(val.optional)})`;\n    }\n    else if (isClarityAbiTuple(val)) {\n        return `(tuple ${val.tuple.map(t => `(${t.name} ${getTypeString(t.type)})`).join(' ')})`;\n    }\n    else if (isClarityAbiList(val)) {\n        return `(list ${val.list.length} ${getTypeString(val.list.type)})`;\n    }\n    else {\n        throw new Error(`Type string unsupported for Clarity type: ${JSON.stringify(val)}`);\n    }\n}\nfunction abiFunctionToString(func) {\n    const access = func.access === 'read_only' ? 'read-only' : func.access;\n    return `(define-${access} (${func.name} ${func.args\n        .map(arg => `(${arg.name} ${getTypeString(arg.type)})`)\n        .join(' ')}))`;\n}\nfunction matchType(cv, abiType) {\n    const union = getTypeUnion(abiType);\n    switch (cv.type) {\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.BoolTrue:\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.BoolFalse:\n            return union.id === ClarityAbiTypeId.ClarityAbiTypeBool;\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.Int:\n            return union.id === ClarityAbiTypeId.ClarityAbiTypeInt128;\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.UInt:\n            return union.id === ClarityAbiTypeId.ClarityAbiTypeUInt128;\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.Buffer:\n            return (union.id === ClarityAbiTypeId.ClarityAbiTypeBuffer &&\n                union.type.buffer.length >= cv.buffer.length);\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.StringASCII:\n            return (union.id === ClarityAbiTypeId.ClarityAbiTypeStringAscii &&\n                union.type['string-ascii'].length >= cv.data.length);\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.StringUTF8:\n            return (union.id === ClarityAbiTypeId.ClarityAbiTypeStringUtf8 &&\n                union.type['string-utf8'].length >= cv.data.length);\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.OptionalNone:\n            return (union.id === ClarityAbiTypeId.ClarityAbiTypeNone ||\n                union.id === ClarityAbiTypeId.ClarityAbiTypeOptional);\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.OptionalSome:\n            return (union.id === ClarityAbiTypeId.ClarityAbiTypeOptional &&\n                matchType(cv.value, union.type.optional));\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.ResponseErr:\n            return (union.id === ClarityAbiTypeId.ClarityAbiTypeResponse &&\n                matchType(cv.value, union.type.response.error));\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.ResponseOk:\n            return (union.id === ClarityAbiTypeId.ClarityAbiTypeResponse &&\n                matchType(cv.value, union.type.response.ok));\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.PrincipalContract:\n            return (union.id === ClarityAbiTypeId.ClarityAbiTypePrincipal ||\n                union.id === ClarityAbiTypeId.ClarityAbiTypeTraitReference);\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.PrincipalStandard:\n            return union.id === ClarityAbiTypeId.ClarityAbiTypePrincipal;\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.List:\n            return (union.id == ClarityAbiTypeId.ClarityAbiTypeList &&\n                union.type.list.length >= cv.list.length &&\n                cv.list.every(val => matchType(val, union.type.list.type)));\n        case _clarity__WEBPACK_IMPORTED_MODULE_8__.ClarityType.Tuple:\n            if (union.id == ClarityAbiTypeId.ClarityAbiTypeTuple) {\n                const tuple = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.cloneDeep)(cv.data);\n                for (let i = 0; i < union.type.tuple.length; i++) {\n                    const abiTupleEntry = union.type.tuple[i];\n                    const key = abiTupleEntry.name;\n                    const val = tuple[key];\n                    if (val) {\n                        if (!matchType(val, abiTupleEntry.type)) {\n                            return false;\n                        }\n                        delete tuple[key];\n                    }\n                    else {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            else {\n                return false;\n            }\n        default:\n            return false;\n    }\n}\nfunction validateContractCall(payload, abi) {\n    const filtered = abi.functions.filter(fn => fn.name === payload.functionName.content);\n    if (filtered.length === 1) {\n        const abiFunc = filtered[0];\n        const abiArgs = abiFunc.args;\n        if (payload.functionArgs.length !== abiArgs.length) {\n            throw new Error(`Clarity function expects ${abiArgs.length} argument(s) but received ${payload.functionArgs.length}`);\n        }\n        for (let i = 0; i < payload.functionArgs.length; i++) {\n            const payloadArg = payload.functionArgs[i];\n            const abiArg = abiArgs[i];\n            if (!matchType(payloadArg, abiArg.type)) {\n                const argNum = i + 1;\n                throw new Error(`Clarity function \\`${payload.functionName.content}\\` expects argument ${argNum} to be of type ${getTypeString(abiArg.type)}, not ${(0,_clarity__WEBPACK_IMPORTED_MODULE_10__.getCVTypeString)(payloadArg)}`);\n            }\n        }\n        return true;\n    }\n    else if (filtered.length === 0) {\n        throw new Error(`ABI doesn't contain a function with the name ${payload.functionName.content}`);\n    }\n    else {\n        throw new Error(`Malformed ABI. Contains multiple functions with the name ${payload.functionName.content}`);\n    }\n}\nfunction parseToCV(input, type) {\n    const typeString = getTypeString(type);\n    if (isClarityAbiPrimitive(type)) {\n        if (type === 'uint128') {\n            return (0,_clarity__WEBPACK_IMPORTED_MODULE_0__.uintCV)(input);\n        }\n        else if (type === 'int128') {\n            return (0,_clarity__WEBPACK_IMPORTED_MODULE_0__.intCV)(input);\n        }\n        else if (type === 'bool') {\n            if (input.toLowerCase() === 'true') {\n                return (0,_clarity__WEBPACK_IMPORTED_MODULE_1__.trueCV)();\n            }\n            else if (input.toLowerCase() === 'false') {\n                return (0,_clarity__WEBPACK_IMPORTED_MODULE_1__.falseCV)();\n            }\n            else {\n                throw new Error(`Invalid bool value: ${input}`);\n            }\n        }\n        else if (type === 'principal') {\n            if (input.includes('.')) {\n                const [address, contractName] = input.split('.');\n                return (0,_clarity__WEBPACK_IMPORTED_MODULE_2__.contractPrincipalCV)(address, contractName);\n            }\n            else {\n                return (0,_clarity__WEBPACK_IMPORTED_MODULE_2__.standardPrincipalCV)(input);\n            }\n        }\n        else {\n            throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n        }\n    }\n    else if (isClarityAbiBuffer(type)) {\n        const inputLength = (0,_stacks_common__WEBPACK_IMPORTED_MODULE_5__.utf8ToBytes)(input).byteLength;\n        if (inputLength > type.buffer.length) {\n            throw new Error(`Input exceeds specified buffer length limit of ${type.buffer.length}`);\n        }\n        return (0,_clarity__WEBPACK_IMPORTED_MODULE_4__.bufferCVFromString)(input);\n    }\n    else if (isClarityAbiResponse(type)) {\n        throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n    }\n    else if (isClarityAbiOptional(type)) {\n        throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n    }\n    else if (isClarityAbiTuple(type)) {\n        throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n    }\n    else if (isClarityAbiList(type)) {\n        throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n    }\n    else {\n        throw new Error(`Contract function contains unsupported Clarity ABI type: ${typeString}`);\n    }\n}\n//# sourceMappingURL=contract-abi.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tzL3RyYW5zYWN0aW9ucy9kaXN0L2VzbS9jb250cmFjdC1hYmkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0M7QUFDc0k7QUFDM0g7QUFDd0I7QUFDMUI7QUFDdEM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0Q0FBNEM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHNFQUFzRSxvQkFBb0I7QUFDMUY7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSx3REFBd0Qsb0JBQW9CO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnREFBTTtBQUN6QjtBQUNBLG1CQUFtQiwrQ0FBSztBQUN4QjtBQUNBO0FBQ0EsdUJBQXVCLGlEQUFPO0FBQzlCO0FBQ0EsdUJBQXVCLGdEQUFNO0FBQzdCO0FBQ0Esa0VBQWtFLG9CQUFvQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkRBQW1CO0FBQzFDO0FB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LHVCQUF1Qiw2REFBbUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0Esd0ZBQXdGLFdBQVc7QUFDbkc7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJEQUFXO0FBQ3ZDO0FBQ0EsOEVBQThFLG1CQUFtQjtBQUNqRztBQUNBLGVBQWUsNERBQWtCO0FBQ2pDO0FBQ0E7QUFDQSxvRkFBb0YsV0FBVztBQUMvRjtBQUNBO0FBQ0Esb0ZBQW9GLFdBQVc7QUFDL0Y7QUFDQTtBQUNBLG9GQUFvRixXQUFXO0FBQy9GO0FBQ0E7QUFDQSxvRkFBb0YsV0FBVztBQUMvRjtBQUNBO0FBQ0Esb0ZBQW9GLFdBQVc7QUFDL0Y7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tzL3RyYW5zYWN0aW9ucy9kaXN0L2VzbS9jb250cmFjdC1hYmkuanM/MTgyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IHVpbnRDViwgaW50Q1YsIGNvbnRyYWN0UHJpbmNpcGFsQ1YsIHN0YW5kYXJkUHJpbmNpcGFsQ1YsIG5vbmVDViwgYnVmZmVyQ1YsIGZhbHNlQ1YsIHRydWVDViwgQ2xhcml0eVR5cGUsIGdldENWVHlwZVN0cmluZywgYnVmZmVyQ1ZGcm9tU3RyaW5nLCB9IGZyb20gJy4vY2xhcml0eSc7XG5pbXBvcnQgeyBOb3RJbXBsZW1lbnRlZEVycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xuaW1wb3J0IHsgc3RyaW5nQXNjaWlDViwgc3RyaW5nVXRmOENWIH0gZnJvbSAnLi9jbGFyaXR5L3R5cGVzL3N0cmluZ0NWJztcbmltcG9ydCB7IHV0ZjhUb0J5dGVzIH0gZnJvbSAnQHN0YWNrcy9jb21tb24nO1xuZXhwb3J0IHZhciBDbGFyaXR5QWJpVHlwZUlkO1xuKGZ1bmN0aW9uIChDbGFyaXR5QWJpVHlwZUlkKSB7XG4gICAgQ2xhcml0eUFiaVR5cGVJZFtDbGFyaXR5QWJpVHlwZUlkW1wiQ2xhcml0eUFiaVR5cGVVSW50MTI4XCJdID0gMV0gPSBcIkNsYXJpdHlBYmlUeXBlVUludDEyOFwiO1xuICAgIENsYXJpdHlBYmlUeXBlSWRbQ2xhcml0eUFiaVR5cGVJZFtcIkNsYXJpdHlBYmlUeXBlSW50MTI4XCJdID0gMl0gPSBcIkNsYXJpdHlBYmlUeXBlSW50MTI4XCI7XG4gICAgQ2xhcml0eUFiaVR5cGVJZFtDbGFyaXR5QWJpVHlwZUlkW1wiQ2xhcml0eUFiaVR5cGVCb29sXCJdID0gM10gPSBcIkNsYXJpdHlBYmlUeXBlQm9vbFwiO1xuICAgIENsYXJpdHlBYmlUeXBlSWRbQ2xhcml0eUFiaVR5cGVJZFtcIkNsYXJpdHlBYmlUeXBlUHJpbmNpcGFsXCJdID0gNF0gPSBcIkNsYXJpdHlBYmlUeXBlUHJpbmNpcGFsXCI7XG4gICAgQ2xhcml0eUFiaVR5cGVJZFtDbGFyaXR5QWJpVHlwZUlkW1wiQ2xhcml0eUFiaVR5cGVOb25lXCJdID0gNV0gPSBcIkNsYXJpdHlBYmlUeXBlTm9uZVwiO1xuICAgIENsYXJpdHlBYmlUeXBlSWRbQ2xhcml0eUFiaVR5cGVJZFtcIkNsYXJpdHlBYmlUeXBlQnVmZmVyXCJdID0gNl0gPSBcIkNsYXJpdHlBYmlUeXBlQnVmZmVyXCI7XG4gICAgQ2xhcml0eUFiaVR5cGVJZFtDbGFyaXR5QWJpVHlwZUlkW1wiQ2xhcml0eUFiaVR5cGVSZXNwb25zZVwiXSA9IDddID0gXCJDbGFyaXR5QWJpVHlwZVJlc3BvbnNlXCI7XG4gICAgQ2xhcml0eUFiaVR5cGVJZFtDbGFyaXR5QWJpVHlwZUlkW1wiQ2xhcml0eUFiaVR5cGVPcHRpb25hbFwiXSA9IDhdID0gXCJDbGFyaXR5QWJpVHlwZU9wdGlvbmFsXCI7XG4gICAgQ2xhcml0eUFiaVR5cGVJZFtDbGFyaXR5QWJpVHlwZUlkW1wiQ2xhcml0eUFiaVR5cGVUdXBsZVwiXSA9IDldID0gXCJDbGFyaXR5QWJpVHlwZVR1cGxlXCI7XG4gICAgQ2xhcml0eUFiaVR5cGVJZFtDbGFyaXR5QWJpVHlwZUlkW1wiQ2xhcml0eUFiaVR5cGVMaXN0XCJdID0gMTBdID0gXCJDbGFyaXR5QWJpVHlwZUxpc3RcIjtcbiAgICBDbGFyaXR5QWJpVHlwZUlkW0NsYXJpdHlBYmlUeXBlSWRbXCJDbGFyaXR5QWJpVHlwZVN0cmluZ0FzY2lpXCJdID0gMTFdID0gXCJDbGFyaXR5QWJpVHlwZVN0cmluZ0FzY2lpXCI7XG4gICAgQ2xhcml0eUFiaVR5cGVJZFtDbGFyaXR5QWJpVHlwZUlkW1wiQ2xhcml0eUFiaVR5cGVTdHJpbmdVdGY4XCJdID0gMTJdID0gXCJDbGFyaXR5QWJpVHlwZVN0cmluZ1V0ZjhcIjtcbiAgICBDbGFyaXR5QWJpVHlwZUlkW0NsYXJpdHlBYmlUeXBlSWRbXCJDbGFyaXR5QWJpVHlwZVRyYWl0UmVmZXJlbmNlXCJdID0gMTNdID0gXCJDbGFyaXR5QWJpVHlwZVRyYWl0UmVmZXJlbmNlXCI7XG59KShDbGFyaXR5QWJpVHlwZUlkIHx8IChDbGFyaXR5QWJpVHlwZUlkID0ge30pKTtcbmV4cG9ydCBjb25zdCBpc0NsYXJpdHlBYmlQcmltaXRpdmUgPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcbmV4cG9ydCBjb25zdCBpc0NsYXJpdHlBYmlCdWZmZXIgPSAodmFsKSA9PiB2YWwuYnVmZmVyICE9PSB1bmRlZmluZWQ7XG5leHBvcnQgY29uc3QgaXNDbGFyaXR5QWJpU3RyaW5nQXNjaWkgPSAodmFsKSA9PiB2YWxbJ3N0cmluZy1hc2NpaSddICE9PSB1bmRlZmluZWQ7XG5leHBvcnQgY29uc3QgaXNDbGFyaXR5QWJpU3RyaW5nVXRmOCA9ICh2YWwpID0+IHZhbFsnc3RyaW5nLXV0ZjgnXSAhPT0gdW5kZWZpbmVkO1xuZXhwb3J0IGNvbnN0IGlzQ2xhcml0eUFiaVJlc3BvbnNlID0gKHZhbCkgPT4gdmFsLnJlc3BvbnNlICE9PSB1bmRlZmluZWQ7XG5leHBvcnQgY29uc3QgaXNDbGFyaXR5QWJpT3B0aW9uYWwgPSAodmFsKSA9PiB2YWwub3B0aW9uYWwgIT09IHVuZGVmaW5lZDtcbmV4cG9ydCBjb25zdCBpc0NsYXJpdHlBYmlUdXBsZSA9ICh2YWwpID0+IHZhbC50dXBsZSAhPT0gdW5kZWZpbmVkO1xuZXhwb3J0IGNvbnN0IGlzQ2xhcml0eUFiaUxpc3QgPSAodmFsKSA9PiB2YWwubGlzdCAhPT0gdW5kZWZpbmVkO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFR5cGVVbmlvbih2YWwpIHtcbiAgICBpZiAoaXNDbGFyaXR5QWJpUHJpbWl0aXZlKHZhbCkpIHtcbiAgICAgICAgaWYgKHZhbCA9PT0gJ3VpbnQxMjgnKSB7XG4gICAgICAgICAgICByZXR1cm4geyBpZDogQ2xhcml0eUFiaVR5cGVJZC5DbGFyaXR5QWJpVHlwZVVJbnQxMjgsIHR5cGU6IHZhbCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbCA9PT0gJ2ludDEyOCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGlkOiBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlSW50MTI4LCB0eXBlOiB2YWwgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWwgPT09ICdib29sJykge1xuICAgICAgICAgICAgcmV0dXJuIHsgaWQ6IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVCb29sLCB0eXBlOiB2YWwgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWwgPT09ICdwcmluY2lwYWwnKSB7XG4gICAgICAgICAgICByZXR1cm4geyBpZDogQ2xhcml0eUFiaVR5cGVJZC5DbGFyaXR5QWJpVHlwZVByaW5jaXBhbCwgdHlwZTogdmFsIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsID09PSAndHJhaXRfcmVmZXJlbmNlJykge1xuICAgICAgICAgICAgcmV0dXJuIHsgaWQ6IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVUcmFpdFJlZmVyZW5jZSwgdHlwZTogdmFsIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGlkOiBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlTm9uZSwgdHlwZTogdmFsIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgQ2xhcml0eSBBQkkgdHlwZSBwcmltaXRpdmU6ICR7SlNPTi5zdHJpbmdpZnkodmFsKX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc0NsYXJpdHlBYmlCdWZmZXIodmFsKSkge1xuICAgICAgICByZXR1cm4geyBpZDogQ2xhcml0eUFiaVR5cGVJZC5DbGFyaXR5QWJpVHlwZUJ1ZmZlciwgdHlwZTogdmFsIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ2xhcml0eUFiaVJlc3BvbnNlKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHsgaWQ6IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVSZXNwb25zZSwgdHlwZTogdmFsIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ2xhcml0eUFiaU9wdGlvbmFsKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHsgaWQ6IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVPcHRpb25hbCwgdHlwZTogdmFsIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ2xhcml0eUFiaVR1cGxlKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHsgaWQ6IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVUdXBsZSwgdHlwZTogdmFsIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ2xhcml0eUFiaUxpc3QodmFsKSkge1xuICAgICAgICByZXR1cm4geyBpZDogQ2xhcml0eUFiaVR5cGVJZC5DbGFyaXR5QWJpVHlwZUxpc3QsIHR5cGU6IHZhbCB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0NsYXJpdHlBYmlTdHJpbmdBc2NpaSh2YWwpKSB7XG4gICAgICAgIHJldHVybiB7IGlkOiBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlU3RyaW5nQXNjaWksIHR5cGU6IHZhbCB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0NsYXJpdHlBYmlTdHJpbmdVdGY4KHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHsgaWQ6IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVTdHJpbmdVdGY4LCB0eXBlOiB2YWwgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBDbGFyaXR5IEFCSSB0eXBlOiAke0pTT04uc3RyaW5naWZ5KHZhbCl9YCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZW5jb2RlQ2xhcml0eVZhbHVlKGlucHV0LCB2YWwpIHtcbiAgICBsZXQgdW5pb247XG4gICAgaWYgKGlucHV0LmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdW5pb24gPSBpbnB1dDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHVuaW9uID0gZ2V0VHlwZVVuaW9uKGlucHV0KTtcbiAgICB9XG4gICAgc3dpdGNoICh1bmlvbi5pZCkge1xuICAgICAgICBjYXNlIENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVVSW50MTI4OlxuICAgICAgICAgICAgcmV0dXJuIHVpbnRDVih2YWwpO1xuICAgICAgICBjYXNlIENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVJbnQxMjg6XG4gICAgICAgICAgICByZXR1cm4gaW50Q1YodmFsKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlQm9vbDpcbiAgICAgICAgICAgIGlmICh2YWwgPT09ICdmYWxzZScgfHwgdmFsID09PSAnMCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlQ1YoKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbCA9PT0gJ3RydWUnIHx8IHZhbCA9PT0gJzEnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlQ1YoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgQ2xhcml0eSBib29sIHZhbHVlOiAke0pTT04uc3RyaW5naWZ5KHZhbCl9YCk7XG4gICAgICAgIGNhc2UgQ2xhcml0eUFiaVR5cGVJZC5DbGFyaXR5QWJpVHlwZVByaW5jaXBhbDpcbiAgICAgICAgICAgIGlmICh2YWwuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFthZGRyLCBuYW1lXSA9IHZhbC5zcGxpdCgnLicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250cmFjdFByaW5jaXBhbENWKGFkZHIsIG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkUHJpbmNpcGFsQ1YodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgY2FzZSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlVHJhaXRSZWZlcmVuY2U6XG4gICAgICAgICAgICBjb25zdCBbYWRkciwgbmFtZV0gPSB2YWwuc3BsaXQoJy4nKTtcbiAgICAgICAgICAgIHJldHVybiBjb250cmFjdFByaW5jaXBhbENWKGFkZHIsIG5hbWUpO1xuICAgICAgICBjYXNlIENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVOb25lOlxuICAgICAgICAgICAgcmV0dXJuIG5vbmVDVigpO1xuICAgICAgICBjYXNlIENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVCdWZmZXI6XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyQ1YodXRmOFRvQnl0ZXModmFsKSk7XG4gICAgICAgIGNhc2UgQ2xhcml0eUFiaVR5cGVJZC5DbGFyaXR5QWJpVHlwZVN0cmluZ0FzY2lpOlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ0FzY2lpQ1YodmFsKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlU3RyaW5nVXRmODpcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmdVdGY4Q1YodmFsKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlUmVzcG9uc2U6XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcihgVW5zdXBwb3J0ZWQgZW5jb2RpbmcgZm9yIENsYXJpdHkgdHlwZTogJHt1bmlvbi5pZH1gKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlT3B0aW9uYWw6XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcihgVW5zdXBwb3J0ZWQgZW5jb2RpbmcgZm9yIENsYXJpdHkgdHlwZTogJHt1bmlvbi5pZH1gKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlVHVwbGU6XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcihgVW5zdXBwb3J0ZWQgZW5jb2RpbmcgZm9yIENsYXJpdHkgdHlwZTogJHt1bmlvbi5pZH1gKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlTGlzdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKGBVbnN1cHBvcnRlZCBlbmNvZGluZyBmb3IgQ2xhcml0eSB0eXBlOiAke3VuaW9uLmlkfWApO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIENsYXJpdHkgdHlwZSBJRDogJHtKU09OLnN0cmluZ2lmeSh1bmlvbil9YCk7XG4gICAgfVxufVxuZXhwb3J0IHsgZW5jb2RlQ2xhcml0eVZhbHVlIH07XG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZVN0cmluZyh2YWwpIHtcbiAgICBpZiAoaXNDbGFyaXR5QWJpUHJpbWl0aXZlKHZhbCkpIHtcbiAgICAgICAgaWYgKHZhbCA9PT0gJ2ludDEyOCcpIHtcbiAgICAgICAgICAgIHJldHVybiAnaW50JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWwgPT09ICd1aW50MTI4Jykge1xuICAgICAgICAgICAgcmV0dXJuICd1aW50JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0NsYXJpdHlBYmlCdWZmZXIodmFsKSkge1xuICAgICAgICByZXR1cm4gYChidWZmICR7dmFsLmJ1ZmZlci5sZW5ndGh9KWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ2xhcml0eUFiaVN0cmluZ0FzY2lpKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIGAoc3RyaW5nLWFzY2lpICR7dmFsWydzdHJpbmctYXNjaWknXS5sZW5ndGh9KWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ2xhcml0eUFiaVN0cmluZ1V0ZjgodmFsKSkge1xuICAgICAgICByZXR1cm4gYChzdHJpbmctdXRmOCAke3ZhbFsnc3RyaW5nLXV0ZjgnXS5sZW5ndGh9KWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ2xhcml0eUFiaVJlc3BvbnNlKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIGAocmVzcG9uc2UgJHtnZXRUeXBlU3RyaW5nKHZhbC5yZXNwb25zZS5vayl9ICR7Z2V0VHlwZVN0cmluZyh2YWwucmVzcG9uc2UuZXJyb3IpfSlgO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0NsYXJpdHlBYmlPcHRpb25hbCh2YWwpKSB7XG4gICAgICAgIHJldHVybiBgKG9wdGlvbmFsICR7Z2V0VHlwZVN0cmluZyh2YWwub3B0aW9uYWwpfSlgO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0NsYXJpdHlBYmlUdXBsZSh2YWwpKSB7XG4gICAgICAgIHJldHVybiBgKHR1cGxlICR7dmFsLnR1cGxlLm1hcCh0ID0+IGAoJHt0Lm5hbWV9ICR7Z2V0VHlwZVN0cmluZyh0LnR5cGUpfSlgKS5qb2luKCcgJyl9KWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ2xhcml0eUFiaUxpc3QodmFsKSkge1xuICAgICAgICByZXR1cm4gYChsaXN0ICR7dmFsLmxpc3QubGVuZ3RofSAke2dldFR5cGVTdHJpbmcodmFsLmxpc3QudHlwZSl9KWA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFR5cGUgc3RyaW5nIHVuc3VwcG9ydGVkIGZvciBDbGFyaXR5IHR5cGU6ICR7SlNPTi5zdHJpbmdpZnkodmFsKX1gKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWJpRnVuY3Rpb25Ub1N0cmluZyhmdW5jKSB7XG4gICAgY29uc3QgYWNjZXNzID0gZnVuYy5hY2Nlc3MgPT09ICdyZWFkX29ubHknID8gJ3JlYWQtb25seScgOiBmdW5jLmFjY2VzcztcbiAgICByZXR1cm4gYChkZWZpbmUtJHthY2Nlc3N9ICgke2Z1bmMubmFtZX0gJHtmdW5jLmFyZ3NcbiAgICAgICAgLm1hcChhcmcgPT4gYCgke2FyZy5uYW1lfSAke2dldFR5cGVTdHJpbmcoYXJnLnR5cGUpfSlgKVxuICAgICAgICAuam9pbignICcpfSkpYDtcbn1cbmZ1bmN0aW9uIG1hdGNoVHlwZShjdiwgYWJpVHlwZSkge1xuICAgIGNvbnN0IHVuaW9uID0gZ2V0VHlwZVVuaW9uKGFiaVR5cGUpO1xuICAgIHN3aXRjaCAoY3YudHlwZSkge1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLkJvb2xUcnVlOlxuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLkJvb2xGYWxzZTpcbiAgICAgICAgICAgIHJldHVybiB1bmlvbi5pZCA9PT0gQ2xhcml0eUFiaVR5cGVJZC5DbGFyaXR5QWJpVHlwZUJvb2w7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuSW50OlxuICAgICAgICAgICAgcmV0dXJuIHVuaW9uLmlkID09PSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlSW50MTI4O1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlVJbnQ6XG4gICAgICAgICAgICByZXR1cm4gdW5pb24uaWQgPT09IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVVSW50MTI4O1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLkJ1ZmZlcjpcbiAgICAgICAgICAgIHJldHVybiAodW5pb24uaWQgPT09IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVCdWZmZXIgJiZcbiAgICAgICAgICAgICAgICB1bmlvbi50eXBlLmJ1ZmZlci5sZW5ndGggPj0gY3YuYnVmZmVyLmxlbmd0aCk7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuU3RyaW5nQVNDSUk6XG4gICAgICAgICAgICByZXR1cm4gKHVuaW9uLmlkID09PSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlU3RyaW5nQXNjaWkgJiZcbiAgICAgICAgICAgICAgICB1bmlvbi50eXBlWydzdHJpbmctYXNjaWknXS5sZW5ndGggPj0gY3YuZGF0YS5sZW5ndGgpO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlN0cmluZ1VURjg6XG4gICAgICAgICAgICByZXR1cm4gKHVuaW9uLmlkID09PSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlU3RyaW5nVXRmOCAmJlxuICAgICAgICAgICAgICAgIHVuaW9uLnR5cGVbJ3N0cmluZy11dGY4J10ubGVuZ3RoID49IGN2LmRhdGEubGVuZ3RoKTtcbiAgICAgICAgY2FzZSBDbGFyaXR5VHlwZS5PcHRpb25hbE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gKHVuaW9uLmlkID09PSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlTm9uZSB8fFxuICAgICAgICAgICAgICAgIHVuaW9uLmlkID09PSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlT3B0aW9uYWwpO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLk9wdGlvbmFsU29tZTpcbiAgICAgICAgICAgIHJldHVybiAodW5pb24uaWQgPT09IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVPcHRpb25hbCAmJlxuICAgICAgICAgICAgICAgIG1hdGNoVHlwZShjdi52YWx1ZSwgdW5pb24udHlwZS5vcHRpb25hbCkpO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlJlc3BvbnNlRXJyOlxuICAgICAgICAgICAgcmV0dXJuICh1bmlvbi5pZCA9PT0gQ2xhcml0eUFiaVR5cGVJZC5DbGFyaXR5QWJpVHlwZVJlc3BvbnNlICYmXG4gICAgICAgICAgICAgICAgbWF0Y2hUeXBlKGN2LnZhbHVlLCB1bmlvbi50eXBlLnJlc3BvbnNlLmVycm9yKSk7XG4gICAgICAgIGNhc2UgQ2xhcml0eVR5cGUuUmVzcG9uc2VPazpcbiAgICAgICAgICAgIHJldHVybiAodW5pb24uaWQgPT09IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVSZXNwb25zZSAmJlxuICAgICAgICAgICAgICAgIG1hdGNoVHlwZShjdi52YWx1ZSwgdW5pb24udHlwZS5yZXNwb25zZS5vaykpO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlByaW5jaXBhbENvbnRyYWN0OlxuICAgICAgICAgICAgcmV0dXJuICh1bmlvbi5pZCA9PT0gQ2xhcml0eUFiaVR5cGVJZC5DbGFyaXR5QWJpVHlwZVByaW5jaXBhbCB8fFxuICAgICAgICAgICAgICAgIHVuaW9uLmlkID09PSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlVHJhaXRSZWZlcmVuY2UpO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlByaW5jaXBhbFN0YW5kYXJkOlxuICAgICAgICAgICAgcmV0dXJuIHVuaW9uLmlkID09PSBDbGFyaXR5QWJpVHlwZUlkLkNsYXJpdHlBYmlUeXBlUHJpbmNpcGFsO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLkxpc3Q6XG4gICAgICAgICAgICByZXR1cm4gKHVuaW9uLmlkID09IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVMaXN0ICYmXG4gICAgICAgICAgICAgICAgdW5pb24udHlwZS5saXN0Lmxlbmd0aCA+PSBjdi5saXN0Lmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIGN2Lmxpc3QuZXZlcnkodmFsID0+IG1hdGNoVHlwZSh2YWwsIHVuaW9uLnR5cGUubGlzdC50eXBlKSkpO1xuICAgICAgICBjYXNlIENsYXJpdHlUeXBlLlR1cGxlOlxuICAgICAgICAgICAgaWYgKHVuaW9uLmlkID09IENsYXJpdHlBYmlUeXBlSWQuQ2xhcml0eUFiaVR5cGVUdXBsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR1cGxlID0gY2xvbmVEZWVwKGN2LmRhdGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdW5pb24udHlwZS50dXBsZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhYmlUdXBsZUVudHJ5ID0gdW5pb24udHlwZS50dXBsZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYWJpVHVwbGVFbnRyeS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB0dXBsZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGNoVHlwZSh2YWwsIGFiaVR1cGxlRW50cnkudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdHVwbGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVDb250cmFjdENhbGwocGF5bG9hZCwgYWJpKSB7XG4gICAgY29uc3QgZmlsdGVyZWQgPSBhYmkuZnVuY3Rpb25zLmZpbHRlcihmbiA9PiBmbi5uYW1lID09PSBwYXlsb2FkLmZ1bmN0aW9uTmFtZS5jb250ZW50KTtcbiAgICBpZiAoZmlsdGVyZWQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IGFiaUZ1bmMgPSBmaWx0ZXJlZFswXTtcbiAgICAgICAgY29uc3QgYWJpQXJncyA9IGFiaUZ1bmMuYXJncztcbiAgICAgICAgaWYgKHBheWxvYWQuZnVuY3Rpb25BcmdzLmxlbmd0aCAhPT0gYWJpQXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xhcml0eSBmdW5jdGlvbiBleHBlY3RzICR7YWJpQXJncy5sZW5ndGh9IGFyZ3VtZW50KHMpIGJ1dCByZWNlaXZlZCAke3BheWxvYWQuZnVuY3Rpb25BcmdzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBheWxvYWQuZnVuY3Rpb25BcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkQXJnID0gcGF5bG9hZC5mdW5jdGlvbkFyZ3NbaV07XG4gICAgICAgICAgICBjb25zdCBhYmlBcmcgPSBhYmlBcmdzW2ldO1xuICAgICAgICAgICAgaWYgKCFtYXRjaFR5cGUocGF5bG9hZEFyZywgYWJpQXJnLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJnTnVtID0gaSArIDE7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDbGFyaXR5IGZ1bmN0aW9uIFxcYCR7cGF5bG9hZC5mdW5jdGlvbk5hbWUuY29udGVudH1cXGAgZXhwZWN0cyBhcmd1bWVudCAke2FyZ051bX0gdG8gYmUgb2YgdHlwZSAke2dldFR5cGVTdHJpbmcoYWJpQXJnLnR5cGUpfSwgbm90ICR7Z2V0Q1ZUeXBlU3RyaW5nKHBheWxvYWRBcmcpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChmaWx0ZXJlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBQkkgZG9lc24ndCBjb250YWluIGEgZnVuY3Rpb24gd2l0aCB0aGUgbmFtZSAke3BheWxvYWQuZnVuY3Rpb25OYW1lLmNvbnRlbnR9YCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbGZvcm1lZCBBQkkuIENvbnRhaW5zIG11bHRpcGxlIGZ1bmN0aW9ucyB3aXRoIHRoZSBuYW1lICR7cGF5bG9hZC5mdW5jdGlvbk5hbWUuY29udGVudH1gKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUb0NWKGlucHV0LCB0eXBlKSB7XG4gICAgY29uc3QgdHlwZVN0cmluZyA9IGdldFR5cGVTdHJpbmcodHlwZSk7XG4gICAgaWYgKGlzQ2xhcml0eUFiaVByaW1pdGl2ZSh0eXBlKSkge1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3VpbnQxMjgnKSB7XG4gICAgICAgICAgICByZXR1cm4gdWludENWKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnaW50MTI4Jykge1xuICAgICAgICAgICAgcmV0dXJuIGludENWKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnYm9vbCcpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZUNWKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnB1dC50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlQ1YoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBib29sIHZhbHVlOiAke2lucHV0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdwcmluY2lwYWwnKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFthZGRyZXNzLCBjb250cmFjdE5hbWVdID0gaW5wdXQuc3BsaXQoJy4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udHJhY3RQcmluY2lwYWxDVihhZGRyZXNzLCBjb250cmFjdE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkUHJpbmNpcGFsQ1YoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb250cmFjdCBmdW5jdGlvbiBjb250YWlucyB1bnN1cHBvcnRlZCBDbGFyaXR5IEFCSSB0eXBlOiAke3R5cGVTdHJpbmd9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNDbGFyaXR5QWJpQnVmZmVyKHR5cGUpKSB7XG4gICAgICAgIGNvbnN0IGlucHV0TGVuZ3RoID0gdXRmOFRvQnl0ZXMoaW5wdXQpLmJ5dGVMZW5ndGg7XG4gICAgICAgIGlmIChpbnB1dExlbmd0aCA+IHR5cGUuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnB1dCBleGNlZWRzIHNwZWNpZmllZCBidWZmZXIgbGVuZ3RoIGxpbWl0IG9mICR7dHlwZS5idWZmZXIubGVuZ3RofWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmZXJDVkZyb21TdHJpbmcoaW5wdXQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0NsYXJpdHlBYmlSZXNwb25zZSh0eXBlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbnRyYWN0IGZ1bmN0aW9uIGNvbnRhaW5zIHVuc3VwcG9ydGVkIENsYXJpdHkgQUJJIHR5cGU6ICR7dHlwZVN0cmluZ31gKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNDbGFyaXR5QWJpT3B0aW9uYWwodHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb250cmFjdCBmdW5jdGlvbiBjb250YWlucyB1bnN1cHBvcnRlZCBDbGFyaXR5IEFCSSB0eXBlOiAke3R5cGVTdHJpbmd9YCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQ2xhcml0eUFiaVR1cGxlKHR5cGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udHJhY3QgZnVuY3Rpb24gY29udGFpbnMgdW5zdXBwb3J0ZWQgQ2xhcml0eSBBQkkgdHlwZTogJHt0eXBlU3RyaW5nfWApO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0NsYXJpdHlBYmlMaXN0KHR5cGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udHJhY3QgZnVuY3Rpb24gY29udGFpbnMgdW5zdXBwb3J0ZWQgQ2xhcml0eSBBQkkgdHlwZTogJHt0eXBlU3RyaW5nfWApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb250cmFjdCBmdW5jdGlvbiBjb250YWlucyB1bnN1cHBvcnRlZCBDbGFyaXR5IEFCSSB0eXBlOiAke3R5cGVTdHJpbmd9YCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udHJhY3QtYWJpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/contract-abi.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/postcondition.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@stacks/transactions/dist/esm/postcondition.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFungiblePostCondition: function() { return /* binding */ createFungiblePostCondition; },\n/* harmony export */   createNonFungiblePostCondition: function() { return /* binding */ createNonFungiblePostCondition; },\n/* harmony export */   createSTXPostCondition: function() { return /* binding */ createSTXPostCondition; }\n/* harmony export */ });\n/* harmony import */ var _stacks_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stacks/common */ \"(app-pages-browser)/./node_modules/@stacks/common/dist/esm/utils.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/constants.js\");\n/* harmony import */ var _postcondition_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./postcondition-types */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/postcondition-types.js\");\n\n\n\nfunction createSTXPostCondition(principal, conditionCode, amount) {\n    if (typeof principal === 'string') {\n        principal = (0,_postcondition_types__WEBPACK_IMPORTED_MODULE_0__.parsePrincipalString)(principal);\n    }\n    return {\n        type: _constants__WEBPACK_IMPORTED_MODULE_1__.StacksMessageType.PostCondition,\n        conditionType: _constants__WEBPACK_IMPORTED_MODULE_1__.PostConditionType.STX,\n        principal,\n        conditionCode,\n        amount: (0,_stacks_common__WEBPACK_IMPORTED_MODULE_2__.intToBigInt)(amount, false),\n    };\n}\nfunction createFungiblePostCondition(principal, conditionCode, amount, assetInfo) {\n    if (typeof principal === 'string') {\n        principal = (0,_postcondition_types__WEBPACK_IMPORTED_MODULE_0__.parsePrincipalString)(principal);\n    }\n    if (typeof assetInfo === 'string') {\n        assetInfo = (0,_postcondition_types__WEBPACK_IMPORTED_MODULE_0__.parseAssetInfoString)(assetInfo);\n    }\n    return {\n        type: _constants__WEBPACK_IMPORTED_MODULE_1__.StacksMessageType.PostCondition,\n        conditionType: _constants__WEBPACK_IMPORTED_MODULE_1__.PostConditionType.Fungible,\n        principal,\n        conditionCode,\n        amount: (0,_stacks_common__WEBPACK_IMPORTED_MODULE_2__.intToBigInt)(amount, false),\n        assetInfo,\n    };\n}\nfunction createNonFungiblePostCondition(principal, conditionCode, assetInfo, assetName) {\n    if (typeof principal === 'string') {\n        principal = (0,_postcondition_types__WEBPACK_IMPORTED_MODULE_0__.parsePrincipalString)(principal);\n    }\n    if (typeof assetInfo === 'string') {\n        assetInfo = (0,_postcondition_types__WEBPACK_IMPORTED_MODULE_0__.parseAssetInfoString)(assetInfo);\n    }\n    return {\n        type: _constants__WEBPACK_IMPORTED_MODULE_1__.StacksMessageType.PostCondition,\n        conditionType: _constants__WEBPACK_IMPORTED_MODULE_1__.PostConditionType.NonFungible,\n        principal,\n        conditionCode,\n        assetInfo,\n        assetName,\n    };\n}\n//# sourceMappingURL=postcondition.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tzL3RyYW5zYWN0aW9ucy9kaXN0L2VzbS9wb3N0Y29uZGl0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE2QztBQUN1QjtBQUNnQjtBQUM3RTtBQUNQO0FBQ0Esb0JBQW9CLDBFQUFvQjtBQUN4QztBQUNBO0FBQ0EsY0FBYyx5REFBaUI7QUFDL0IsdUJBQXVCLHlEQUFpQjtBQUN4QztBQUNBO0FBQ0EsZ0JBQWdCLDJEQUFXO0FBQzNCO0FBQ0E7QUFDTztBQUNQO0FBQ0Esb0JBQW9CLDBFQUFvQjtBQUN4QztBQUNBO0FBQ0Esb0JBQW9CLDBFQUFvQjtBQUN4QztBQUNBO0FBQ0EsY0FBYyx5REFBaUI7QUFDL0IsdUJBQXVCLHlEQUFpQjtBQUN4QztBQUNBO0FBQ0EsZ0JBQWdCLDJEQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxvQkFBb0IsMEVBQW9CO0FBQ3hDO0FBQ0E7QUFDQSxvQkFBb0IsMEVBQW9CO0FBQ3hDO0FBQ0E7QUFDQSxjQUFjLHlEQUFpQjtBQUMvQix1QkFBdUIseURBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tzL3RyYW5zYWN0aW9ucy9kaXN0L2VzbS9wb3N0Y29uZGl0aW9uLmpzPzI4OWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW50VG9CaWdJbnQgfSBmcm9tICdAc3RhY2tzL2NvbW1vbic7XG5pbXBvcnQgeyBQb3N0Q29uZGl0aW9uVHlwZSwgU3RhY2tzTWVzc2FnZVR5cGUsIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgcGFyc2VBc3NldEluZm9TdHJpbmcsIHBhcnNlUHJpbmNpcGFsU3RyaW5nLCB9IGZyb20gJy4vcG9zdGNvbmRpdGlvbi10eXBlcyc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU1RYUG9zdENvbmRpdGlvbihwcmluY2lwYWwsIGNvbmRpdGlvbkNvZGUsIGFtb3VudCkge1xuICAgIGlmICh0eXBlb2YgcHJpbmNpcGFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBwcmluY2lwYWwgPSBwYXJzZVByaW5jaXBhbFN0cmluZyhwcmluY2lwYWwpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBTdGFja3NNZXNzYWdlVHlwZS5Qb3N0Q29uZGl0aW9uLFxuICAgICAgICBjb25kaXRpb25UeXBlOiBQb3N0Q29uZGl0aW9uVHlwZS5TVFgsXG4gICAgICAgIHByaW5jaXBhbCxcbiAgICAgICAgY29uZGl0aW9uQ29kZSxcbiAgICAgICAgYW1vdW50OiBpbnRUb0JpZ0ludChhbW91bnQsIGZhbHNlKSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZ1bmdpYmxlUG9zdENvbmRpdGlvbihwcmluY2lwYWwsIGNvbmRpdGlvbkNvZGUsIGFtb3VudCwgYXNzZXRJbmZvKSB7XG4gICAgaWYgKHR5cGVvZiBwcmluY2lwYWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHByaW5jaXBhbCA9IHBhcnNlUHJpbmNpcGFsU3RyaW5nKHByaW5jaXBhbCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXNzZXRJbmZvID09PSAnc3RyaW5nJykge1xuICAgICAgICBhc3NldEluZm8gPSBwYXJzZUFzc2V0SW5mb1N0cmluZyhhc3NldEluZm8pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBTdGFja3NNZXNzYWdlVHlwZS5Qb3N0Q29uZGl0aW9uLFxuICAgICAgICBjb25kaXRpb25UeXBlOiBQb3N0Q29uZGl0aW9uVHlwZS5GdW5naWJsZSxcbiAgICAgICAgcHJpbmNpcGFsLFxuICAgICAgICBjb25kaXRpb25Db2RlLFxuICAgICAgICBhbW91bnQ6IGludFRvQmlnSW50KGFtb3VudCwgZmFsc2UpLFxuICAgICAgICBhc3NldEluZm8sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOb25GdW5naWJsZVBvc3RDb25kaXRpb24ocHJpbmNpcGFsLCBjb25kaXRpb25Db2RlLCBhc3NldEluZm8sIGFzc2V0TmFtZSkge1xuICAgIGlmICh0eXBlb2YgcHJpbmNpcGFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBwcmluY2lwYWwgPSBwYXJzZVByaW5jaXBhbFN0cmluZyhwcmluY2lwYWwpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGFzc2V0SW5mbyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgYXNzZXRJbmZvID0gcGFyc2VBc3NldEluZm9TdHJpbmcoYXNzZXRJbmZvKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogU3RhY2tzTWVzc2FnZVR5cGUuUG9zdENvbmRpdGlvbixcbiAgICAgICAgY29uZGl0aW9uVHlwZTogUG9zdENvbmRpdGlvblR5cGUuTm9uRnVuZ2libGUsXG4gICAgICAgIHByaW5jaXBhbCxcbiAgICAgICAgY29uZGl0aW9uQ29kZSxcbiAgICAgICAgYXNzZXRJbmZvLFxuICAgICAgICBhc3NldE5hbWUsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvc3Rjb25kaXRpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/postcondition.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/signer.js":
/*!**************************************************************!*\
  !*** ./node_modules/@stacks/transactions/dist/esm/signer.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TransactionSigner: function() { return /* binding */ TransactionSigner; }\n/* harmony export */ });\n/* harmony import */ var _authorization__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./authorization */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/authorization.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/utils.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/constants.js\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/errors.js\");\n\n\n\n\nclass TransactionSigner {\n    constructor(transaction) {\n        this.transaction = transaction;\n        this.sigHash = transaction.signBegin();\n        this.originDone = false;\n        this.checkOversign = true;\n        this.checkOverlap = true;\n        const spendingCondition = transaction.auth.spendingCondition;\n        if (spendingCondition && !(0,_authorization__WEBPACK_IMPORTED_MODULE_0__.isSingleSig)(spendingCondition)) {\n            if (spendingCondition.fields.filter(field => field.contents.type === _constants__WEBPACK_IMPORTED_MODULE_1__.StacksMessageType.MessageSignature).length >= spendingCondition.signaturesRequired) {\n                throw new Error('SpendingCondition has more signatures than are expected');\n            }\n            spendingCondition.fields.forEach(field => {\n                if (field.contents.type === _constants__WEBPACK_IMPORTED_MODULE_1__.StacksMessageType.MessageSignature) {\n                    const signature = field.contents;\n                    const nextVerify = (0,_authorization__WEBPACK_IMPORTED_MODULE_0__.nextVerification)(this.sigHash, transaction.auth.authType, spendingCondition.fee, spendingCondition.nonce, _constants__WEBPACK_IMPORTED_MODULE_1__.PubKeyEncoding.Compressed, signature);\n                    this.sigHash = nextVerify.nextSigHash;\n                }\n            });\n        }\n    }\n    static createSponsorSigner(transaction, spendingCondition) {\n        if (transaction.auth.authType != _constants__WEBPACK_IMPORTED_MODULE_1__.AuthType.Sponsored) {\n            throw new _errors__WEBPACK_IMPORTED_MODULE_2__.SigningError('Cannot add sponsor to non-sponsored transaction');\n        }\n        const tx = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.cloneDeep)(transaction);\n        tx.setSponsor(spendingCondition);\n        const originSigHash = tx.verifyOrigin();\n        const signer = new this(tx);\n        signer.originDone = true;\n        signer.sigHash = originSigHash;\n        signer.checkOversign = true;\n        signer.checkOverlap = true;\n        return signer;\n    }\n    signOrigin(privateKey) {\n        if (this.checkOverlap && this.originDone) {\n            throw new _errors__WEBPACK_IMPORTED_MODULE_2__.SigningError('Cannot sign origin after sponsor key');\n        }\n        if (this.transaction.auth === undefined) {\n            throw new _errors__WEBPACK_IMPORTED_MODULE_2__.SigningError('\"transaction.auth\" is undefined');\n        }\n        if (this.transaction.auth.spendingCondition === undefined) {\n            throw new _errors__WEBPACK_IMPORTED_MODULE_2__.SigningError('\"transaction.auth.spendingCondition\" is undefined');\n        }\n        if (!(0,_authorization__WEBPACK_IMPORTED_MODULE_0__.isSingleSig)(this.transaction.auth.spendingCondition)) {\n            const spendingCondition = this.transaction.auth.spendingCondition;\n            if (this.checkOversign &&\n                spendingCondition.fields.filter(field => field.contents.type === _constants__WEBPACK_IMPORTED_MODULE_1__.StacksMessageType.MessageSignature).length >= spendingCondition.signaturesRequired) {\n                throw new Error('Origin would have too many signatures');\n            }\n        }\n        const nextSighash = this.transaction.signNextOrigin(this.sigHash, privateKey);\n        this.sigHash = nextSighash;\n    }\n    appendOrigin(publicKey) {\n        if (this.checkOverlap && this.originDone) {\n            throw Error('Cannot append public key to origin after sponsor key');\n        }\n        if (this.transaction.auth === undefined) {\n            throw new Error('\"transaction.auth\" is undefined');\n        }\n        if (this.transaction.auth.spendingCondition === undefined) {\n            throw new Error('\"transaction.auth.spendingCondition\" is undefined');\n        }\n        this.transaction.appendPubkey(publicKey);\n    }\n    signSponsor(privateKey) {\n        if (this.transaction.auth === undefined) {\n            throw new _errors__WEBPACK_IMPORTED_MODULE_2__.SigningError('\"transaction.auth\" is undefined');\n        }\n        if (this.transaction.auth.authType !== _constants__WEBPACK_IMPORTED_MODULE_1__.AuthType.Sponsored) {\n            throw new _errors__WEBPACK_IMPORTED_MODULE_2__.SigningError('\"transaction.auth.authType\" is not AuthType.Sponsored');\n        }\n        const nextSighash = this.transaction.signNextSponsor(this.sigHash, privateKey);\n        this.sigHash = nextSighash;\n        this.originDone = true;\n    }\n    getTxInComplete() {\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_3__.cloneDeep)(this.transaction);\n    }\n    resume(transaction) {\n        this.transaction = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.cloneDeep)(transaction);\n        this.sigHash = transaction.signBegin();\n    }\n}\n//# sourceMappingURL=signer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RhY2tzL3RyYW5zYWN0aW9ucy9kaXN0L2VzbS9zaWduZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBZ0U7QUFDNUI7QUFDc0M7QUFDbEM7QUFDakM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyREFBVztBQUM3QyxpRkFBaUYseURBQWlCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx5REFBaUI7QUFDN0Q7QUFDQSx1Q0FBdUMsZ0VBQWdCLDBGQUEwRixzREFBYztBQUMvSjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxnREFBUTtBQUNqRCxzQkFBc0IsaURBQVk7QUFDbEM7QUFDQSxtQkFBbUIsaURBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpREFBWTtBQUNsQztBQUNBO0FBQ0Esc0JBQXNCLGlEQUFZO0FBQ2xDO0FBQ0E7QUFDQSxzQkFBc0IsaURBQVk7QUFDbEM7QUFDQSxhQUFhLDJEQUFXO0FBQ3hCO0FBQ0E7QUFDQSxpRkFBaUYseURBQWlCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsaURBQVk7QUFDbEM7QUFDQSwrQ0FBK0MsZ0RBQVE7QUFDdkQsc0JBQXNCLGlEQUFZO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaURBQVM7QUFDeEI7QUFDQTtBQUNBLDJCQUEyQixpREFBUztBQUNwQztBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQHN0YWNrcy90cmFuc2FjdGlvbnMvZGlzdC9lc20vc2lnbmVyLmpzP2JlMDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNTaW5nbGVTaWcsIG5leHRWZXJpZmljYXRpb24gfSBmcm9tICcuL2F1dGhvcml6YXRpb24nO1xuaW1wb3J0IHsgY2xvbmVEZWVwIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBBdXRoVHlwZSwgUHViS2V5RW5jb2RpbmcsIFN0YWNrc01lc3NhZ2VUeXBlIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgU2lnbmluZ0Vycm9yIH0gZnJvbSAnLi9lcnJvcnMnO1xuZXhwb3J0IGNsYXNzIFRyYW5zYWN0aW9uU2lnbmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0cmFuc2FjdGlvbikge1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb247XG4gICAgICAgIHRoaXMuc2lnSGFzaCA9IHRyYW5zYWN0aW9uLnNpZ25CZWdpbigpO1xuICAgICAgICB0aGlzLm9yaWdpbkRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jaGVja092ZXJzaWduID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jaGVja092ZXJsYXAgPSB0cnVlO1xuICAgICAgICBjb25zdCBzcGVuZGluZ0NvbmRpdGlvbiA9IHRyYW5zYWN0aW9uLmF1dGguc3BlbmRpbmdDb25kaXRpb247XG4gICAgICAgIGlmIChzcGVuZGluZ0NvbmRpdGlvbiAmJiAhaXNTaW5nbGVTaWcoc3BlbmRpbmdDb25kaXRpb24pKSB7XG4gICAgICAgICAgICBpZiAoc3BlbmRpbmdDb25kaXRpb24uZmllbGRzLmZpbHRlcihmaWVsZCA9PiBmaWVsZC5jb250ZW50cy50eXBlID09PSBTdGFja3NNZXNzYWdlVHlwZS5NZXNzYWdlU2lnbmF0dXJlKS5sZW5ndGggPj0gc3BlbmRpbmdDb25kaXRpb24uc2lnbmF0dXJlc1JlcXVpcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTcGVuZGluZ0NvbmRpdGlvbiBoYXMgbW9yZSBzaWduYXR1cmVzIHRoYW4gYXJlIGV4cGVjdGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcGVuZGluZ0NvbmRpdGlvbi5maWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmNvbnRlbnRzLnR5cGUgPT09IFN0YWNrc01lc3NhZ2VUeXBlLk1lc3NhZ2VTaWduYXR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gZmllbGQuY29udGVudHM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRWZXJpZnkgPSBuZXh0VmVyaWZpY2F0aW9uKHRoaXMuc2lnSGFzaCwgdHJhbnNhY3Rpb24uYXV0aC5hdXRoVHlwZSwgc3BlbmRpbmdDb25kaXRpb24uZmVlLCBzcGVuZGluZ0NvbmRpdGlvbi5ub25jZSwgUHViS2V5RW5jb2RpbmcuQ29tcHJlc3NlZCwgc2lnbmF0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWdIYXNoID0gbmV4dFZlcmlmeS5uZXh0U2lnSGFzaDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlU3BvbnNvclNpZ25lcih0cmFuc2FjdGlvbiwgc3BlbmRpbmdDb25kaXRpb24pIHtcbiAgICAgICAgaWYgKHRyYW5zYWN0aW9uLmF1dGguYXV0aFR5cGUgIT0gQXV0aFR5cGUuU3BvbnNvcmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU2lnbmluZ0Vycm9yKCdDYW5ub3QgYWRkIHNwb25zb3IgdG8gbm9uLXNwb25zb3JlZCB0cmFuc2FjdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHR4ID0gY2xvbmVEZWVwKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgdHguc2V0U3BvbnNvcihzcGVuZGluZ0NvbmRpdGlvbik7XG4gICAgICAgIGNvbnN0IG9yaWdpblNpZ0hhc2ggPSB0eC52ZXJpZnlPcmlnaW4oKTtcbiAgICAgICAgY29uc3Qgc2lnbmVyID0gbmV3IHRoaXModHgpO1xuICAgICAgICBzaWduZXIub3JpZ2luRG9uZSA9IHRydWU7XG4gICAgICAgIHNpZ25lci5zaWdIYXNoID0gb3JpZ2luU2lnSGFzaDtcbiAgICAgICAgc2lnbmVyLmNoZWNrT3ZlcnNpZ24gPSB0cnVlO1xuICAgICAgICBzaWduZXIuY2hlY2tPdmVybGFwID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHNpZ25lcjtcbiAgICB9XG4gICAgc2lnbk9yaWdpbihwcml2YXRlS2V5KSB7XG4gICAgICAgIGlmICh0aGlzLmNoZWNrT3ZlcmxhcCAmJiB0aGlzLm9yaWdpbkRvbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTaWduaW5nRXJyb3IoJ0Nhbm5vdCBzaWduIG9yaWdpbiBhZnRlciBzcG9uc29yIGtleScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmF1dGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNpZ25pbmdFcnJvcignXCJ0cmFuc2FjdGlvbi5hdXRoXCIgaXMgdW5kZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb24uYXV0aC5zcGVuZGluZ0NvbmRpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU2lnbmluZ0Vycm9yKCdcInRyYW5zYWN0aW9uLmF1dGguc3BlbmRpbmdDb25kaXRpb25cIiBpcyB1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzU2luZ2xlU2lnKHRoaXMudHJhbnNhY3Rpb24uYXV0aC5zcGVuZGluZ0NvbmRpdGlvbikpIHtcbiAgICAgICAgICAgIGNvbnN0IHNwZW5kaW5nQ29uZGl0aW9uID0gdGhpcy50cmFuc2FjdGlvbi5hdXRoLnNwZW5kaW5nQ29uZGl0aW9uO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tPdmVyc2lnbiAmJlxuICAgICAgICAgICAgICAgIHNwZW5kaW5nQ29uZGl0aW9uLmZpZWxkcy5maWx0ZXIoZmllbGQgPT4gZmllbGQuY29udGVudHMudHlwZSA9PT0gU3RhY2tzTWVzc2FnZVR5cGUuTWVzc2FnZVNpZ25hdHVyZSkubGVuZ3RoID49IHNwZW5kaW5nQ29uZGl0aW9uLnNpZ25hdHVyZXNSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT3JpZ2luIHdvdWxkIGhhdmUgdG9vIG1hbnkgc2lnbmF0dXJlcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHRTaWdoYXNoID0gdGhpcy50cmFuc2FjdGlvbi5zaWduTmV4dE9yaWdpbih0aGlzLnNpZ0hhc2gsIHByaXZhdGVLZXkpO1xuICAgICAgICB0aGlzLnNpZ0hhc2ggPSBuZXh0U2lnaGFzaDtcbiAgICB9XG4gICAgYXBwZW5kT3JpZ2luKHB1YmxpY0tleSkge1xuICAgICAgICBpZiAodGhpcy5jaGVja092ZXJsYXAgJiYgdGhpcy5vcmlnaW5Eb25lKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignQ2Fubm90IGFwcGVuZCBwdWJsaWMga2V5IHRvIG9yaWdpbiBhZnRlciBzcG9uc29yIGtleScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmF1dGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcInRyYW5zYWN0aW9uLmF1dGhcIiBpcyB1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5hdXRoLnNwZW5kaW5nQ29uZGl0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXCJ0cmFuc2FjdGlvbi5hdXRoLnNwZW5kaW5nQ29uZGl0aW9uXCIgaXMgdW5kZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbi5hcHBlbmRQdWJrZXkocHVibGljS2V5KTtcbiAgICB9XG4gICAgc2lnblNwb25zb3IocHJpdmF0ZUtleSkge1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbi5hdXRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTaWduaW5nRXJyb3IoJ1widHJhbnNhY3Rpb24uYXV0aFwiIGlzIHVuZGVmaW5lZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uLmF1dGguYXV0aFR5cGUgIT09IEF1dGhUeXBlLlNwb25zb3JlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNpZ25pbmdFcnJvcignXCJ0cmFuc2FjdGlvbi5hdXRoLmF1dGhUeXBlXCIgaXMgbm90IEF1dGhUeXBlLlNwb25zb3JlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHRTaWdoYXNoID0gdGhpcy50cmFuc2FjdGlvbi5zaWduTmV4dFNwb25zb3IodGhpcy5zaWdIYXNoLCBwcml2YXRlS2V5KTtcbiAgICAgICAgdGhpcy5zaWdIYXNoID0gbmV4dFNpZ2hhc2g7XG4gICAgICAgIHRoaXMub3JpZ2luRG9uZSA9IHRydWU7XG4gICAgfVxuICAgIGdldFR4SW5Db21wbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGNsb25lRGVlcCh0aGlzLnRyYW5zYWN0aW9uKTtcbiAgICB9XG4gICAgcmVzdW1lKHRyYW5zYWN0aW9uKSB7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24gPSBjbG9uZURlZXAodHJhbnNhY3Rpb24pO1xuICAgICAgICB0aGlzLnNpZ0hhc2ggPSB0cmFuc2FjdGlvbi5zaWduQmVnaW4oKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaWduZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/signer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/stacks.ts":
/*!***************************!*\
  !*** ./src/lib/stacks.ts ***!
  \***************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   USDC_CONTRACT: function() { return /* binding */ USDC_CONTRACT; },\n/* harmony export */   VOICE_TRANSFER_CONTRACT: function() { return /* binding */ VOICE_TRANSFER_CONTRACT; },\n/* harmony export */   appDetails: function() { return /* binding */ appDetails; },\n/* harmony export */   authenticate: function() { return /* binding */ authenticate; },\n/* harmony export */   depositToVault: function() { return /* binding */ depositToVault; },\n/* harmony export */   disconnect: function() { return /* binding */ disconnect; },\n/* harmony export */   getUserAddress: function() { return /* binding */ getUserAddress; },\n/* harmony export */   getVaultBalance: function() { return /* binding */ getVaultBalance; },\n/* harmony export */   network: function() { return /* binding */ network; },\n/* harmony export */   userSession: function() { return /* binding */ userSession; },\n/* harmony export */   withdrawFromVault: function() { return /* binding */ withdrawFromVault; }\n/* harmony export */ });\n/* harmony import */ var _stacks_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stacks/connect */ \"(app-pages-browser)/./node_modules/@stacks/auth/dist/esm/appConfig.js\");\n/* harmony import */ var _stacks_connect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stacks/connect */ \"(app-pages-browser)/./node_modules/@stacks/auth/dist/esm/userSession.js\");\n/* harmony import */ var _stacks_connect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stacks/connect */ \"(app-pages-browser)/./node_modules/@stacks/connect/dist/index.mjs\");\n/* harmony import */ var _stacks_network__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stacks/network */ \"(app-pages-browser)/./node_modules/@stacks/network/dist/esm/network.js\");\n/* harmony import */ var _stacks_transactions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stacks/transactions */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/builders.js\");\n/* harmony import */ var _stacks_transactions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @stacks/transactions */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/types/principalCV.js\");\n/* harmony import */ var _stacks_transactions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @stacks/transactions */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/clarityValue.js\");\n/* harmony import */ var _stacks_transactions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @stacks/transactions */ \"(app-pages-browser)/./node_modules/@stacks/transactions/dist/esm/clarity/types/intCV.js\");\n\n\n\nconst appConfig = new _stacks_connect__WEBPACK_IMPORTED_MODULE_0__.AppConfig([\n    \"store_write\",\n    \"publish_data\"\n]);\nconst userSession = new _stacks_connect__WEBPACK_IMPORTED_MODULE_1__.UserSession({\n    appConfig\n});\nconst network = new _stacks_network__WEBPACK_IMPORTED_MODULE_2__.StacksTestnet();\nconst appDetails = {\n    name: \"Voice Stables\",\n    icon:  true ? window.location.origin + \"/logo.png\" : 0\n};\nfunction authenticate() {\n    try {\n        (0,_stacks_connect__WEBPACK_IMPORTED_MODULE_3__.authenticate)({\n            appDetails,\n            userSession,\n            onFinish: ()=>window.location.reload()\n        });\n    } catch (e) {\n        console.error(\"Authentication error:\", e);\n        alert(\"Failed to start authentication. Please check your wallet.\");\n    }\n}\n// Sign out and reload UI\nfunction disconnect() {\n    try {\n        userSession.signUserOut();\n    } finally{\n        if (true) window.location.reload();\n    }\n}\n// Get connected address (prefers testnet)\nfunction getUserAddress() {\n    try {\n        if (userSession.isUserSignedIn()) {\n            var _userData_profile_stxAddress, _userData_profile, _userData_profile_stxAddress1, _userData_profile1, _userData_profile2;\n            const userData = userSession.loadUserData();\n            return ((_userData_profile = userData.profile) === null || _userData_profile === void 0 ? void 0 : (_userData_profile_stxAddress = _userData_profile.stxAddress) === null || _userData_profile_stxAddress === void 0 ? void 0 : _userData_profile_stxAddress.testnet) || ((_userData_profile1 = userData.profile) === null || _userData_profile1 === void 0 ? void 0 : (_userData_profile_stxAddress1 = _userData_profile1.stxAddress) === null || _userData_profile_stxAddress1 === void 0 ? void 0 : _userData_profile_stxAddress1.mainnet) || ((_userData_profile2 = userData.profile) === null || _userData_profile2 === void 0 ? void 0 : _userData_profile2.stxAddress) || null;\n        }\n    } catch (e) {\n        console.warn(\"Could not read user session:\", e);\n    }\n    return null;\n}\n// Contracts (Testnet)\nconst VOICE_TRANSFER_CONTRACT = \"ST3HZSQ3EVYVFAX6KR3077S69FNZHB0XWMQ2WWTNJ.voice-transfer-v2\";\nconst USDC_CONTRACT = \"ST3HZSQ3EVYVFAX6KR3077S69FNZHB0XWMQ2WWTNJ.mock-usdc-v2\";\nfunction splitContract(id) {\n    const [address, name] = id.split(\".\");\n    return {\n        address,\n        name\n    };\n}\n// Read vault balance (uint) for a principal\nasync function getVaultBalance(who) {\n    const { address, name } = splitContract(VOICE_TRANSFER_CONTRACT);\n    const result = await (0,_stacks_transactions__WEBPACK_IMPORTED_MODULE_4__.callReadOnlyFunction)({\n        contractAddress: address,\n        contractName: name,\n        functionName: \"get-vault-balance\",\n        functionArgs: [\n            (0,_stacks_transactions__WEBPACK_IMPORTED_MODULE_5__.principalCV)(who)\n        ],\n        network,\n        senderAddress: who\n    });\n    const json = (0,_stacks_transactions__WEBPACK_IMPORTED_MODULE_6__.cvToJSON)(result);\n    return BigInt(json.value);\n}\n// Deposit amount (base units) into the vault\nasync function depositToVault(amount) {\n    const { address: vtAddr, name: vtName } = splitContract(VOICE_TRANSFER_CONTRACT);\n    const { address: usdcAddr, name: usdcName } = splitContract(USDC_CONTRACT);\n    return (0,_stacks_connect__WEBPACK_IMPORTED_MODULE_3__.openContractCall)({\n        contractAddress: vtAddr,\n        contractName: vtName,\n        functionName: \"deposit\",\n        functionArgs: [\n            (0,_stacks_transactions__WEBPACK_IMPORTED_MODULE_7__.uintCV)(typeof amount === \"bigint\" ? Number(amount) : amount),\n            (0,_stacks_transactions__WEBPACK_IMPORTED_MODULE_5__.contractPrincipalCV)(usdcAddr, usdcName)\n        ],\n        network,\n        onFinish: ()=>{}\n    });\n}\n// Withdraw amount (base units) from the vault\nasync function withdrawFromVault(amount) {\n    const { address: vtAddr, name: vtName } = splitContract(VOICE_TRANSFER_CONTRACT);\n    const { address: usdcAddr, name: usdcName } = splitContract(USDC_CONTRACT);\n    return (0,_stacks_connect__WEBPACK_IMPORTED_MODULE_3__.openContractCall)({\n        contractAddress: vtAddr,\n        contractName: vtName,\n        functionName: \"withdraw\",\n        functionArgs: [\n            (0,_stacks_transactions__WEBPACK_IMPORTED_MODULE_7__.uintCV)(typeof amount === \"bigint\" ? Number(amount) : amount),\n            (0,_stacks_transactions__WEBPACK_IMPORTED_MODULE_5__.contractPrincipalCV)(usdcAddr, usdcName)\n        ],\n        network,\n        onFinish: ()=>{}\n    });\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVUsS0FBTztJQUNuQjtBQUNGO0FBRUEsOENBQThDO0FBQ3ZDLGVBQWV5QyxrQkFBa0JOLE1BQXVCO0lBQzdELE1BQU0sRUFBRWQsU0FBU2UsTUFBTSxFQUFFekMsTUFBTTBDLE1BQU0sRUFBRSxHQUFHbEIsY0FBY0Y7SUFDeEQsTUFBTSxFQUFFSSxTQUFTaUIsUUFBUSxFQUFFM0MsTUFBTTRDLFFBQVEsRUFBRSxHQUFHcEIsY0FBY0Q7SUFDNUQsT0FBT2xDLGlFQUFnQkEsQ0FBQztRQUN0QjBDLGlCQUFpQlU7UUFDakJULGNBQWNVO1FBQ2RULGNBQWM7UUFDZEMsY0FBYztZQUNaeEMsNERBQU1BLENBQUMsT0FBTzhDLFdBQVcsV0FBV0ssT0FBT0wsVUFBVUE7WUFDckRoRCx5RUFBbUJBLENBQUNtRCxVQUFVQztTQUMvQjtRQUNEOUM7UUFDQU8sVUFBVSxLQUFPO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9zdGFja3MudHM/YjFiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBDb25maWcsIFVzZXJTZXNzaW9uLCBhdXRoZW50aWNhdGUgYXMgc2hvd1N0YWNrc0F1dGgsIG9wZW5Db250cmFjdENhbGwgfSBmcm9tICdAc3RhY2tzL2Nvbm5lY3QnO1xuaW1wb3J0IHsgU3RhY2tzVGVzdG5ldCB9IGZyb20gJ0BzdGFja3MvbmV0d29yayc7XG5pbXBvcnQgeyBjYWxsUmVhZE9ubHlGdW5jdGlvbiwgY29udHJhY3RQcmluY2lwYWxDViwgcHJpbmNpcGFsQ1YsIHVpbnRDViwgY3ZUb0pTT04gfSBmcm9tICdAc3RhY2tzL3RyYW5zYWN0aW9ucyc7XG5cbmNvbnN0IGFwcENvbmZpZyA9IG5ldyBBcHBDb25maWcoWydzdG9yZV93cml0ZScsICdwdWJsaXNoX2RhdGEnXSk7XG5leHBvcnQgY29uc3QgdXNlclNlc3Npb24gPSBuZXcgVXNlclNlc3Npb24oeyBhcHBDb25maWcgfSk7XG5cbmV4cG9ydCBjb25zdCBuZXR3b3JrID0gbmV3IFN0YWNrc1Rlc3RuZXQoKTtcblxuZXhwb3J0IGNvbnN0IGFwcERldGFpbHMgPSB7XG4gIG5hbWU6ICdWb2ljZSBTdGFibGVzJyxcbiAgaWNvbjogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9sb2dvLnBuZycgOiAnJyxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBhdXRoZW50aWNhdGUoKSB7XG4gIHRyeSB7XG4gICAgc2hvd1N0YWNrc0F1dGgoe1xuICAgICAgYXBwRGV0YWlscyxcbiAgICAgIHVzZXJTZXNzaW9uLFxuICAgICAgb25GaW5pc2g6ICgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGVycm9yOicsIGUpO1xuICAgIGFsZXJ0KCdGYWlsZWQgdG8gc3RhcnQgYXV0aGVudGljYXRpb24uIFBsZWFzZSBjaGVjayB5b3VyIHdhbGxldC4nKTtcbiAgfVxufVxuXG4vLyBTaWduIG91dCBhbmQgcmVsb2FkIFVJXG5leHBvcnQgZnVuY3Rpb24gZGlzY29ubmVjdCgpIHtcbiAgdHJ5IHtcbiAgICB1c2VyU2Vzc2lvbi5zaWduVXNlck91dCgpO1xuICB9IGZpbmFsbHkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9XG59XG5cbi8vIEdldCBjb25uZWN0ZWQgYWRkcmVzcyAocHJlZmVycyB0ZXN0bmV0KVxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJBZGRyZXNzKCk6IHN0cmluZyB8IG51bGwge1xuICB0cnkge1xuICAgIGlmICh1c2VyU2Vzc2lvbi5pc1VzZXJTaWduZWRJbigpKSB7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJTZXNzaW9uLmxvYWRVc2VyRGF0YSgpO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgKHVzZXJEYXRhIGFzIGFueSkucHJvZmlsZT8uc3R4QWRkcmVzcz8udGVzdG5ldCB8fFxuICAgICAgICAodXNlckRhdGEgYXMgYW55KS5wcm9maWxlPy5zdHhBZGRyZXNzPy5tYWlubmV0IHx8XG4gICAgICAgICh1c2VyRGF0YSBhcyBhbnkpLnByb2ZpbGU/LnN0eEFkZHJlc3MgfHxcbiAgICAgICAgbnVsbFxuICAgICAgKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCByZWFkIHVzZXIgc2Vzc2lvbjonLCBlKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLy8gQ29udHJhY3RzIChUZXN0bmV0KVxuZXhwb3J0IGNvbnN0IFZPSUNFX1RSQU5TRkVSX0NPTlRSQUNUID0gJ1NUM0haU1EzRVZZVkZBWDZLUjMwNzdTNjlGTlpIQjBYV01RMldXVE5KLnZvaWNlLXRyYW5zZmVyLXYyJztcbmV4cG9ydCBjb25zdCBVU0RDX0NPTlRSQUNUID0gJ1NUM0haU1EzRVZZVkZBWDZLUjMwNzdTNjlGTlpIQjBYV01RMldXVE5KLm1vY2stdXNkYy12Mic7XG5cbmZ1bmN0aW9uIHNwbGl0Q29udHJhY3QoaWQ6IHN0cmluZyk6IHsgYWRkcmVzczogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfSB7XG4gIGNvbnN0IFthZGRyZXNzLCBuYW1lXSA9IGlkLnNwbGl0KCcuJyk7XG4gIHJldHVybiB7IGFkZHJlc3MsIG5hbWUgfTtcbn1cblxuLy8gUmVhZCB2YXVsdCBiYWxhbmNlICh1aW50KSBmb3IgYSBwcmluY2lwYWxcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRWYXVsdEJhbGFuY2Uod2hvOiBzdHJpbmcpOiBQcm9taXNlPGJpZ2ludD4ge1xuICBjb25zdCB7IGFkZHJlc3MsIG5hbWUgfSA9IHNwbGl0Q29udHJhY3QoVk9JQ0VfVFJBTlNGRVJfQ09OVFJBQ1QpO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWxsUmVhZE9ubHlGdW5jdGlvbih7XG4gICAgY29udHJhY3RBZGRyZXNzOiBhZGRyZXNzLFxuICAgIGNvbnRyYWN0TmFtZTogbmFtZSxcbiAgICBmdW5jdGlvbk5hbWU6ICdnZXQtdmF1bHQtYmFsYW5jZScsXG4gICAgZnVuY3Rpb25BcmdzOiBbcHJpbmNpcGFsQ1Yod2hvKV0sXG4gICAgbmV0d29yayxcbiAgICBzZW5kZXJBZGRyZXNzOiB3aG8sXG4gIH0pO1xuICBjb25zdCBqc29uID0gY3ZUb0pTT04ocmVzdWx0IGFzIGFueSk7XG4gIHJldHVybiBCaWdJbnQoanNvbi52YWx1ZSBhcyBzdHJpbmcpO1xufVxuXG4vLyBEZXBvc2l0IGFtb3VudCAoYmFzZSB1bml0cykgaW50byB0aGUgdmF1bHRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXBvc2l0VG9WYXVsdChhbW91bnQ6IG51bWJlciB8IGJpZ2ludCkge1xuICBjb25zdCB7IGFkZHJlc3M6IHZ0QWRkciwgbmFtZTogdnROYW1lIH0gPSBzcGxpdENvbnRyYWN0KFZPSUNFX1RSQU5TRkVSX0NPTlRSQUNUKTtcbiAgY29uc3QgeyBhZGRyZXNzOiB1c2RjQWRkciwgbmFtZTogdXNkY05hbWUgfSA9IHNwbGl0Q29udHJhY3QoVVNEQ19DT05UUkFDVCk7XG4gIHJldHVybiBvcGVuQ29udHJhY3RDYWxsKHtcbiAgICBjb250cmFjdEFkZHJlc3M6IHZ0QWRkcixcbiAgICBjb250cmFjdE5hbWU6IHZ0TmFtZSxcbiAgICBmdW5jdGlvbk5hbWU6ICdkZXBvc2l0JyxcbiAgICBmdW5jdGlvbkFyZ3M6IFtcbiAgICAgIHVpbnRDVih0eXBlb2YgYW1vdW50ID09PSAnYmlnaW50JyA/IE51bWJlcihhbW91bnQpIDogYW1vdW50KSxcbiAgICAgIGNvbnRyYWN0UHJpbmNpcGFsQ1YodXNkY0FkZHIsIHVzZGNOYW1lKSxcbiAgICBdLFxuICAgIG5ldHdvcmssXG4gICAgb25GaW5pc2g6ICgpID0+IHt9LFxuICB9KTtcbn1cblxuLy8gV2l0aGRyYXcgYW1vdW50IChiYXNlIHVuaXRzKSBmcm9tIHRoZSB2YXVsdFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhkcmF3RnJvbVZhdWx0KGFtb3VudDogbnVtYmVyIHwgYmlnaW50KSB7XG4gIGNvbnN0IHsgYWRkcmVzczogdnRBZGRyLCBuYW1lOiB2dE5hbWUgfSA9IHNwbGl0Q29udHJhY3QoVk9JQ0VfVFJBTlNGRVJfQ09OVFJBQ1QpO1xuICBjb25zdCB7IGFkZHJlc3M6IHVzZGNBZGRyLCBuYW1lOiB1c2RjTmFtZSB9ID0gc3BsaXRDb250cmFjdChVU0RDX0NPTlRSQUNUKTtcbiAgcmV0dXJuIG9wZW5Db250cmFjdENhbGwoe1xuICAgIGNvbnRyYWN0QWRkcmVzczogdnRBZGRyLFxuICAgIGNvbnRyYWN0TmFtZTogdnROYW1lLFxuICAgIGZ1bmN0aW9uTmFtZTogJ3dpdGhkcmF3JyxcbiAgICBmdW5jdGlvbkFyZ3M6IFtcbiAgICAgIHVpbnRDVih0eXBlb2YgYW1vdW50ID09PSAnYmlnaW50JyA/IE51bWJlcihhbW91bnQpIDogYW1vdW50KSxcbiAgICAgIGNvbnRyYWN0UHJpbmNpcGFsQ1YodXNkY0FkZHIsIHVzZGNOYW1lKSxcbiAgICBdLFxuICAgIG5ldHdvcmssXG4gICAgb25GaW5pc2g6ICgpID0+IHt9LFxuICB9KTtcbn0iXSwibmFtZXMiOlsiQXBwQ29uZmlnIiwiVXNlclNlc3Npb24iLCJhdXRoZW50aWNhdGUiLCJzaG93U3RhY2tzQXV0aCIsIm9wZW5Db250cmFjdENhbGwiLCJTdGFja3NUZXN0bmV0IiwiY2FsbFJlYWRPbmx5RnVuY3Rpb24iLCJjb250cmFjdFByaW5jaXBhbENWIiwicHJpbmNpcGFsQ1YiLCJ1aW50Q1YiLCJjdlRvSlNPTiIsImFwcENvbmZpZyIsInVzZXJTZXNzaW9uIiwibmV0d29yayIsImFwcERldGFpbHMiLCJuYW1lIiwiaWNvbiIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwib25GaW5pc2giLCJyZWxvYWQiLCJlIiwiY29uc29sZSIsImVycm9yIiwiYWxlcnQiLCJkaXNjb25uZWN0Iiwic2lnblVzZXJPdXQiLCJnZXRVc2VyQWRkcmVzcyIsImlzVXNlclNpZ25lZEluIiwidXNlckRhdGEiLCJsb2FkVXNlckRhdGEiLCJwcm9maWxlIiwic3R4QWRkcmVzcyIsInRlc3RuZXQiLCJtYWlubmV0Iiwid2FybiIsIlZPSUNFX1RSQU5TRkVSX0NPTlRSQUNUIiwiVVNEQ19DT05UUkFDVCIsInNwbGl0Q29udHJhY3QiLCJpZCIsImFkZHJlc3MiLCJzcGxpdCIsImdldFZhdWx0QmFsYW5jZSIsIndobyIsInJlc3VsdCIsImNvbnRyYWN0QWRkcmVzcyIsImNvbnRyYWN0TmFtZSIsImZ1bmN0aW9uTmFtZSIsImZ1bmN0aW9uQXJncyIsInNlbmRlckFkZHJlc3MiLCJqc29uIiwiQmlnSW50IiwidmFsdWUiLCJkZXBvc2l0VG9WYXVsdCIsImFtb3VudCIsInZ0QWRkciIsInZ0TmFtZSIsInVzZGNBZGRyIiwidXNkY05hbWUiLCJOdW1iZXIiLCJ3aXRoZHJhd0Zyb21WYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/stacks.ts\n"));

/***/ })

});